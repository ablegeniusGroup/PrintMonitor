13:45:03.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:03.527 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:03.656 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:03.785 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:03.788 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:03.806 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:08.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:08.890 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:08.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:18.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:18.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:18.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:28.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:28.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:28.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:38.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:38.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:38.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:48.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:48.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:48.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:45:58.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:45:58.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:45:58.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:46:08.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:08.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:08.944 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
13:46:08.962 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:08.963 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04911(String), 43737(Long), N(String), UNPRINT(String)
13:46:08.973 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:08.985 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:08.987 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04911(String), 43735(Long), N(String), UNPRINT(String)
13:46:08.996 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:09.001 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:09.002 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04911(String), 43736(Long), N(String), UNPRINT(String)
13:46:09.008 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:09.039 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:46:09.041 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:46:09.048 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:10.288 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:46:10.290 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String)
13:46:10.307 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:18.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:46:18.469 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String)
13:46:18.473 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:18.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:18.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:18.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:46:19.247 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:46:19.248 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String)
13:46:19.255 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:19.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:46:19.927 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String)
13:46:19.932 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:20.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:46:20.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String)
13:46:20.392 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:28.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:28.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:28.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:46:33.397 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:46:33.398 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String), N(String), 00(String)
13:46:33.429 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:33.435 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:46:33.436 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04911(String), 00(String)
13:46:33.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:38.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:38.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:38.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:46:39.943 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:46:39.944 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 13:46:39(String), 9999999(String), KVSP(String), 43737(String), 04911(String), T1(String), N(String), 0034                     (String)
13:46:39.951 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:39.952 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:39.952 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04911(String), 43737(Long), N(String), PREPRINT(String)
13:46:39.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:46:39.962 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:46:39.963 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 13:46:39(String), 9999999(String), KVSP(String), 43735(String), 04911(String), T1(String), N(String), 0032                     (String)
13:46:39.966 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:39.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:39.969 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04911(String), 43735(Long), N(String), PREPRINT(String)
13:46:39.972 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:46:39.978 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:46:39.979 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 13:46:39(String), 9999999(String), KVSP(String), 43736(String), 04911(String), T1(String), N(String), 0033                     (String)
13:46:39.983 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:46:39.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:46:39.985 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04911(String), 43736(Long), N(String), PREPRINT(String)
13:46:39.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:46:39.999 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:46:40.000 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:46:40.004 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:46:48.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:48.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:48.973 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:46:58.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:46:58.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:46:58.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:47:08.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:08.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:08.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:47:19.071 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:19.072 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:19.100 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 4
13:47:19.110 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:47:19.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04912(String), 43739(Long), N(String), UNPRINT(String)
13:47:19.121 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:47:19.129 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:47:19.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04912(String), 43742(Long), N(String), UNPRINT(String)
13:47:19.138 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:47:19.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:47:19.166 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04912(String), 43740(Long), N(String), UNPRINT(String)
13:47:19.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:47:19.183 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:47:19.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04912(String), 43741(Long), N(String), UNPRINT(String)
13:47:19.204 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:47:19.224 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:47:19.224 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:47:19.268 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:47:19.268 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:47:19.269 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====> Parameters: 04912(String)
13:47:19.304 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <====      Total: 1
13:47:28.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:28.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:28.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:47:38.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:38.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:38.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:47:48.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:48.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:48.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:47:58.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:47:58.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:47:58.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:08.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:08.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:08.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:13.595 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:48:13.596 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), N(String), 00(String)
13:48:13.600 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:48:13.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:48:13.605 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), 00(String)
13:48:13.608 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:18.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:18.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:18.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:26.938 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:48:26.939 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), N(String), 00(String)
13:48:26.942 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:48:26.946 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:48:26.947 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), 00(String)
13:48:26.950 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:28.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:28.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:28.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:38.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:38.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:38.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:48.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:48.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:48.963 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:53.379 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:48:53.379 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), N(String), 00(String)
13:48:53.382 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:48:53.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:48:53.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), 00(String)
13:48:53.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:48:58.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:48:58.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:48:58.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:08.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:18.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:18.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:18.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:28.953 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:28.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:28.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:38.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:38.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:38.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:48.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:48.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:48.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:49:58.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:49:58.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:49:58.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:08.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:18.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:18.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:18.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:24.970 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:50:24.971 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), N(String), 00(String)
13:50:24.974 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:50:24.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:50:24.978 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04912(String), 00(String)
13:50:24.981 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:28.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:28.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:28.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:38.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:38.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:38.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:48.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:48.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:48.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:50:58.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:50:58.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:50:58.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:51:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:51:08.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:51:08.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:51:18.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:51:18.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:51:18.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:51:28.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:51:28.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:51:28.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:51:38.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:51:38.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:51:38.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:09.484 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:09.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:09.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:09.814 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:09.816 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:09.830 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:16.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:16.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:16.320 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:26.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:26.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:26.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
13:52:26.360 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:26.362 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04913(String), 43746(Long), N(String), UNPRINT(String)
13:52:26.367 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:52:26.377 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:26.378 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04913(String), 43744(Long), N(String), UNPRINT(String)
13:52:26.386 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:52:26.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:26.397 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04913(String), 43745(Long), N(String), UNPRINT(String)
13:52:26.406 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:52:26.454 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:52:26.459 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:52:26.465 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:27.136 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:27.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:27.145 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:28.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:28.840 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:28.847 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:29.509 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:29.511 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:29.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:30.000 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:30.001 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:30.006 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:30.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:30.262 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:30.280 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:30.929 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:30.930 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:30.934 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:31.599 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:52:31.600 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String)
13:52:31.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:36.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:36.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:36.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:46.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:46.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:46.321 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:51.303 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:52:51.304 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String), N(String), 00(String)
13:52:51.310 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:51.313 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
13:52:51.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04913(String), 00(String)
13:52:51.321 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:52.540 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:52.541 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04913(String), 43746(Long), N(String), PREPRINT(String)
13:52:52.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:52:52.548 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:52.549 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04913(String), 43744(Long), N(String), PREPRINT(String)
13:52:52.553 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:52:52.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:52:52.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04913(String), 43745(Long), N(String), PREPRINT(String)
13:52:52.561 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:52:52.575 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:52:52.576 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:52:52.582 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:52:54.464 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
13:52:54.465 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:54.470 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:52:56.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:52:56.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:52:56.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:06.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:06.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:06.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:16.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:16.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:16.332 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
13:53:16.336 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:53:16.336 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43752(Long), N(String), UNPRINT(String)
13:53:16.339 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:16.343 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:53:16.343 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43750(Long), N(String), UNPRINT(String)
13:53:16.347 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:16.350 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:53:16.351 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43751(Long), N(String), UNPRINT(String)
13:53:16.356 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:16.370 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:53:16.370 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:53:16.375 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:16.383 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:53:16.384 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String)
13:53:16.388 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:26.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:26.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:26.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:28.057 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:53:28.058 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String), N(String), 00(String)
13:53:28.062 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:28.065 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
13:53:28.066 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String), 00(String)
13:53:28.070 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:28.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
13:53:28.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04914(String), 43752(Long), N(String)
13:53:28.919 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:28.922 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
13:53:28.923 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04914(String), 43750(Long), N(String)
13:53:28.928 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:28.935 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
13:53:28.936 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04914(String), 43751(Long), N(String)
13:53:28.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:28.949 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:53:28.951 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:53:28.951 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
13:53:28.952 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String), 2018-01-25 13:53:28.91(Timestamp), 2018-01-25 13:54:28.91(Timestamp)
13:53:28.955 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:28.960 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:53:29.992 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
13:53:29.992 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:30.004 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:31.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:53:31.324 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String)
13:53:31.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:36.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:36.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:36.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:44.389 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
13:53:44.390 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:44.393 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:46.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:46.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:46.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:53:47.571 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
13:53:47.572 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:47.577 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:48.829 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:53:48.830 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String)
13:53:48.835 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:53:56.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:53:56.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:53:56.330 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:54:06.317 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:06.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:06.326 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:54:16.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:16.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:16.326 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:54:26.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:26.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:26.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
13:54:26.346 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:54:26.347 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43752(Long), N(String), HANG(String)
13:54:26.354 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:54:26.370 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:54:26.370 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43750(Long), N(String), HANG(String)
13:54:26.383 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:54:26.392 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:54:26.392 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04914(String), 43751(Long), N(String), HANG(String)
13:54:26.396 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:54:26.399 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
13:54:26.400 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String)
13:54:26.403 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:54:26.414 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:54:26.415 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:54:26.417 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:54:36.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:36.320 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:36.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:54:46.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:46.324 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:46.332 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:54:56.321 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:54:56.321 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:54:56.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:06.322 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:06.322 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:06.329 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:16.324 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:16.324 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:16.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:26.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:26.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:26.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:36.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:36.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:36.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:46.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:46.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:46.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:55:56.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:55:56.328 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:55:56.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:06.328 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:06.328 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:06.335 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:16.330 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:16.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:16.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:26.330 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:26.330 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:26.340 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:36.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:36.332 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:36.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:46.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:46.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:46.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:56:56.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:56:56.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:56:56.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:06.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:06.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:06.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:16.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:16.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:16.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:26.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:26.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:26.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:36.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:36.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:36.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:46.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:46.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:46.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:57:56.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:57:56.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:57:56.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:06.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:06.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:06.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:16.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:16.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:16.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:26.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:26.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:26.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:36.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:36.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:36.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:46.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:46.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:46.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:58:56.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:58:56.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:58:56.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:06.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:06.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:06.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:16.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:16.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:16.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:26.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:26.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:26.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:36.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:36.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:36.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:46.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:46.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:46.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:59:56.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:59:56.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:59:56.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:06.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:06.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:06.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:16.418 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:16.418 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:16.450 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:26.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:26.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:26.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:36.410 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:36.411 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:36.425 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:46.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:46.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:46.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:00:55.821 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:00:55.822 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String)
14:00:55.826 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:00:56.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:00:56.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:00:56.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:06.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:06.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:06.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:16.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:16.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:16.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:26.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:26.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:26.384 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:36.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:36.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:36.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:46.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:46.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:46.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:01:56.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:01:56.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:01:56.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:06.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:06.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:06.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:16.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:16.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:16.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:26.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:26.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:26.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:36.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:36.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:36.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:46.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:46.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:46.389 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:02:56.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:02:56.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:02:56.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:06.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:06.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:06.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:16.409 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:16.409 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:16.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:26.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:26.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:26.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:36.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:36.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:36.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:46.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:46.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:46.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:03:56.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:03:56.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:03:56.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:06.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:06.384 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:06.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:16.417 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:16.417 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:16.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:26.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:26.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:26.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:36.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:36.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:36.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:46.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:46.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:46.395 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:56.389 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:04:56.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:04:56.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:04:59.155 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
14:04:59.155 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04914(String), N(String), 00(String)
14:04:59.160 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
14:05:00.651 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
14:05:00.652 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 14:05:00(String), 9999999(String), KVSP(String), 43752(String), 04914(String), S11(String), N(String), 0034                     (String)
14:05:00.659 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.660 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:00.661 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04914(String), 43752(Long), N(String), PREPRINT(String)
14:05:00.669 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.676 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
14:05:00.676 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 14:05:00(String), 9999999(String), KVSP(String), 43750(String), 04914(String), S11(String), N(String), 0032                     (String)
14:05:00.680 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.680 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:00.681 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04914(String), 43750(Long), N(String), PREPRINT(String)
14:05:00.684 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.690 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
14:05:00.691 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-25(String), 14:05:00(String), 9999999(String), KVSP(String), 43751(String), 04914(String), S11(String), N(String), 0033                     (String)
14:05:00.696 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:00.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04914(String), 43751(Long), N(String), PREPRINT(String)
14:05:00.701 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:00.710 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:05:00.710 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:05:00.715 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:05:06.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:06.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:06.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:05:16.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:16.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:16.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:05:26.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:26.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:26.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
14:05:26.441 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.442 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), UNPRINT(String)
14:05:26.450 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.461 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.462 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), UNPRINT(String)
14:05:26.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), UNPRINT(String)
14:05:26.490 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), UNPRINT(String)
14:05:26.496 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.501 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.501 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), UNPRINT(String)
14:05:26.504 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.508 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.508 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), UNPRINT(String)
14:05:26.511 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.515 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.516 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), UNPRINT(String)
14:05:26.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.551 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.552 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), UNPRINT(String)
14:05:26.556 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.560 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:05:26.560 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), UNPRINT(String)
14:05:26.563 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:05:26.570 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:05:26.571 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:05:26.574 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:05:26.584 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:05:26.585 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:05:26.589 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:05:36.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:36.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:36.400 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:05:46.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:46.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:46.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:05:56.395 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:05:56.395 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:05:56.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:05.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:05.292 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
14:07:05.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:05.394 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:05.517 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:05.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 9
14:07:05.608 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:05.613 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:05.624 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:05.705 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.707 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), PREPRINT(String)
14:07:05.719 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.731 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.732 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), PREPRINT(String)
14:07:05.741 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.747 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.748 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), PREPRINT(String)
14:07:05.752 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.756 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.758 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), PREPRINT(String)
14:07:05.762 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.766 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.767 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), PREPRINT(String)
14:07:05.772 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.780 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.781 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), PREPRINT(String)
14:07:05.785 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.789 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.790 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), PREPRINT(String)
14:07:05.793 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.799 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.800 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), PREPRINT(String)
14:07:05.803 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.808 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:07:05.809 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), PREPRINT(String)
14:07:05.814 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:07:05.835 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:07:05.836 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:07:05.845 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:07:09.201 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:07:09.203 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:07:09.210 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:07:12.878 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:12.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:12.890 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:22.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:22.880 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:22.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:32.877 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:32.878 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:32.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:07:42.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:07:42.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:07:42.894 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:10:39.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:10:39.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:10:39.562 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 9
14:10:39.668 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:10:39.670 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:10:39.680 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:10:39.697 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.699 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), PREPRINT(String)
14:10:39.703 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.709 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.710 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), PREPRINT(String)
14:10:39.714 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.721 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.722 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), PREPRINT(String)
14:10:39.727 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.733 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.734 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), PREPRINT(String)
14:10:39.744 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.750 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.751 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), PREPRINT(String)
14:10:39.754 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.760 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.761 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), PREPRINT(String)
14:10:39.766 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.774 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.775 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), PREPRINT(String)
14:10:39.778 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.785 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.790 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), PREPRINT(String)
14:10:39.797 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.803 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:10:39.804 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), PREPRINT(String)
14:10:39.810 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:10:39.832 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:10:39.835 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:10:39.844 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:10:41.947 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:10:41.948 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:10:41.954 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:10:44.512 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:10:44.513 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:10:44.523 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:10:54.512 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:10:54.513 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:10:54.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:04.513 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:04.516 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:04.528 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:14.518 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:14.518 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:14.526 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:24.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:24.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:24.546 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:34.530 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:34.531 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:34.553 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:44.528 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:44.528 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:44.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:11:54.528 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:11:54.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:11:54.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:04.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:04.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:04.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:14.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:14.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:14.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:24.530 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:24.530 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:24.540 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:34.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:34.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:34.547 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:44.531 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:44.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:44.540 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:12:54.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:12:54.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:12:54.545 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:04.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:04.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:04.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:14.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:14.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:14.547 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:24.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:24.535 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:24.544 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:34.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:34.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:34.544 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:44.535 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:44.535 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:44.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:13:54.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:13:54.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:13:54.550 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:04.556 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:04.557 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:04.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:14.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:14.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:14.544 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:24.538 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:24.540 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:24.549 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:34.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:34.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:34.549 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:44.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:44.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:44.547 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:14:54.541 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:14:54.541 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:14:54.551 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:04.541 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:04.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:04.549 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:14.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:14.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:14.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:24.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:24.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:24.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:34.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:34.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:34.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:44.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:44.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:44.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:15:54.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:15:54.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:15:54.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:04.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:04.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:04.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:14.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:14.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:14.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:24.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:24.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:24.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:34.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:34.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:34.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:44.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:44.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:44.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:16:54.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:16:54.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:16:54.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:04.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:04.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:04.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:14.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:14.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:14.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:24.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:24.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:24.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:34.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:34.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:34.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:44.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:44.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:44.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:17:54.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:17:54.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:17:54.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:04.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:04.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:04.640 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:14.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:14.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:14.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:24.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:24.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:24.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:34.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:34.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:34.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:44.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:44.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:44.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:18:54.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:18:54.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:18:54.639 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:19:04.626 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:19:04.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:19:04.639 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:19:14.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:19:14.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:19:14.686 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:19:54.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:19:54.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:19:54.468 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 9
14:19:54.507 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:19:54.508 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:19:54.516 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:19:54.534 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.536 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), PREPRINT(String)
14:19:54.541 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.551 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.552 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), PREPRINT(String)
14:19:54.557 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), PREPRINT(String)
14:19:54.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.580 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), PREPRINT(String)
14:19:54.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.589 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.590 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), PREPRINT(String)
14:19:54.594 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.599 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), PREPRINT(String)
14:19:54.604 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.609 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.610 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), PREPRINT(String)
14:19:54.613 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.618 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.618 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), PREPRINT(String)
14:19:54.623 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.628 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:19:54.629 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), PREPRINT(String)
14:19:54.632 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:19:54.644 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:19:54.649 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:19:54.658 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:19:55.419 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:19:55.421 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:19:55.426 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:19:57.036 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:19:57.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:19:57.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:19:57.747 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:19:57.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:19:57.753 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:20:01.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:01.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:01.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:20:04.111 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:20:04.112 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:20:04.115 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:20:04.564 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:20:04.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:20:04.568 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:20:10.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:20:10.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:20:10.975 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:20:11.723 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:11.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:11.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:20:15.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:20:15.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:20:15.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:20:21.723 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:21.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:21.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:20:31.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:31.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:31.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:20:41.725 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:41.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:41.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:20:51.725 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:20:51.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:20:51.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:01.783 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:01.784 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:01.798 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:11.725 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:11.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:11.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:21.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:21.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:21.788 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:31.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:31.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:31.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:41.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:41.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:41.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:21:51.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:21:51.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:21:51.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:01.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:01.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:01.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:11.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:11.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:11.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:21.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:21.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:21.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:31.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:31.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:31.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:41.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:41.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:41.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:22:51.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:22:51.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:22:51.781 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:01.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:01.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:01.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:11.795 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:11.796 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:11.811 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:21.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:21.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:21.761 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:31.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:31.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:31.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:41.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:41.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:41.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:23:51.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:23:51.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:23:51.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:01.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:01.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:01.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:11.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:11.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:11.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:21.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:21.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:21.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:31.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:31.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:31.761 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:41.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:41.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:41.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:24:51.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:24:51.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:24:51.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:01.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:01.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:01.761 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:11.749 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:11.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:11.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:21.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:21.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:21.761 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:31.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:31.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:31.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:41.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:41.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:41.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:25:51.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:25:51.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:25:51.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:01.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:01.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:01.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:11.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:11.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:11.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:21.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:21.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:21.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:31.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:31.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:31.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:41.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:41.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:41.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:26:51.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:26:51.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:26:51.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:01.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:01.777 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:01.823 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:11.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:11.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:11.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:21.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:21.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:21.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:32.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:32.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:32.264 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:42.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:42.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:42.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:27:52.204 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:27:52.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:27:52.211 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:02.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:02.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:02.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:12.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:12.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:12.213 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:22.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:22.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:22.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:32.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:32.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:32.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:42.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:42.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:42.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:28:52.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:28:52.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:28:52.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:29:02.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:29:02.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:29:02.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:29:50.408 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:29:50.504 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:29:50.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 9
14:29:50.767 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:29:50.768 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:29:50.781 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:29:50.799 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.806 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), PREPRINT(String)
14:29:50.813 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.825 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.826 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), PREPRINT(String)
14:29:50.837 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.848 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.849 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), PREPRINT(String)
14:29:50.852 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.858 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.860 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), PREPRINT(String)
14:29:50.864 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.869 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.870 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), PREPRINT(String)
14:29:50.875 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.883 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.884 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), PREPRINT(String)
14:29:50.887 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.892 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.893 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), PREPRINT(String)
14:29:50.896 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.901 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.902 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), PREPRINT(String)
14:29:50.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.910 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:29:50.911 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), PREPRINT(String)
14:29:50.917 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:29:50.932 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:29:50.940 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:29:50.947 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:29:51.846 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:29:51.849 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:29:51.857 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:29:57.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:29:57.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:29:57.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:07.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:07.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:07.497 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:17.487 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:17.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:17.498 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:27.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:27.487 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:27.499 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:37.498 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:37.499 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:37.506 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:47.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:47.487 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:47.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:30:57.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:30:57.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:30:57.499 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:07.487 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:07.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:07.496 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:13.785 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:31:13.787 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:31:13.791 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:31:14.313 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:31:14.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:31:14.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:31:17.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:17.488 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:17.496 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:27.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:27.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:27.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:37.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:37.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:37.504 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:47.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:47.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:47.497 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:31:57.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:31:57.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:31:57.502 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:07.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:07.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:07.498 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:17.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:17.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:17.498 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:27.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:27.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:27.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:37.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:37.493 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:37.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:47.490 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:47.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:47.499 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:32:57.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:32:57.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:32:57.501 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:07.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:07.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:07.501 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:17.509 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:17.510 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:17.517 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:27.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:27.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:27.505 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:37.495 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:37.496 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:37.503 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:47.557 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:47.567 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:47.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:33:57.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:33:57.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:33:57.549 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:07.532 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:07.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:07.554 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:17.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:17.535 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:17.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:27.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:27.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:27.545 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:37.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:37.535 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:37.555 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:47.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:47.534 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:47.541 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:34:57.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:34:57.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:34:57.547 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:35:07.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:35:07.538 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:35:07.545 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:35:17.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:35:17.538 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:35:17.547 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:35:27.538 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:35:27.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:35:27.563 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:06.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:06.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:06.481 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 9
14:36:06.532 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:06.533 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:06.541 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:06.561 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.565 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), PREPRINT(String)
14:36:06.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.586 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.587 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), PREPRINT(String)
14:36:06.591 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.600 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.601 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), PREPRINT(String)
14:36:06.610 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.618 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.620 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), PREPRINT(String)
14:36:06.623 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.627 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.628 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), PREPRINT(String)
14:36:06.632 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.636 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.636 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), PREPRINT(String)
14:36:06.642 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.647 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.648 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), PREPRINT(String)
14:36:06.653 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.657 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.658 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), PREPRINT(String)
14:36:06.662 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.669 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:36:06.669 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), PREPRINT(String)
14:36:06.673 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:36:06.693 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:36:06.697 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:36:06.709 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:36:07.254 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:36:07.255 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:36:07.259 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:36:13.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:13.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:13.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:23.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:23.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:23.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:33.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:33.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:33.847 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:43.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:43.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:43.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:36:53.859 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:36:53.860 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:36:53.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:01.334 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
14:37:01.338 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String), N(String), 00(String)
14:37:01.342 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:01.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
14:37:01.349 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String), 00(String)
14:37:01.353 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:02.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.743 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43759(Long), N(String)
14:37:02.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.751 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.752 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43758(Long), N(String)
14:37:02.758 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.761 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.762 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43760(Long), N(String)
14:37:02.765 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.769 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43761(Long), N(String)
14:37:02.776 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.781 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43757(Long), N(String)
14:37:02.786 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.790 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.790 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43756(Long), N(String)
14:37:02.795 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.799 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.801 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43755(Long), N(String)
14:37:02.805 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.810 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.810 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43753(Long), N(String)
14:37:02.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.818 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
14:37:02.819 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04915(String), 43754(Long), N(String)
14:37:02.824 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:02.835 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:37:02.835 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
14:37:02.836 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:37:02.836 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String), 2018-01-25 14:37:02.739(Timestamp), 2018-01-25 14:38:02.739(Timestamp)
14:37:02.840 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:37:02.849 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:03.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:03.862 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
14:37:03.863 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:03.868 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
14:37:03.880 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
14:37:03.885 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.886 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43759(Long), N(String), HANG(String)
14:37:03.889 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.900 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.901 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43758(Long), N(String), HANG(String)
14:37:03.905 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.916 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.917 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43760(Long), N(String), HANG(String)
14:37:03.925 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.936 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.937 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43761(Long), N(String), HANG(String)
14:37:03.940 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.945 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.946 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43757(Long), N(String), HANG(String)
14:37:03.949 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.956 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.957 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43756(Long), N(String), HANG(String)
14:37:03.961 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.966 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.968 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43755(Long), N(String), HANG(String)
14:37:03.971 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:03.976 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:03.977 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43753(Long), N(String), HANG(String)
14:37:03.989 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:04.003 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
14:37:04.005 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04915(String), 43754(Long), N(String), HANG(String)
14:37:04.008 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:04.013 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
14:37:04.014 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:37:04.017 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
14:37:04.025 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
14:37:04.026 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
14:37:04.032 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
14:37:13.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:13.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:13.846 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:23.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:23.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:23.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:33.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:33.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:33.839 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:43.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:43.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:43.839 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:53.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:37:53.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:37:53.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
14:37:59.808 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
14:37:59.809 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04915(String)
14:37:59.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
14:38:03.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
14:38:03.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
14:38:03.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
