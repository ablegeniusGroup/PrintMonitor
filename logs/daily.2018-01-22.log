21:46:52.259 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
21:46:52.259 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:46:52.354 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:46:52.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:46:52.672 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:46:52.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
21:46:52.849 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0B' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0B' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:46:52.854 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:46:52.929 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:46:56.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:46:56.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:46:56.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:47:06.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:47:06.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:47:06.651 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:51:41.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:51:41.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:51:42.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 14
21:51:42.371 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0B' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0B' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:51:42.373 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:51:42.434 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:51:42.451 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.453 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43422(Long), N(String), UNPRINT(String)
21:51:42.468 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.478 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43421(Long), N(String), UNPRINT(String)
21:51:42.483 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.492 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43416(Long), N(String), UNPRINT(String)
21:51:42.496 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.504 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.505 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43417(Long), N(String), UNPRINT(String)
21:51:42.509 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.520 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.521 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43423(Long), N(String), UNPRINT(String)
21:51:42.525 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.536 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.537 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43420(Long), N(String), UNPRINT(String)
21:51:42.542 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.553 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.554 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43413(Long), N(String), UNPRINT(String)
21:51:42.558 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.566 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.567 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43414(Long), N(String), UNPRINT(String)
21:51:42.571 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.576 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43415(Long), N(String), UNPRINT(String)
21:51:42.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.587 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.588 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43418(Long), N(String), UNPRINT(String)
21:51:42.636 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.645 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.646 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43410(Long), N(String), UNPRINT(String)
21:51:42.653 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.660 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.660 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43419(Long), N(String), UNPRINT(String)
21:51:42.663 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.667 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.668 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43412(Long), N(String), UNPRINT(String)
21:51:42.671 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.675 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:51:42.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43411(Long), N(String), UNPRINT(String)
21:51:42.681 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:51:42.693 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
21:51:42.697 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
21:51:42.705 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
21:51:43.304 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
21:51:43.305 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String)
21:51:43.316 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
21:51:48.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:51:48.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:51:48.973 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:51:58.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:51:58.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:51:58.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:08.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:08.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:08.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:18.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:18.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:18.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:28.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:28.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:28.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:29.599 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
21:52:29.601 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String), N(String), 00(String)
21:52:29.694 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:30.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43422(Long), N(String)
21:52:30.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43421(Long), N(String)
21:52:30.644 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.648 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43416(Long), N(String)
21:52:30.651 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.656 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43417(Long), N(String)
21:52:30.659 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.663 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.664 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43423(Long), N(String)
21:52:30.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.674 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.674 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43420(Long), N(String)
21:52:30.677 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.681 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43413(Long), N(String)
21:52:30.685 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.688 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43414(Long), N(String)
21:52:30.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.698 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43415(Long), N(String)
21:52:30.703 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.706 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43418(Long), N(String)
21:52:30.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.714 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.714 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43410(Long), N(String)
21:52:30.718 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.722 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.723 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43419(Long), N(String)
21:52:30.727 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.730 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.731 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43412(Long), N(String)
21:52:30.734 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.739 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
21:52:30.740 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04877(String), 43411(Long), N(String)
21:52:30.745 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:30.751 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
21:52:30.752 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
21:52:30.753 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
21:52:30.755 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String), 2018-01-22 21:52:30.628(Timestamp), 2018-01-22 21:53:30.628(Timestamp)
21:52:30.756 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
21:52:30.768 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:52:31.859 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
21:52:31.861 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:31.868 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
21:52:38.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:38.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:38.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:48.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:48.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:48.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:52:58.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:52:58.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:52:58.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:53:08.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:08.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:08.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:53:18.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:18.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:18.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:53:28.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:28.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:28.982 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 14
21:53:28.990 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:28.991 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43422(Long), N(String), HANG(String)
21:53:29.002 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.015 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.016 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43421(Long), N(String), HANG(String)
21:53:29.019 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.028 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.028 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43416(Long), N(String), HANG(String)
21:53:29.031 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.044 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43417(Long), N(String), HANG(String)
21:53:29.049 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.053 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.054 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43423(Long), N(String), HANG(String)
21:53:29.058 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.061 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.061 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43420(Long), N(String), HANG(String)
21:53:29.064 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.067 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.068 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43413(Long), N(String), HANG(String)
21:53:29.072 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.076 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.076 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43414(Long), N(String), HANG(String)
21:53:29.079 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43415(Long), N(String), HANG(String)
21:53:29.086 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.091 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.091 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43418(Long), N(String), HANG(String)
21:53:29.094 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.099 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.100 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43410(Long), N(String), HANG(String)
21:53:29.103 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.108 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.109 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43419(Long), N(String), HANG(String)
21:53:29.114 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.118 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.119 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43412(Long), N(String), HANG(String)
21:53:29.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.125 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:53:29.126 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43411(Long), N(String), HANG(String)
21:53:29.148 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.156 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
21:53:29.156 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String)
21:53:29.162 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:53:29.167 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
21:53:29.168 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
21:53:29.174 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
21:53:38.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:38.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:38.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:53:48.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:48.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:48.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:53:58.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:53:58.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:53:58.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:08.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:08.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:08.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:18.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:18.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:18.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:28.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:28.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:28.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:38.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:38.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:38.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:48.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:48.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:48.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:54:58.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:54:58.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:54:58.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:08.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:08.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:08.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:18.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:18.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:18.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:28.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:28.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:28.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:38.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:38.953 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:38.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:48.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:48.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:49.000 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:55:58.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:55:58.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:55:58.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:08.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:08.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:08.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:18.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:18.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:18.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:28.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:28.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:28.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:38.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:38.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:38.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:48.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:48.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:48.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:56:58.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:56:58.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:56:58.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:08.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:08.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:08.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:18.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:18.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:18.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:28.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:28.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:28.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:38.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:38.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:38.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:48.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:48.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:48.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:57:52.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
21:57:52.659 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String)
21:57:52.666 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
21:57:58.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:57:58.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:57:58.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:58:53.175 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:58:53.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:58:53.989 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 14
21:58:54.036 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0B' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0B' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:58:54.038 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:58:54.118 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:58:54.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.132 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43422(Long), N(String), PREPRINT(String)
21:58:54.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.166 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.167 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43421(Long), N(String), PREPRINT(String)
21:58:54.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.182 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43416(Long), N(String), PREPRINT(String)
21:58:54.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.189 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.190 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43417(Long), N(String), PREPRINT(String)
21:58:54.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.206 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.207 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43423(Long), N(String), PREPRINT(String)
21:58:54.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43420(Long), N(String), PREPRINT(String)
21:58:54.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.245 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.246 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43413(Long), N(String), PREPRINT(String)
21:58:54.250 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.258 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.259 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43414(Long), N(String), PREPRINT(String)
21:58:54.264 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.273 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43415(Long), N(String), PREPRINT(String)
21:58:54.277 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.286 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.287 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43418(Long), N(String), PREPRINT(String)
21:58:54.292 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.302 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.303 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43410(Long), N(String), PREPRINT(String)
21:58:54.307 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.311 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.311 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43419(Long), N(String), PREPRINT(String)
21:58:54.320 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.331 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.332 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43412(Long), N(String), PREPRINT(String)
21:58:54.341 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.351 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
21:58:54.352 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04877(String), 43411(Long), N(String), PREPRINT(String)
21:58:54.360 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
21:58:54.371 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
21:58:54.379 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
21:58:54.392 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
21:58:55.288 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
21:58:55.289 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04877(String)
21:58:55.300 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
21:58:58.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:58:58.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:58:58.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:59:08.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:59:08.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:59:08.217 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:59:18.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:59:18.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:59:18.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:59:28.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:59:28.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:59:28.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:59:38.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:59:38.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:59:38.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
21:59:48.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0B' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0B' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
21:59:48.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
21:59:48.218 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
