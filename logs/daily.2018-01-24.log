09:52:17.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:17.868 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:18.131 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 4
09:52:18.201 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:18.202 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:18.264 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:18.287 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:18.289 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07277(String), 135284(Long), N(String), PREPRINT(String)
09:52:18.295 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:18.299 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:18.300 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07277(String), 135285(Long), N(String), PREPRINT(String)
09:52:18.304 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:18.316 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:52:18.320 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:52:18.328 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:18.779 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:52:18.781 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 07277(String)
09:52:18.788 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:18.794 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:18.795 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135250(Long), N(String), PREPRINT(String)
09:52:18.802 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:18.809 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:18.811 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135251(Long), N(String), PREPRINT(String)
09:52:18.816 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:18.864 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:52:18.865 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String)
09:52:18.869 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:18.882 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:52:18.885 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:52:18.890 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:22.552 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:52:22.553 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 07277(String), N(String), 00(String)
09:52:22.558 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:23.670 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:23.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:23.682 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:52:23.684 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 09:52:23(String), 9999999(String), KVSP(String), 135284(String), 07277(String), B8(String), N(String), 0001                     (String)
09:52:23.688 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:23.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:23.690 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 07277(String), 135284(Long), N(String), PREPRINT(String)
09:52:23.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:23.711 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:52:23.712 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 09:52:23(String), 9999999(String), KVSP(String), 135285(String), 07277(String), B8(String), N(String), 0002                     (String)
09:52:23.716 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:23.718 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:23.720 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 07277(String), 135285(Long), N(String), PREPRINT(String)
09:52:23.725 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:23.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:23.757 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:52:23.758 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:52:23.765 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:33.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:33.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:33.672 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:43.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:43.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:43.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:53.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:53.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:53.673 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:03.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:03.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:03.675 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:13.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:13.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:13.673 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:23.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:23.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:23.673 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:33.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:33.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:33.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:43.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:43.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:43.675 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:53.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:53.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:53.674 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:03.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:03.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:03.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:13.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:13.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:13.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:23.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:23.672 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:23.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:33.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:33.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:33.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:43.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:43.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:43.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:53.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:53.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:53.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:03.672 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:03.673 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:03.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:13.691 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:13.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:13.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:23.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:23.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:23.685 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:33.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:33.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:33.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:10.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:11.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:11.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
09:56:11.421 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:11.422 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:11.431 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:11.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:56:11.480 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135250(Long), N(String), PREPRINT(String)
09:56:11.496 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:56:11.509 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:56:11.510 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135251(Long), N(String), PREPRINT(String)
09:56:11.513 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:56:11.534 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:56:11.547 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:56:11.554 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:56:12.197 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:56:12.198 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String)
09:56:12.203 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:56:17.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:17.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:17.863 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:27.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:27.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:27.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:37.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:37.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:37.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:47.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:47.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:47.845 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:57.833 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:57.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:57.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:07.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:07.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:07.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:17.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:17.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:17.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:27.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:27.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:27.844 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:37.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:37.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:37.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:47.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:47.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:47.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:57.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:57.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:57.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:07.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:07.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:07.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:17.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:17.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:17.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:49.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:49.985 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:50.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
09:58:50.399 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:50.401 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:50.409 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:50.488 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:50.490 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135250(Long), N(String), PREPRINT(String)
09:58:50.497 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:50.504 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:50.505 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135251(Long), N(String), PREPRINT(String)
09:58:50.510 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:50.574 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:58:50.582 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:58:50.590 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:51.343 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:58:51.343 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String)
09:58:51.351 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:55.826 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:55.827 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:55.853 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:05.824 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:05.824 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:05.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:15.825 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:15.825 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:15.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:25.826 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:25.827 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:25.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:35.827 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:35.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:35.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:45.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:45.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:45.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:55.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:55.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:55.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:05.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:05.831 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:05.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:15.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:15.833 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:15.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:25.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:25.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:25.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:35.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:35.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:35.847 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:45.834 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:45.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:45.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:55.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:55.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:55.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:05.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:05.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:05.847 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:15.836 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:15.837 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:15.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:25.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:25.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:25.848 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:35.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:35.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:35.846 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:45.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:45.839 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:45.844 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:55.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:55.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:55.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:05.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:05.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:05.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:15.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:15.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:15.893 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:25.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:25.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:25.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:35.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:35.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:35.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:45.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:45.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:45.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:55.893 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:55.893 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:55.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:05.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:05.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:05.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:15.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:15.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:15.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:25.893 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:25.894 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:25.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:35.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:35.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:35.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:45.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:45.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:45.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:55.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:55.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:55.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:05.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:05.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:05.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:15.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:15.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:15.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:25.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:25.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:25.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:35.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:35.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:35.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:45.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:45.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:45.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:55.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:55.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:55.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:05.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:05.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:05.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:15.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:15.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:15.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:25.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:25.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:25.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:35.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:35.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:36.002 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:45.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:45.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:45.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:55.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:55.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:55.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:05.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:05.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:05.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:15.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:15.908 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:15.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:25.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:25.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:25.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:35.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:35.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:35.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:45.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:45.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:45.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:55.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:55.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:55.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:05.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:05.941 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:05.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:15.936 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:15.936 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:15.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:25.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:25.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:25.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:35.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:35.941 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:35.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:45.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:45.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:45.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:55.938 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:55.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:55.944 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:05.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:05.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:05.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:15.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:15.941 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:15.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:25.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:25.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:25.946 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:35.941 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:35.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:35.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:45.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:45.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:45.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:55.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:55.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:55.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:05.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:05.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:05.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:15.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:15.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:15.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:25.944 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:25.944 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:25.949 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:35.945 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:35.945 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:35.953 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:45.946 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:45.946 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:45.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:55.947 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:55.947 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:55.953 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:05.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:05.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:05.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:15.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:15.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:15.957 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:25.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:25.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:25.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:35.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:35.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:35.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:45.951 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:45.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:45.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:55.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:55.953 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:55.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:05.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:05.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:05.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:15.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:15.955 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:15.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:25.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:25.956 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:25.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:35.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:35.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:35.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:45.958 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:45.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:45.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:55.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:55.959 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:55.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:05.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:05.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:05.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:15.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:15.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:15.967 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:25.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:25.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:25.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:35.962 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:35.963 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:35.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:45.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:45.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:45.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:55.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:55.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:55.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:05.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:05.966 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:05.975 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:15.967 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:15.967 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:15.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:25.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:25.968 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:25.973 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:35.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:35.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:35.978 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:00.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:00.853 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:14:00.991 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:00.991 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:01.090 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:01.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
10:14:01.157 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:01.160 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:01.173 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:01.186 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:14:01.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135250(Long), N(String), PREPRINT(String)
10:14:01.192 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:14:01.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:14:01.199 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 07274(String), 135251(Long), N(String), PREPRINT(String)
10:14:01.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:14:01.223 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:14:01.223 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:14:01.229 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:14:03.799 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:14:03.800 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String)
10:14:03.808 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:14:06.512 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:14:06.513 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String), N(String), 00(String)
10:14:06.521 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:08.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:08.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:08.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:14.619 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:14:14.620 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String), N(String), 00(String)
10:14:14.624 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:18.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:18.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:18.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:28.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:28.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:28.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:32.074 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:14:32.075 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String), N(String), 00(String)
10:14:32.080 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:38.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:38.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:38.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:48.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:48.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:48.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:58.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:58.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:58.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:07.924 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:15:07.926 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 07274(String), N(String), 00(String)
10:15:07.936 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:08.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:08.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:08.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:08.881 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:15:08.882 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:15:08(String), 9999999(String), KVSP(String), 135250(String), 07274(String), B16(String), N(String), 0002                     (String)
10:15:08.887 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:15:08.889 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:15:08.890 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 07274(String), 135250(Long), N(String), PREPRINT(String)
10:15:08.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:15:08.900 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:15:08.901 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:15:08(String), 9999999(String), KVSP(String), 135251(String), 07274(String), B16(String), N(String), 0003                     (String)
10:15:08.907 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:15:08.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:15:08.909 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 07274(String), 135251(Long), N(String), PREPRINT(String)
10:15:08.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:15:08.951 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:15:08.952 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:15:08.962 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:15:11.961 [JavaFX Application Thread] DEBUG m.p.d.m.T.getTopButtons BaseJdbcLogger.java:159 debug - ==>  Preparing: select * from TOP_BUTTON 
10:15:11.962 [JavaFX Application Thread] DEBUG m.p.d.m.T.getTopButtons BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:11.968 [JavaFX Application Thread] DEBUG m.p.d.m.T.getTopButtons BaseJdbcLogger.java:159 debug - <==      Total: 10
10:15:11.989 [JavaFX Application Thread] DEBUG m.p.d.m.T.getOutOfStockTGoodsDto BaseJdbcLogger.java:159 debug - ==>  Preparing: select g.GoodsNo as goodsNo,g.NAME1 as goodName1 from T_goods g where g.GoodsNo in (SELECT su.GoodsNo FROM SUSPENDI su where su.auto_pause = 'TRUE' ) or g.GoodsNo in (select k.GoodsNo from ITEM_STK k where k.STOCK = 0.00 ) 
10:15:11.990 [JavaFX Application Thread] DEBUG m.p.d.m.T.getOutOfStockTGoodsDto BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:11.996 [JavaFX Application Thread] DEBUG m.p.d.m.T.getOutOfStockTGoodsDto BaseJdbcLogger.java:159 debug - <==      Total: 1
10:15:18.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:18.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:18.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:28.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:28.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:28.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:38.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:38.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:38.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:48.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:48.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:48.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:58.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:58.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:58.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:08.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:08.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:08.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:18.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:18.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:18.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:28.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:28.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:28.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:38.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:38.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:38.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:48.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:48.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:48.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:22.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:22.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:22.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:23.115 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:23.117 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:23.131 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:28.579 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:28.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:28.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:38.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:38.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:38.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:48.575 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:48.575 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:48.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:58.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:58.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:58.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:08.576 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:08.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:08.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:18.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:18.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:18.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:28.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:28.578 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:28.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:38.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:38.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:38.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:48.578 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:48.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:48.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:58.578 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:58.579 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:58.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:08.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:08.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:08.616 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:34.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:34.277 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:34.895 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 42
10:19:34.957 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:34.959 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:35.014 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:35.027 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.028 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), UNPRINT(String)
10:19:35.035 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.039 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.040 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), UNPRINT(String)
10:19:35.043 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.056 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.059 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.066 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.273 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:35.274 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:19:35.284 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.289 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.290 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04884(String), 43511(Long), N(String), UNPRINT(String)
10:19:35.294 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.301 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.303 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04884(String), 43488(Long), N(String), UNPRINT(String)
10:19:35.307 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.310 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.311 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04884(String), 43489(Long), N(String), UNPRINT(String)
10:19:35.315 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.345 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:35.346 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:19:35.350 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.351 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04887(String), 43528(Long), N(String), UNPRINT(String)
10:19:35.399 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.405 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.407 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04887(String), 43529(Long), N(String), UNPRINT(String)
10:19:35.407 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.408 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.410 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.414 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.438 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:35.440 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.441 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:19:35.442 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:35.445 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:19:35.468 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.487 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.488 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43542(Long), N(String), UNPRINT(String)
10:19:35.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.497 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.498 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43553(Long), N(String), UNPRINT(String)
10:19:35.501 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.508 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.508 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43573(Long), N(String), UNPRINT(String)
10:19:35.512 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.516 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.517 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43536(Long), N(String), UNPRINT(String)
10:19:35.521 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.524 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.525 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43543(Long), N(String), UNPRINT(String)
10:19:35.531 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.570 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.571 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43554(Long), N(String), UNPRINT(String)
10:19:35.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43569(Long), N(String), UNPRINT(String)
10:19:35.582 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.586 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.587 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04888(String), 43537(Long), N(String), UNPRINT(String)
10:19:35.590 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.601 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.602 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.605 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.620 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:35.621 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:35.624 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.626 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.628 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), UNPRINT(String)
10:19:35.752 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.757 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.758 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), UNPRINT(String)
10:19:35.763 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.769 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.770 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), UNPRINT(String)
10:19:35.780 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.780 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.781 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.781 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.782 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), UNPRINT(String)
10:19:35.785 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.787 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.804 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.806 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), UNPRINT(String)
10:19:35.806 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.809 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.874 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.874 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.875 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), UNPRINT(String)
10:19:35.910 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.912 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.920 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.922 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.923 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.923 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), UNPRINT(String)
10:19:35.933 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.938 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.939 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.941 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), UNPRINT(String)
10:19:35.944 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.948 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.951 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.951 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), UNPRINT(String)
10:19:35.952 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.962 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:35.954 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.974 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.975 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), UNPRINT(String)
10:19:35.986 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:35.992 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:35.994 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:35.995 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:35.996 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), UNPRINT(String)
10:19:35.999 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:36.006 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.007 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.007 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), UNPRINT(String)
10:19:36.011 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.016 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.023 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.023 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:36.028 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:36.076 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), UNPRINT(String)
10:19:36.114 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.116 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.117 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), UNPRINT(String)
10:19:36.123 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.127 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.128 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), UNPRINT(String)
10:19:36.132 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.136 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.137 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), UNPRINT(String)
10:19:36.140 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.146 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.148 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), UNPRINT(String)
10:19:36.152 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), UNPRINT(String)
10:19:36.160 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), UNPRINT(String)
10:19:36.169 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), UNPRINT(String)
10:19:36.186 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.186 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.186 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:36.426 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.433 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.433 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), UNPRINT(String)
10:19:36.433 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:36.435 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:19:36.444 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.445 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.445 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), UNPRINT(String)
10:19:36.447 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:19:36.450 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.457 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.457 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), UNPRINT(String)
10:19:36.468 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.469 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.469 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:36.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), UNPRINT(String)
10:19:36.474 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:36.477 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.483 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.486 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), UNPRINT(String)
10:19:36.486 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.487 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:36.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.494 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.495 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), UNPRINT(String)
10:19:36.498 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:36.501 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.505 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:19:36.505 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), UNPRINT(String)
10:19:36.510 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:36.528 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:36.529 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:36.535 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:39.650 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:19:39.651 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String), N(String), 00(String)
10:19:39.727 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:41.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:19:41.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04891(String), 43611(Long), N(String)
10:19:41.472 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:41.480 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:19:41.480 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04891(String), 43612(Long), N(String)
10:19:41.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:41.494 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:19:41.501 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:19:41.503 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:19:41.505 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:41.504 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String), 2018-01-24 10:19:41.437(Timestamp), 2018-01-24 10:20:41.437(Timestamp)
10:19:41.520 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:19:41.544 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:41.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:19:41.550 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:41.882 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:41.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:41.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:43.022 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:19:43.023 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:43.031 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:46.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:46.769 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:19:46.774 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:46.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:46.815 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:46.818 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:46.834 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:46.835 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:46.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:46.854 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:46.854 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:19:46.860 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:48.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:48.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:48.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:48.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:48.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:48.413 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:48.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:48.430 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:19:48.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:48.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:48.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:19:48.454 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:48.955 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:48.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:19:48.965 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:49.006 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:49.007 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:19:49.012 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:49.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:49.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:49.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:49.930 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:49.931 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:49.935 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:49.950 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:49.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:19:49.955 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:49.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:49.978 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:19:49.982 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:50.509 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:50.510 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:19:50.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:50.528 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:50.529 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:50.533 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:50.548 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:50.549 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:50.552 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:50.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:50.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:19:50.570 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:51.882 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:51.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:51.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:59.037 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:59.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:19:59.041 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:59.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:59.062 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:19:59.070 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:59.084 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:59.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:19:59.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:19:59.102 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:19:59.103 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:19:59.107 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:00.368 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:20:00.369 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String), N(String), 00(String)
10:20:00.372 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:01.343 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:01.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04887(String), 43528(Long), N(String)
10:20:01.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:01.351 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:01.352 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04887(String), 43529(Long), N(String)
10:20:01.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:01.363 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:20:01.365 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:20:01.365 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String), 2018-01-24 10:20:01.34(Timestamp), 2018-01-24 10:22:01.34(Timestamp)
10:20:01.366 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:20:01.368 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:01.371 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:01.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:01.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:01.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:01.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:01.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:01.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:11.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:11.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:11.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:13.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:13.226 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:13.229 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:13.244 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:13.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:13.248 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:14.051 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.062 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:14.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.523 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.524 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:20:14.530 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.539 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.540 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:14.543 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.555 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:14.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:14.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:14.574 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:14.577 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.015 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:15.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.028 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:15.035 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.377 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:20:15.380 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.394 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.394 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:15.397 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.409 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:15.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:15.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:15.430 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:15.436 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:16.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:16.120 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:16.123 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:16.133 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:16.134 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:16.137 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:16.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:16.952 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:16.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:16.966 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:16.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:16.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:17.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:17.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:20:17.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:17.340 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:17.341 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:17.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:17.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:17.356 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:17.360 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:17.374 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:17.374 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:17.378 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:18.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:18.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:18.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:18.031 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:18.032 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:18.036 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:18.738 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:18.738 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:18.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:18.753 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:18.754 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:18.757 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.114 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.115 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:20:19.120 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.131 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.133 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:19.137 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.148 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.148 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:19.152 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.161 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.162 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:19.166 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.851 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:19.855 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:19.868 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:19.868 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:19.872 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:20.631 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:20.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:20.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:20.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:20.644 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:20.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:21.157 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:21.157 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String)
10:20:21.162 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:21.170 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:21.171 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:21.174 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:21.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:21.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:21.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:21.194 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:21.195 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:21.198 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:21.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:21.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:21.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:24.260 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:20:24.260 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04888(String), N(String), 00(String)
10:20:24.263 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:25.575 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.576 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43542(Long), N(String)
10:20:25.582 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.594 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.595 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43542(String), 04888(String), A16(String), N(String), 1309                     (String)
10:20:25.614 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.615 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43553(Long), N(String)
10:20:25.622 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.627 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.628 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43553(String), 04888(String), A16(String), N(String), 1309                     (String)
10:20:25.633 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43573(Long), N(String)
10:20:25.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.645 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.645 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43573(String), 04888(String), A16(String), N(String), 1309                     (String)
10:20:25.648 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.653 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.655 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43536(String), 04888(String), A16(String), N(String), 1309                     (String)
10:20:25.662 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.664 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:25.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43536(Long), N(String), PREPRINT(String)
10:20:25.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.675 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.677 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43543(Long), N(String)
10:20:25.681 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.689 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.690 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43543(String), 04888(String), A16(String), N(String), 1310                     (String)
10:20:25.692 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43554(Long), N(String)
10:20:25.698 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.703 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.704 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43554(String), 04888(String), A16(String), N(String), 1310                     (String)
10:20:25.706 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:25.708 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43569(Long), N(String)
10:20:25.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.716 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.717 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43569(String), 04888(String), A16(String), N(String), 1310                     (String)
10:20:25.720 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.723 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:25.724 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:25(String), 9999999(String), KVSP(String), 43537(String), 04888(String), A16(String), N(String), 1310                     (String)
10:20:25.727 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.727 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:25.728 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04888(String), 43537(Long), N(String), PREPRINT(String)
10:20:25.730 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:25.741 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:20:25.742 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:20:25.748 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:25.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:25.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====> Parameters: 04896(String)
10:20:25.752 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <====      Total: 1
10:20:31.077 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:31.081 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.090 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:31.095 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.102 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.103 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:31.106 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:31.123 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.543 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.543 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:31.546 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.555 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:31.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:31.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.580 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:31.581 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:31.584 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:31.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:31.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:31.896 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:32.035 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:32.036 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:32.041 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:32.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:32.051 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:32.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:34.493 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:20:34.493 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:34.496 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
10:20:35.805 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:35.805 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:20:35.810 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:37.784 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:20:37.784 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String), N(String), 00(String)
10:20:37.787 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:37.791 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:37.791 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04887(String), 43528(Long), N(String)
10:20:37.794 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:37.800 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:37.800 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:37(String), 9999999(String), KVSP(String), 43528(String), 04887(String), A15(String), N(String), 1309                     (String)
10:20:37.803 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:37.803 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:20:37.804 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04887(String), 43529(Long), N(String)
10:20:37.806 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:37.811 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:37.812 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:37(String), 9999999(String), KVSP(String), 43529(String), 04887(String), A15(String), N(String), 1310                     (String)
10:20:37.815 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:37.815 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:20:37.816 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04887(String)
10:20:37.821 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:37.830 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:20:37.831 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:20:37.835 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:38.510 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:38.510 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:38(String), 9999999(String), KVSP(String), 43528(String), 04887(String), A15(String), N(String), 1309                     (String)
10:20:38.514 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:38.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:38.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04887(String), 43528(Long), N(String), PRINTED(String)
10:20:38.520 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:38.526 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:20:38.527 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:20:38(String), 9999999(String), KVSP(String), 43529(String), 04887(String), A15(String), N(String), 1310                     (String)
10:20:38.531 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:38.532 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:38.533 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04887(String), 43529(Long), N(String), PRINTED(String)
10:20:38.537 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:41.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:41.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:41.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
10:20:41.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:41.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), HANG(String)
10:20:41.916 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:41.928 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:20:41.929 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), HANG(String)
10:20:41.935 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:41.948 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:20:41.948 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:20:41.952 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:20:41.958 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:20:41.958 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:20:41.961 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:42.772 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:42.773 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:42.776 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:42.786 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:42.787 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:42.790 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:43.456 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.467 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:43.473 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.489 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.489 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:43.492 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.502 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.503 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:43.507 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.973 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.973 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:43.976 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:43.991 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:43.992 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:43.999 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:44.006 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:44.007 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:44.010 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:44.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:44.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:44.021 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.575 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.575 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:49.579 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.599 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:49.602 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.614 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:49.617 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.628 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:49.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.945 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.947 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:49.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:49.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:49.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:49.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.298 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.299 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:50.303 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.315 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:50.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.329 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:50.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.346 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:50.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.885 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.885 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:50.888 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:50.901 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.909 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:50.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:50.922 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:50.923 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:50.927 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.247 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.247 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:51.251 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:51.265 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.273 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.273 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:51.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.285 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:51.289 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.696 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.696 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:51.700 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.708 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:51.709 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:51.712 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:51.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:51.884 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:51.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:52.893 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:20:52.894 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:52.897 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:55.628 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:55.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:55.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:55.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:55.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:55.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:55.651 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:55.652 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:55.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:55.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:55.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:55.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:57.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:57.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:57.562 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:57.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:57.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:57.575 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:57.584 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:57.584 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:57.590 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:57.601 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:57.602 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:57.606 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.274 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.274 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:59.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:59.289 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.297 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.297 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:20:59.302 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.310 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:20:59.312 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.717 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.717 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String)
10:20:59.721 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.732 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.732 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
10:20:59.735 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.744 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.744 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
10:20:59.752 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:20:59.761 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:20:59.762 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:20:59.772 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:21:01.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:01.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:01.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:05.991 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:21:05.991 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04884(String), N(String), 00(String)
10:21:05.994 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:06.701 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:21:06.702 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:21:06(String), 9999999(String), KVSP(String), 43511(String), 04884(String), A10(String), N(String), 0013                     (String)
10:21:06.706 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:21:06.708 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04884(String), 43511(Long), N(String), PREPRINT(String)
10:21:06.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.718 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:21:06.719 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:21:06(String), 9999999(String), KVSP(String), 43488(String), 04884(String), A10(String), N(String), 1309                     (String)
10:21:06.723 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.724 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:21:06.726 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04884(String), 43488(Long), N(String), PREPRINT(String)
10:21:06.731 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.736 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:21:06.738 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:21:06(String), 9999999(String), KVSP(String), 43489(String), 04884(String), A10(String), N(String), 1310                     (String)
10:21:06.742 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.743 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:21:06.744 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04884(String), 43489(Long), N(String), PREPRINT(String)
10:21:06.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:21:06.756 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:21:06.757 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:21:06.761 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:21:06.765 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:21:06.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:21:06.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:21:11.885 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:11.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:11.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:21.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:21.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:21.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:22.255 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:21:22.255 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), N(String), 00(String)
10:21:22.262 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:31.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:31.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:31.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:41.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:41.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:41.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:51.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:51.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:51.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:01.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:01.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:01.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:11.885 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:11.885 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:11.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:21.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:21.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:21.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:31.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:31.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:31.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:41.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:41.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:41.969 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:51.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:51.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:51.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:01.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:01.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:01.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:11.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:11.912 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:11.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:21.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:21.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:21.933 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:31.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:31.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:31.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:41.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:41.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:41.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:51.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:51.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:51.933 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:01.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:01.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:01.931 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:11.923 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:11.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:11.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:21.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:21.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:21.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:31.923 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:31.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:31.937 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:41.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:41.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:41.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:51.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:51.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:51.939 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:01.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:01.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:01.940 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:11.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:11.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:11.945 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:21.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:21.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:21.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:31.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:31.930 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:31.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:41.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:41.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:41.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:51.930 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:51.930 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:51.944 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:01.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:01.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:01.941 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:11.930 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:11.931 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:11.946 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:21.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:21.930 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:21.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:31.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:31.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:31.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:41.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:41.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:42.021 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:51.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:51.964 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:51.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:01.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:01.966 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:01.978 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:12.270 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:12.270 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:12.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:22.270 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:22.271 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:22.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:32.271 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:32.271 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:32.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:42.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:42.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:42.329 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:52.324 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:52.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:52.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:02.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:02.328 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:02.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:12.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:12.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:12.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:22.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:22.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:22.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:32.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:32.334 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:32.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:42.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:42.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:42.413 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:52.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:52.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:52.420 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:02.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:02.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:02.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:12.326 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:12.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:12.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:22.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:22.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:22.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:32.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:32.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:32.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:42.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:42.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:42.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:52.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:52.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:52.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:02.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:02.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:02.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:12.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:12.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:12.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:22.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:22.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:22.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:32.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:32.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:32.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:42.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:42.433 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:42.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:52.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:52.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:52.444 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:02.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:02.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:02.446 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:12.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:12.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:12.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:22.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:22.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:22.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:32.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:32.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:32.447 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:42.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:42.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:42.453 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:52.438 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:52.438 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:52.451 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:02.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:02.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:02.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:12.483 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:12.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:12.508 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:22.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:22.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:22.461 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:32.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:32.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:32.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:42.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:42.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:42.463 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:52.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:52.450 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:52.462 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:02.515 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:02.515 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:02.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:12.514 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:12.515 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:12.529 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:22.517 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:22.517 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:22.530 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:32.523 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:32.524 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:32.536 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:42.526 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:42.527 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:42.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:52.524 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:52.525 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:52.537 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:02.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:02.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:02.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:12.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:12.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:12.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:22.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:22.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:22.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:32.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:32.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:32.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:42.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:42.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:42.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:52.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:52.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:52.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:02.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:02.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:02.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:12.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:12.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:12.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:22.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:22.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:22.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:32.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:32.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:32.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:42.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:42.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:42.748 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:52.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:52.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:52.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:02.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:02.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:02.618 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:12.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:12.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:12.621 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:22.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:22.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:22.620 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:32.686 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:32.688 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:32.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:42.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:42.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:42.808 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:52.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:52.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:52.789 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:02.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:02.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:02.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:12.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:12.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:12.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:22.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:22.855 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:22.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:32.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:32.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:32.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:42.864 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:42.865 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:42.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:52.864 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:52.864 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:52.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:02.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:02.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:02.878 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:12.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:12.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:12.880 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:22.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:22.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:22.879 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:32.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:32.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:32.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:42.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:42.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:42.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:52.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:52.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:52.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:02.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:02.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:02.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:12.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:12.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:12.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:22.889 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:22.890 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:22.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:32.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:32.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:32.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:42.891 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:42.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:42.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:52.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:52.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:52.938 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:02.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:02.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:02.937 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:12.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:12.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:12.942 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:23.110 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:23.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:23.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:33.109 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:33.110 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:33.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:43.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:43.112 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:43.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:40:53.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:40:53.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:40:53.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:03.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:03.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:03.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:13.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:13.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:13.198 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:23.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:23.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:23.173 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:33.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:33.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:33.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:43.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:43.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:43.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:41:53.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:41:53.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:41:53.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:03.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:03.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:03.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:13.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:13.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:13.172 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:23.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:23.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:23.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:33.159 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:33.160 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:33.172 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:43.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:43.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:43.199 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:53.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:53.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:53.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:43:03.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:43:03.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:43:03.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:43:13.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:43:13.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:43:13.270 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:43:59.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:43:59.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:00.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 29
10:44:00.483 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:00.484 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:00.550 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:00.567 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:00.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
10:44:00.583 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:00.596 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:00.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
10:44:00.607 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:00.648 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:00.653 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:00.665 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.051 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:44:01.062 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:44:01.077 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.085 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), PREPRINT(String)
10:44:01.091 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.096 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), PREPRINT(String)
10:44:01.104 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.133 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:44:01.133 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:44:01.137 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.139 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.140 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
10:44:01.144 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.149 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.225 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.249 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
10:44:01.249 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.254 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.260 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.280 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:44:01.281 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:44:01.287 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.288 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.289 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
10:44:01.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.299 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.300 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
10:44:01.389 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.391 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.395 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.401 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.416 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.417 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.429 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.449 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:44:01.450 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:44:01.454 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.456 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.457 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
10:44:01.460 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.465 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.466 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
10:44:01.470 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.481 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.503 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
10:44:01.543 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.545 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.547 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.548 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.549 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
10:44:01.554 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.666 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.676 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
10:44:01.689 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.689 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.690 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.694 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.697 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.699 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
10:44:01.708 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.713 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.714 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
10:44:01.720 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.877 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
10:44:01.888 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.896 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
10:44:01.900 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.907 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
10:44:01.910 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.914 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
10:44:01.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.924 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.928 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.930 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:01.928 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
10:44:01.934 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:01.942 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.987 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:01.988 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
10:44:01.998 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:01.999 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:01.999 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.000 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
10:44:01.999 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:02.004 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.009 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.010 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
10:44:02.011 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:02.014 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.019 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:02.019 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.019 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:02.019 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
10:44:02.027 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:02.036 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.041 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.044 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:02.045 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:02.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
10:44:02.052 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.053 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.053 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
10:44:02.058 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.065 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.068 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:02.071 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:44:02.071 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
10:44:02.075 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:02.077 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:44:02.077 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:44:02.078 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.079 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
10:44:02.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
10:44:02.088 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:44:02.089 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
10:44:02.095 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
10:44:02.109 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:44:02.110 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:44:02.117 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:44:03.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:03.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:03.472 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:11.088 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:44:11.089 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:44:11.096 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:13.368 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:13.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:13.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:23.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:23.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:23.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:33.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:33.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:33.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:38.589 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:44:38.590 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:44:38.594 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:43.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:43.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:43.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:44:53.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:44:53.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:44:53.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:03.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:03.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:03.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:13.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:13.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:13.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:23.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:23.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:23.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:33.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:33.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:33.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:43.375 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:43.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:43.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:45:53.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:45:53.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:45:53.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:03.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:03.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:03.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:13.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:13.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:13.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:23.378 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:23.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:23.386 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:33.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:33.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:33.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:43.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:43.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:43.400 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:46:53.396 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:46:53.396 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:46:53.418 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:03.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:03.389 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:03.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:13.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:13.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:13.403 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:23.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:23.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:23.400 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:33.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:33.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:33.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:35.411 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:47:35.412 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:47:35.416 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:43.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:43.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:43.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:53.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:47:53.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:47:53.417 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:47:54.343 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:47:54.344 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:47:54.347 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:48:03.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:48:03.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:48:03.826 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:48:15.062 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:48:15.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:48:16.869 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:48:23.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:48:23.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:48:23.722 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:48:33.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:48:33.804 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:48:33.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:01.811 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:01.954 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:02.481 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 29
10:49:02.532 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:02.533 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:02.590 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:02.606 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:02.608 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
10:49:02.630 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:02.634 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:02.635 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
10:49:02.640 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:02.652 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:02.663 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:02.670 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.179 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:49:03.180 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:49:03.188 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), PREPRINT(String)
10:49:03.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.217 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), PREPRINT(String)
10:49:03.240 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.316 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:49:03.317 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:49:03.323 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.329 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.334 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:03.334 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
10:49:03.335 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:03.338 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.341 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.346 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.512 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
10:49:03.518 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.637 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:49:03.638 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:49:03.643 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.645 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.646 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
10:49:03.649 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.654 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:03.654 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
10:49:03.659 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:03.672 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:03.674 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:03.678 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:03.689 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:49:03.691 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:03.689 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ======>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:49:03.693 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ======> Parameters: 04896(String)
10:49:03.694 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:49:04.307 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <======      Total: 1
10:49:04.309 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.310 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
10:49:04.313 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.318 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.319 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
10:49:04.324 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.330 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.332 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
10:49:04.341 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.342 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.342 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.348 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.355 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
10:49:04.356 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.360 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.538 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.540 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.540 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
10:49:04.540 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.551 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.553 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.554 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
10:49:04.554 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.558 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.563 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
10:49:04.572 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.580 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
10:49:04.587 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.642 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.643 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
10:49:04.647 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.652 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.653 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
10:49:04.658 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.662 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.663 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
10:49:04.667 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.676 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
10:49:04.677 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.678 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.682 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.684 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.695 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.695 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
10:49:04.696 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.704 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:49:04.713 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:49:04.723 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.732 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.733 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
10:49:04.743 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.749 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.753 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.753 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
10:49:04.753 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.759 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.763 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.764 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
10:49:04.766 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.770 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.779 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.816 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.816 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.817 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
10:49:04.823 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.824 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.829 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.832 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
10:49:04.836 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.842 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.845 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
10:49:04.845 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.845 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.850 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.851 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.851 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
10:49:04.852 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:04.912 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.916 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:49:04.917 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
10:49:04.922 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:49:04.930 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:49:04.931 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:49:04.936 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:49:09.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:09.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:09.324 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:10.752 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:49:10.753 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:49:10.759 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:19.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:19.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:19.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:23.484 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:49:23.484 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:49:23.488 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:29.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:29.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:29.266 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:39.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:39.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:39.264 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:49.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:49.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:49.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:49:59.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:49:59.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:49:59.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:09.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:09.275 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:09.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:19.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:19.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:19.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:29.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:29.275 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:29.282 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:39.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:39.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:39.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:49.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:49.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:49.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:50:59.278 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:50:59.278 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:50:59.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:09.279 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:09.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:09.289 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:19.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:19.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:19.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:29.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:29.273 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:29.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:39.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:39.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:39.285 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:49.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:49.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:49.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:51:59.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:51:59.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:51:59.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:52:09.277 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:52:09.278 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:52:09.289 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:52:19.279 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:52:19.279 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:52:19.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:52:29.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:52:29.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:52:29.285 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:52:39.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:52:39.277 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:52:39.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:52:49.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:52:49.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:52:49.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:31.351 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:31.439 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:32.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 29
10:53:32.164 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:32.165 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:32.243 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:32.261 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:32.263 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
10:53:32.276 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:32.285 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:32.286 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
10:53:32.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:32.315 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:32.322 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:32.330 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.315 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:53:33.320 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:53:33.329 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.334 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.335 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), PREPRINT(String)
10:53:33.339 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.345 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.347 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), PREPRINT(String)
10:53:33.350 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.392 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:53:33.393 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:53:33.401 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:33.402 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:53:33.401 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.405 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.406 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
10:53:33.406 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:53:33.411 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.418 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.420 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
10:53:33.427 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.450 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:33.450 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:33.458 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.458 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:53:33.459 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====> Parameters: 04894(String)
10:53:33.464 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <====      Total: 1
10:53:33.466 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.467 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
10:53:33.472 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.480 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
10:53:33.485 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.500 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:33.500 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:33.504 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.642 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:53:33.644 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:53:33.649 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.651 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.652 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
10:53:33.655 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.661 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.662 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
10:53:33.667 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.673 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.676 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:33.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
10:53:33.677 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:33.681 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.682 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.683 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
10:53:33.687 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.692 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.704 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:33.704 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:33.710 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:33.744 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.745 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
10:53:33.784 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.792 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.792 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
10:53:33.799 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.802 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.803 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
10:53:33.807 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.811 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.815 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
10:53:33.825 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.830 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.831 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
10:53:33.836 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.841 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.975 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
10:53:33.979 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.983 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.984 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
10:53:33.987 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:33.995 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:33.996 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
10:53:34.006 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.005 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.007 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.007 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:34.007 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
10:53:34.014 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.014 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:34.019 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
10:53:34.020 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.021 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.021 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
10:53:34.032 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
10:53:34.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.059 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.062 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.063 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:34.064 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
10:53:34.070 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:34.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.112 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.112 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
10:53:34.116 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.121 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.125 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.125 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
10:53:34.125 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:34.129 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.131 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
10:53:34.146 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.147 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:34.153 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
10:53:34.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.174 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.174 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:34.175 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
10:53:34.187 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:34.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.230 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:53:34.231 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
10:53:34.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:53:34.247 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:53:34.248 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:53:34.252 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:53:36.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:36.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:36.352 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:53:36.353 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:53:36.380 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:36.496 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:46.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:46.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:46.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:56.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:56.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:56.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:06.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:06.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:06.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:16.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:16.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:16.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:26.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:26.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:26.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:36.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:36.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:36.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:46.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:46.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:46.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:56.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:56.351 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:56.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:06.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:06.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:06.368 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:16.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:16.377 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:16.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:26.363 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:26.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:26.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:37.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:37.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:37.388 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:47.555 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:47.556 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:47.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:57.670 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:57.670 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:57.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:07.685 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:07.686 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:07.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:17.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:17.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:17.764 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:27.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:27.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:27.761 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:37.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:37.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:37.762 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:47.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:47.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:47.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:57.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:57.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:57.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:07.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:07.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:07.764 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:17.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:17.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:17.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:27.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:27.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:27.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:37.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:37.775 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:37.788 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:47.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:47.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:47.763 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:57.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:57.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:57.762 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:07.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:07.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:07.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:17.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:17.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:17.774 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:27.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:27.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:27.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:37.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:37.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:37.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:13.943 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:14.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:14.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 29
10:59:14.772 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:14.774 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:14.829 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:14.845 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:14.846 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
10:59:14.866 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:14.870 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:14.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
10:59:14.874 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:14.892 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:14.898 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:14.905 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.568 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:15.570 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:15.579 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.585 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43611(Long), N(String), PREPRINT(String)
10:59:15.589 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.605 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.606 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04891(String), 43612(Long), N(String), PREPRINT(String)
10:59:15.614 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.635 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:15.636 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:15.640 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.642 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.642 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
10:59:15.646 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.651 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.652 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
10:59:15.669 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.669 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:15.669 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:15.674 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.707 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:15.708 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:15.714 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.732 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:15.732 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:15.736 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.738 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.739 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
10:59:15.742 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.747 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.748 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
10:59:15.753 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.764 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:15.765 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:15.769 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.809 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:15.810 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:15.924 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.926 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.929 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
10:59:15.933 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.941 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.942 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
10:59:15.947 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.953 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.955 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:15.956 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:15.955 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
10:59:15.965 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:15.970 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.971 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.972 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
10:59:15.976 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.982 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.984 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:15.985 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
10:59:15.985 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:15.991 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:15.993 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:15.994 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
10:59:15.999 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.005 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.012 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.012 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
10:59:16.016 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.022 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.023 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
10:59:16.029 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.034 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.035 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
10:59:16.038 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.044 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.044 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
10:59:16.048 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.053 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.054 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
10:59:16.058 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.089 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.090 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.090 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
10:59:16.091 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.102 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.104 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.111 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.112 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.115 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.116 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
10:59:16.116 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.207 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
10:59:16.210 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.214 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.218 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.218 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
10:59:16.219 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.244 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.245 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
10:59:16.247 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.520 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.525 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.528 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.528 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
10:59:16.528 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.534 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.536 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.536 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
10:59:16.541 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.541 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.548 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
10:59:16.548 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.549 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.556 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.557 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.558 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
10:59:16.560 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:16.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.568 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:59:16.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
10:59:16.573 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:16.584 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:16.585 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:16.588 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:18.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:18.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:18.715 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:18.738 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:18.740 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:18.749 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:18.769 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:18.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:18.773 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:18.793 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:18.794 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:18.798 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:19.380 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:19.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:19.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:19.403 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:19.404 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:19.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:19.423 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:19.424 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:19.428 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:19.447 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:19.447 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:19.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:19.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:19.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:19.848 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:20.578 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:59:20.579 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
10:59:20.585 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:29.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:29.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:29.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:33.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:33.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:33.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:33.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:33.351 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:33.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:33.377 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:33.378 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:33.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:33.400 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:33.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:33.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:34.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:34.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:34.332 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:34.346 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:34.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:34.352 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:34.370 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:34.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:34.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:34.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:34.391 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:34.395 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:37.921 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:59:37.922 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:37.929 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:39.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:39.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:39.778 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:39.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:39.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:39.784 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:39.804 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:39.805 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:39.810 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:39.824 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:39.825 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:39.830 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:39.844 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:39.845 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:39.849 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:40.467 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:40.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:40.471 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:40.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:40.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:40.486 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:40.501 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:40.501 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:40.505 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:40.518 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:40.518 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:40.522 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:40.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:40.994 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
10:59:40.998 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:41.011 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:41.012 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:41.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:41.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:41.030 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
10:59:41.033 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:41.045 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:41.046 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
10:59:41.049 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:47.096 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:59:47.097 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String), N(String), 00(String)
10:59:47.100 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:47.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:59:47.952 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04891(String), 43611(Long), N(String)
10:59:47.960 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:47.964 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:59:47.964 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04891(String), 43612(Long), N(String)
10:59:47.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:47.978 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:47.981 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:47.981 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:59:47.983 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String), 2018-01-24 10:59:47.948(Timestamp), 2018-01-24 11:00:47.948(Timestamp)
10:59:47.987 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:48.003 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:48.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:48.024 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
10:59:48.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:48.738 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:59:48.739 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:48.745 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:49.621 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:59:49.622 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:49.628 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:49.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:49.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:49.784 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:50.432 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:59:50.433 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String), N(String), 00(String)
10:59:50.436 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:50.439 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:59:50.439 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04891(String), 43611(Long), N(String)
10:59:50.465 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:50.474 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:59:50.475 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:59:50(String), 9999999(String), KVSP(String), 43611(String), 04891(String), A21(String), N(String), 1309                     (String)
10:59:50.500 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:50.501 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:59:50.501 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04891(String), 43612(Long), N(String)
10:59:50.506 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:50.512 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:59:50.512 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 10:59:50(String), 9999999(String), KVSP(String), 43612(String), 04891(String), A21(String), N(String), 1310                     (String)
10:59:50.515 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:50.516 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:59:50.517 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04891(String)
10:59:50.522 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:59:50.532 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:59:50.532 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:59:50.535 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:59:59.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:59.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:59.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:09.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:09.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:09.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:19.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:19.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:19.783 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:29.774 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:29.775 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:29.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:39.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:39.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:39.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:06.819 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:06.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:07.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 27
11:01:07.652 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:07.653 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:07.710 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:07.726 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:07.727 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
11:01:07.749 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:07.753 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:07.755 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
11:01:07.758 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:07.770 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:07.784 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:07.802 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:08.708 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:01:08.709 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:01:08.718 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:08.724 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:01:08.729 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:08.735 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.737 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:01:08.742 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:08.776 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:01:08.777 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:01:08.782 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:08.784 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.785 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:01:08.788 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:08.792 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.793 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:01:08.797 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:08.853 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:08.854 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:08.857 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:08.871 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:01:08.872 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:01:08.886 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:08.887 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:08.887 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:01:08.888 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.889 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:01:08.890 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:01:08.894 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:08.900 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:08.901 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:01:08.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.038 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.039 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.053 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.065 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:01:09.066 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:01:09.075 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.077 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.078 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:01:09.082 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.088 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.089 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:01:09.093 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.102 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.102 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:01:09.103 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.113 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.113 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:01:09.117 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.127 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.128 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:01:09.132 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.155 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:01:09.161 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.169 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:01:09.175 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.180 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:01:09.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.253 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.254 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:01:09.257 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.262 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.264 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.264 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:01:09.265 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.270 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.281 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.281 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.281 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:01:09.284 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:01:09.289 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:01:09.291 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.292 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:01:09.297 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.303 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.306 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.307 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.307 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:01:09.311 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.321 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.322 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.323 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:01:09.328 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.334 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.339 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.340 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:01:09.340 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.356 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.357 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.358 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:01:09.392 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.407 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.411 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.414 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.414 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.415 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:01:09.420 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:09.420 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.421 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.422 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:01:09.430 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.435 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:09.436 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:01:09.442 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:09.494 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:09.495 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:09.499 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:11.825 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:01:11.827 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:01:11.970 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:11.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:11.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:12.055 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:21.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:21.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:21.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:24.974 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:01:24.974 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:01:24.978 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:31.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:31.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:31.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:41.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:41.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:41.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:51.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:51.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:51.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:01.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:01.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:01.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:11.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:11.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:11.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:21.919 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:21.920 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:21.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:31.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:31.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:31.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:35.724 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:02:35.725 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:02:35.728 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:41.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:41.921 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:41.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:51.922 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:51.922 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:51.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:01.923 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:01.923 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:01.931 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:11.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:11.928 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:11.935 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:21.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:21.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:21.935 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:31.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:31.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:31.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:41.925 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:41.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:41.932 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:51.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:51.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:51.936 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:20.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:20.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:21.454 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 27
11:04:21.499 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:21.500 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:21.560 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:21.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:21.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
11:04:21.593 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:21.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:21.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
11:04:21.604 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:21.617 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:21.621 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:21.630 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.659 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:04:22.659 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:04:22.668 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.672 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.673 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:04:22.680 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.685 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.686 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:04:22.692 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.743 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:04:22.744 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:04:22.747 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.749 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.750 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:04:22.753 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.757 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.759 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:04:22.763 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.793 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:04:22.794 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:04:22.799 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.801 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.802 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:04:22.805 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.824 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:22.825 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:22.825 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.826 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:04:22.846 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.846 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:22.847 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.876 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:04:22.882 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:04:22.897 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:04:22.897 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:04:22.902 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:22.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.907 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:04:22.917 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:22.917 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:22.918 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:22.918 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:22.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:04:23.028 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:23.040 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.046 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:04:23.064 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.064 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.064 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:23.066 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.067 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:04:23.070 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:23.072 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.077 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.078 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:04:23.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.087 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.088 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:04:23.092 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.097 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:04:23.102 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.107 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.179 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:04:23.183 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:04:23.194 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.201 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.201 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:04:23.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.215 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:04:23.216 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:23.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.221 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:04:23.236 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.237 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:23.244 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:04:23.236 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.246 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:04:23.249 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:04:23.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.257 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.256 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.258 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:04:23.258 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:04:23.261 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:04:23.266 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
11:04:23.271 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:04:23.275 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.280 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:04:23.302 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.303 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:23.303 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.305 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.389 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:04:23.307 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:23.393 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.394 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:04:23.318 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.397 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:04:23.398 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.402 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:04:23.402 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:04:23.408 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:04:23.425 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:04:23.437 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:04:23.438 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:04:23.442 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:04:25.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:25.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:25.522 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:32.881 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:04:32.883 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:04:32.888 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:35.447 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:35.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:35.455 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:44.900 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:04:44.901 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:04:44.905 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:45.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:45.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:45.456 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:55.450 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:55.451 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:55.459 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:00.447 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:05:00.447 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:05:00.450 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:05.448 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:05.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:05.463 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:42.459 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:42.548 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:43.184 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 27
11:08:43.223 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:43.224 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:43.300 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:43.315 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.317 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
11:08:43.340 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.353 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.354 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
11:08:43.363 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.380 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:43.382 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:43.390 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:43.833 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:08:43.835 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:08:43.844 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:43.852 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.853 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:08:43.860 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.869 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:08:43.882 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.906 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:08:43.907 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:08:43.911 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:43.913 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:08:43.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.923 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.924 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:08:43.927 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:43.956 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:08:43.981 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:08:43.985 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:43.987 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:43.988 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:08:43.992 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.001 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.002 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:08:44.008 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.033 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.039 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.052 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.188 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:08:44.190 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:08:44.195 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.205 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.205 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:08:44.216 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:08:44.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.221 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:08:44.226 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.231 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.232 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:08:44.236 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:08:44.267 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.268 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.271 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:08:44.274 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.276 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.295 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.296 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:08:44.300 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.441 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.443 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:08:44.448 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.453 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.454 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:08:44.457 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.462 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.463 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:08:44.468 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.473 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.474 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:08:44.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.486 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.488 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:08:44.488 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.489 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.496 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.497 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:08:44.499 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.502 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.508 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.513 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:08:44.512 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.514 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.517 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.524 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.529 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:08:44.529 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.530 [pool-3-thread-4] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.575 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:08:44.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.588 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:08:44.593 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:08:44.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
11:08:44.611 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.612 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:08:44.615 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.621 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.622 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:08:44.626 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.630 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.633 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.634 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.633 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:08:44.647 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.648 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:44.648 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.649 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:08:44.655 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.658 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:08:44.659 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:08:44.662 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:08:44.673 [pool-3-thread-5] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:08:44.674 [pool-3-thread-5] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:08:44.680 [pool-3-thread-5] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:08:48.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:48.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:48.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:58.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:58.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:58.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:00.444 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:09:00.447 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:09:00.453 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:08.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:08.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:08.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:18.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:18.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:18.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:28.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:28.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:28.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:38.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:38.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:38.299 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:48.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:48.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:48.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:58.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:58.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:58.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:08.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:08.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:08.299 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:18.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:18.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:18.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:28.296 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:28.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:28.335 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:38.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:38.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:38.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:48.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:48.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:48.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:58.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:58.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:58.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:14:36.577 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:14:36.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:14:37.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 27
11:14:37.258 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:14:37.259 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:14:37.333 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:14:37.349 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:37.353 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
11:14:37.366 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:37.379 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:37.380 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
11:14:37.387 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:37.416 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:37.424 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:37.434 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.047 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:14:38.051 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:14:38.059 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.064 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.069 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:14:38.079 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.088 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.090 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:14:38.094 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.117 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:14:38.118 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:14:38.123 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.124 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.125 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:14:38.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.134 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:14:38.139 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.165 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:14:38.166 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:14:38.170 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.172 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.173 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:14:38.176 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.180 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:14:38.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.192 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.193 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.196 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.231 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:14:38.232 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:14:38.237 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.240 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:14:38.266 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.267 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.270 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.277 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.280 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:14:38.315 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.315 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.315 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.320 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.320 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.321 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:14:38.341 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.341 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.342 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.343 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.344 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:14:38.347 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.376 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.380 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.380 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:14:38.384 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.390 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.390 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:14:38.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.401 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.403 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:14:38.406 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.412 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.416 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:14:38.421 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.424 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.425 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:14:38.586 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.607 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.610 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:14:38.610 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.611 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.616 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.619 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.631 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:14:38.632 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.647 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.648 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.648 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.652 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:14:38.652 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:14:38.655 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
11:14:38.668 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.669 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:14:38.679 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.680 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:14:38.680 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:14:38.683 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.688 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:14:38.693 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.694 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:14:38.701 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.706 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.707 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:14:38.711 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.716 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:14:38.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.754 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.755 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:14:38.822 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.823 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.830 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:38.904 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.907 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:14:38.911 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:14:38.916 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:14:38.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:14:38.930 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:14:38.931 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:14:38.937 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:14:42.782 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:14:42.783 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:14:42.789 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:14:43.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:14:43.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:14:43.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:14:53.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:14:53.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:14:53.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:14:55.200 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:14:55.200 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:14:55.203 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:03.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:03.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:03.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:13.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:13.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:13.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:23.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:23.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:23.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:33.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:33.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:33.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:43.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:43.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:43.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:15:53.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:15:53.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:15:53.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:03.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:03.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:03.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:13.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:13.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:13.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:23.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:23.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:23.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:33.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:33.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:33.821 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:43.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:43.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:43.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:16:53.801 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:16:53.802 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:16:53.809 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:03.801 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:03.802 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:03.809 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:13.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:13.804 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:13.816 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:23.802 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:23.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:23.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:33.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:33.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:33.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:43.802 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:43.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:43.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:17:53.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:17:53.803 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:17:53.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:03.820 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:03.820 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:03.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:13.818 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:13.818 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:13.828 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:23.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:23.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:23.821 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:33.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:33.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:33.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:43.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:43.832 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:43.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:18:53.845 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:18:53.846 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:18:53.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:19:03.844 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:19:03.844 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:19:03.852 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:19:13.855 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:19:13.856 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:19:13.866 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:19:23.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:19:23.855 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:19:23.864 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:19:33.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:19:33.892 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:19:33.901 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:19:43.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:19:43.888 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:19:43.897 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:23:56.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:23:56.689 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:23:56.781 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:23:56.781 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:23:57.064 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:23:57.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 27
11:23:57.382 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:23:57.383 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:23:57.455 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:23:57.465 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.466 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43632(Long), N(String), PREPRINT(String)
11:23:57.483 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.492 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.493 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04893(String), 43633(Long), N(String), PREPRINT(String)
11:23:57.501 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.513 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.517 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:23:57.519 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.520 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.523 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.524 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.527 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:23:57.532 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.533 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.545 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:23:57.552 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:23:57.568 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.570 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:23:57.586 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.603 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.603 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.604 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.606 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:23:57.608 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ====> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:23:57.622 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:23:57.627 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <====    Updates: 1
11:23:57.643 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.657 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.656 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:23:57.658 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.664 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.665 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.667 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:23:57.675 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.680 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.705 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.710 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.710 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:23:57.711 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.715 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.717 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:23:57.723 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.729 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.730 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:23:57.733 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.738 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.739 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:23:57.743 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.747 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.808 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:23:57.819 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.824 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.826 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:23:57.831 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.840 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.841 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:23:57.845 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.851 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.852 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:23:57.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.871 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.872 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.875 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.910 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.914 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:23:57.915 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.920 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.921 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:23:57.928 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.934 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.938 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.941 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.942 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:23:57.942 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.953 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.954 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.955 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:23:57.972 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:57.975 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.980 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.986 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:23:57.986 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:57.987 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:57.990 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:57.996 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:57.997 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:23:57.998 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:58.002 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:58.031 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:58.037 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:58.038 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:23:58.039 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:58.043 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:58.044 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:58.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:23:58.053 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:58.056 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:58.061 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:23:58.062 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:23:58.066 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:23:58.075 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:23:58.076 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:23:58.080 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:59.896 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:23:59.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:23:59.905 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:59.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:23:59.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:23:59.933 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:59.955 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:23:59.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:23:59.962 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:23:59.982 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:23:59.982 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:23:59.985 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:02.005 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:24:02.005 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:24:02.138 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:03.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:03.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:03.842 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:08.315 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:24:08.316 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:24:08.329 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:08.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:08.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04893(String), 43632(Long), N(String)
11:24:08.999 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:09.003 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:09.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04893(String), 43633(Long), N(String)
11:24:09.008 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:09.020 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:24:09.022 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:24:09.023 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:24:09.024 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), 2018-01-24 11:24:08.985(Timestamp), 2018-01-24 11:25:08.985(Timestamp)
11:24:09.026 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:09.045 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:09.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:09.069 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:24:09.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:10.103 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:24:10.104 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:10.112 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:11.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:11.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:24:11.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:11.883 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:24:11.884 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String), N(String), 00(String)
11:24:11.887 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:11.890 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:11.891 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04893(String), 43632(Long), N(String)
11:24:11.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:11.904 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:24:11.905 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:24:11(String), 9999999(String), KVSP(String), 43632(String), 04893(String), B2(String), N(String), 1309                     (String)
11:24:11.911 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:11.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:11.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04893(String), 43633(Long), N(String)
11:24:11.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:11.921 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:24:11.922 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:24:11(String), 9999999(String), KVSP(String), 43633(String), 04893(String), B2(String), N(String), 1310                     (String)
11:24:11.925 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:11.925 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:24:11.926 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04893(String)
11:24:11.932 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:11.940 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:24:11.941 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:24:11.946 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:13.843 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:15.603 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:15.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:24:15.607 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:15.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:15.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:24:15.975 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:15.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:15.994 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:24:15.997 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.010 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.011 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:24:16.014 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.026 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.027 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:24:16.030 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.324 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:24:16.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.365 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.366 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:24:16.369 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:24:16.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:16.403 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:16.404 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:24:16.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:17.220 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:24:17.221 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:17.224 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:19.963 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:19.963 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:24:19.966 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:19.976 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:19.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:24:19.981 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:19.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:19.991 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:24:19.994 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:20.008 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:20.009 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:24:20.012 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:20.448 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:20.448 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:24:20.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:23.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:23.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:23.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:27.075 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:24:27.075 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), N(String), 00(String)
11:24:27.079 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:27.788 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:27.789 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04890(String), 43601(Long), N(String)
11:24:27.793 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:27.796 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:24:27.797 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04890(String), 43597(Long), N(String)
11:24:27.800 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:27.805 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:24:27.808 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:24:27.809 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), 2018-01-24 11:24:27.786(Timestamp), 2018-01-24 11:25:27.786(Timestamp)
11:24:27.809 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:24:27.812 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:24:27.815 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:28.635 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:24:28.636 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:28.640 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:33.765 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:33.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:33.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:34.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:24:34.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:24:34.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:24:43.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:43.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:43.774 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:24:53.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:24:53.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:24:53.775 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:25:03.792 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:03.793 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:03.833 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:25:13.791 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:13.791 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:13.812 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:25:23.796 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:23.797 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:23.818 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:25:33.825 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:33.826 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:33.868 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
11:25:33.894 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:25:33.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), HANG(String)
11:25:33.928 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:25:33.966 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:25:33.966 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:25:33.996 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:25:34.025 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:25:34.025 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), HANG(String)
11:25:34.054 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:25:34.080 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:25:34.080 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:25:34.101 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:25:34.145 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:25:34.146 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:25:34.160 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:25:37.359 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:25:37.360 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:25:37.370 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:25:37.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:25:37.388 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:25:37.403 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:25:37.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:25:37.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:25:37.430 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:25:37.446 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:25:37.447 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:25:37.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:25:43.806 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:43.806 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:43.835 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:25:53.800 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:25:53.801 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:25:53.809 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:03.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:03.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:03.794 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:13.840 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:13.841 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:13.848 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:23.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:23.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:23.789 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:33.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:33.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:33.790 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:43.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:43.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:43.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:26:53.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:26:53.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:26:53.774 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:03.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:03.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:03.792 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:13.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:13.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:13.789 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:23.797 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:23.797 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:23.820 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:33.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:33.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:33.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:43.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:43.766 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:43.774 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:27:53.775 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:27:53.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:27:53.787 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:03.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:03.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:03.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:13.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:23.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:23.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:23.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:33.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:33.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:33.783 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:43.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:43.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:43.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:28:53.790 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:28:53.790 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:28:53.798 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:03.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:03.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:03.781 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:13.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:13.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:13.780 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:23.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:23.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:23.780 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:33.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:33.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:33.780 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:43.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:43.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:43.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:29:53.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:29:53.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:29:53.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:03.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:03.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:03.780 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:13.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:13.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:23.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:23.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:23.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:33.806 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:33.807 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:33.838 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:43.805 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:43.805 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:43.812 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:30:53.807 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:30:53.808 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:30:53.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:31:24.685 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:31:24.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:31:25.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 25
11:31:25.495 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:31:25.496 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:31:25.588 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:31:25.604 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:25.606 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43640(Long), N(String), PREPRINT(String)
11:31:25.646 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:25.659 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:25.660 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04894(String), 43639(Long), N(String), PREPRINT(String)
11:31:25.667 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:25.698 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:25.700 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:25.711 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.328 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:31:26.329 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:31:26.341 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.345 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.346 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:31:26.350 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.355 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.357 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:31:26.361 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.404 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:31:26.405 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:31:26.411 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.414 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.416 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.416 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:31:26.417 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:26.420 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.422 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.422 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:31:26.427 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.430 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.453 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:31:26.453 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:31:26.466 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.466 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:31:26.466 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.468 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:31:26.471 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:31:26.479 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.485 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.486 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:31:26.490 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.508 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.509 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:26.513 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.536 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:31:26.536 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:31:26.561 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.563 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:31:26.568 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:31:26.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.585 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:31:26.589 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.597 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.599 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:31:26.605 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.719 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:31:26.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.730 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.732 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:31:26.737 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.741 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.742 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:31:26.746 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.762 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.764 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.765 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:31:26.765 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:26.769 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.774 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.779 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.779 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:31:26.780 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.784 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:31:26.791 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:31:26.794 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.795 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.796 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:31:26.799 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.807 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.808 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.808 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:31:26.808 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:26.811 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.815 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.816 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:31:26.817 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.822 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.829 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.835 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.836 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:26.837 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:31:26.844 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:26.854 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.855 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.856 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:31:26.862 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:26.867 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:26.870 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:26.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:31:26.871 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:27.273 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:27.278 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:27.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:27.280 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:31:27.287 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:27.292 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:31:27.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:31:27.300 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:31:27.310 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:31:27.311 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:31:27.318 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:31:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:31:30.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:31:30.415 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:31:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:31:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:31:40.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:31:50.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:31:50.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:31:50.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:00.347 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:00.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:00.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:10.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:10.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:10.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:20.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:20.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:20.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:30.347 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:30.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:30.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:40.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:40.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:40.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:50.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:32:50.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:50.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:55.018 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:32:55.019 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:32:55.036 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:32:55.992 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:32:55.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04894(String), 43640(Long), N(String)
11:32:56.000 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:32:56.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:32:56.005 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04894(String), 43639(Long), N(String)
11:32:56.009 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:32:56.018 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:32:56.021 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:32:56.023 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:32:56.025 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), 2018-01-24 11:32:55.99(Timestamp), 2018-01-24 11:33:55.99(Timestamp)
11:32:56.026 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:32:56.039 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:32:56.062 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:32:56.064 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:32:56.067 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:32:58.391 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:32:58.392 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:32:58.399 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:32:59.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:32:59.415 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:32:59.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:00.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:00.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:00.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:00.888 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:33:00.888 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String), N(String), 00(String)
11:33:00.891 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:00.896 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:33:00.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04894(String), 43640(Long), N(String)
11:33:00.900 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:33:00.909 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:33:00.911 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:33:00(String), 9999999(String), KVSP(String), 43640(String), 04894(String), B3(String), N(String), 1309                     (String)
11:33:00.933 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:33:00.934 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:33:00.934 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04894(String), 43639(Long), N(String)
11:33:00.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:33:00.945 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:33:00.946 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:33:00(String), 9999999(String), KVSP(String), 43639(String), 04894(String), B3(String), N(String), 1310                     (String)
11:33:00.948 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:33:00.949 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:33:00.950 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04894(String)
11:33:00.954 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:33:00.965 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:33:00.966 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:33:00.969 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:04.648 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:33:04.649 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:04.653 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:07.311 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:33:07.311 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:07.316 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:09.226 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.227 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:33:09.235 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.256 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.256 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:33:09.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.279 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:33:09.282 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.294 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:33:09.299 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.722 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.723 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:33:09.728 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.745 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.746 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:33:09.750 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.763 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.763 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:33:09.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:09.780 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:09.781 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:33:09.785 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:10.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:10.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:10.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:10.581 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:10.582 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:33:10.586 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:11.451 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:11.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:33:11.455 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:11.464 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:11.465 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:33:11.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:11.478 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:11.479 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:33:11.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:11.493 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:11.493 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:33:11.497 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:12.466 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:33:12.466 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String), N(String), 00(String)
11:33:12.469 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:14.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:33:14.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:33:14.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:33:15.765 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:33:15.766 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:15.769 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:20.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:20.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:20.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:30.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:40.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:33:50.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:33:50.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:33:50.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:00.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:00.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:00.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:10.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:10.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:10.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:20.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:20.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:20.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:30.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:30.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:40.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:40.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:40.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:34:50.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:34:50.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:34:50.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:00.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:00.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:00.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:10.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:10.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:10.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:20.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:20.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:20.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:30.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:30.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:40.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:40.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:35:50.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:35:50.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:35:50.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:26.095 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:36:26.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:26.899 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 23
11:36:26.946 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:36:26.947 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:27.006 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:27.025 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:27.027 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43653(Long), N(String), PREPRINT(String)
11:36:27.047 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:27.051 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:27.052 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04896(String), 43654(Long), N(String), PREPRINT(String)
11:36:27.057 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:27.102 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:27.106 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:27.116 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.057 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:28.058 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:36:28.067 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.072 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.073 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43427(Long), N(String), PREPRINT(String)
11:36:28.078 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.086 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04879(String), 43426(Long), N(String), PREPRINT(String)
11:36:28.090 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.115 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:28.116 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:36:28.123 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.125 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.126 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43440(Long), N(String), PREPRINT(String)
11:36:28.129 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.133 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.136 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04880(String), 43442(Long), N(String), PREPRINT(String)
11:36:28.140 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.157 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:28.173 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:28.176 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.203 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:28.204 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:36:28.208 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.210 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:36:28.216 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:28.217 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:28.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:36:28.225 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.234 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:36:28.391 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.397 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.398 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:36:28.403 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.408 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.409 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:36:28.413 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.424 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.425 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:36:28.430 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.439 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.464 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:36:28.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.484 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:28.484 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:28.488 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.522 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:28.522 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:36:28.526 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.528 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.529 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:36:28.534 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.539 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.540 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:36:28.548 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:28.548 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.549 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:28.550 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:28.985 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:36:28.987 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:28.994 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:28.998 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.001 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:29.001 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:36:29.001 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:29.004 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.005 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.006 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:36:29.009 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:29.014 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.019 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.022 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:29.023 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:29.024 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:36:29.030 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:29.032 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.273 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.274 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:36:29.278 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.286 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.288 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:29.289 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:36:29.289 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:29.292 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.294 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.295 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:36:29.295 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:29.301 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.306 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:36:29.307 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:36:29.310 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:29.320 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:29.321 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:29.325 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:31.987 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:36:31.988 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:32.066 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:32.591 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:32.592 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:36:32.595 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:32.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:32.617 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:36:32.620 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:32.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:32.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:36:32.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:32.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:32.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:36:32.662 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:34.302 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:36:34.304 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String), N(String), 00(String)
11:36:34.309 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:35.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:36:35.128 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04896(String), 43653(Long), N(String)
11:36:35.137 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:35.142 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:36:35.144 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04896(String), 43654(Long), N(String)
11:36:35.147 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:35.158 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:35.157 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:36:35.158 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:35.159 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String), 2018-01-24 11:36:35.124(Timestamp), 2018-01-24 11:37:35.124(Timestamp)
11:36:35.162 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:35.181 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:35.205 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:35.206 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:36:35.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:36.177 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:36:36.178 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:36.185 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:37.514 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:37.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:36:37.520 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:38.376 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:36:38.377 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String), N(String), 00(String)
11:36:38.380 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:38.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:36:38.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04896(String), 43653(Long), N(String)
11:36:38.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:38.402 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:36:38.403 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:36:38(String), 9999999(String), KVSP(String), 43653(String), 04896(String), B6(String), N(String), 1309                     (String)
11:36:38.414 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:38.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:36:38.415 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04896(String), 43654(Long), N(String)
11:36:38.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:38.424 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:36:38.424 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:36:38(String), 9999999(String), KVSP(String), 43654(String), 04896(String), B6(String), N(String), 1310                     (String)
11:36:38.427 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:38.428 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:36:38.429 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04896(String)
11:36:38.433 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:36:38.447 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:36:38.447 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:36:38.453 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:41.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:36:41.993 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:42.005 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:42.631 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:36:42.631 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:42.636 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:51.506 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:51.506 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:36:51.509 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:51.525 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:51.526 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:36:51.529 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:51.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:51.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:36:51.548 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:51.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:51.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:36:51.574 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:52.003 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:36:52.004 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:52.012 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:52.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:52.048 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:36:52.055 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:52.712 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:36:52.713 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:52.716 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:36:54.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:54.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:36:54.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:54.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:54.439 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:36:54.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:54.463 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:54.464 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:36:54.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:54.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:36:54.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:36:54.494 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:36:55.316 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:36:55.316 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:36:55.319 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:01.990 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:01.991 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:02.000 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:11.973 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:11.974 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:37:11.978 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:11.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:11.993 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:12.001 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:12.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:12.296 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:37:12.299 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:12.311 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:12.312 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:37:12.315 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:12.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:12.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:37:12.332 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:12.346 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:12.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:37:12.352 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.121 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.122 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:37:13.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:37:13.143 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.158 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.159 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:37:13.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.179 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.179 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:37:13.183 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.621 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.622 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:37:13.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.638 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:37:13.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.654 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:37:13.660 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:13.670 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:13.671 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:37:13.674 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:14.011 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:37:14.012 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:37:14.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:37:15.195 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:37:15.196 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:15.200 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:21.990 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:21.991 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:21.998 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:31.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:31.993 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:32.002 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:41.991 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:41.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:41.999 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:37:51.993 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:37:51.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:37:52.001 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:01.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:01.992 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:02.003 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:11.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:11.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:12.002 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:21.996 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:21.996 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:22.004 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:22.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:22.909 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:38:22.914 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:22.924 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:22.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:38:22.928 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:22.938 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:22.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:38:22.942 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:22.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:22.955 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:38:22.959 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:24.719 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:38:24.719 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String), N(String), 00(String)
11:38:24.722 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:26.796 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:38:26.796 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:26.799 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:29.115 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:29.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:38:29.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:29.130 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:29.131 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:38:29.134 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:29.145 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:29.147 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:38:29.150 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:29.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:29.164 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:38:29.168 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:30.327 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:38:30.328 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String), N(String), 00(String)
11:38:30.331 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:31.189 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:38:31.190 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04879(String), 43427(Long), N(String)
11:38:31.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:31.196 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:38:31.197 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04879(String), 43426(Long), N(String)
11:38:31.200 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:31.208 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:38:31.211 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:38:31.211 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String), 2018-01-24 11:38:31.187(Timestamp), 2018-01-24 11:39:31.187(Timestamp)
11:38:31.212 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:38:31.216 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:31.219 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:31.231 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:31.232 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:38:31.236 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:31.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:31.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:32.006 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:32.082 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:38:32.082 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:32.085 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:33.244 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:38:33.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:38:33.248 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:34.756 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:38:34.757 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String), N(String), 00(String)
11:38:34.760 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:34.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:38:34.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04879(String), 43427(Long), N(String)
11:38:34.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:34.775 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:38:34.776 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:38:34(String), 9999999(String), KVSP(String), 43427(String), 04879(String), A5(String), N(String), 1309                     (String)
11:38:34.778 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:34.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:38:34.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04879(String), 43426(Long), N(String)
11:38:34.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:34.787 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:38:34.788 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:38:34(String), 9999999(String), KVSP(String), 43426(String), 04879(String), A5(String), N(String), 1310                     (String)
11:38:34.792 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:34.793 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:38:34.793 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04879(String)
11:38:34.796 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:38:34.802 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:38:34.802 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:38:34.805 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:38:41.997 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:41.997 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:42.004 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:38:51.999 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:38:51.999 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:38:52.006 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:01.998 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:01.998 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:02.007 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:12.001 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:12.002 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:12.010 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:22.001 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:22.001 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:22.011 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:27.813 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:27.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:39:27.817 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:27.830 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:27.831 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:39:27.837 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:27.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:27.851 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:39:27.854 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:27.864 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:27.865 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:39:27.870 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:29.764 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:39:29.765 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String), N(String), 00(String)
11:39:29.768 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:30.550 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:39:30.551 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04880(String), 43440(Long), N(String)
11:39:30.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:30.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:39:30.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04880(String), 43442(Long), N(String)
11:39:30.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:30.570 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:39:30.572 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:39:30.572 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:39:30.572 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String), 2018-01-24 11:39:30.546(Timestamp), 2018-01-24 11:40:30.546(Timestamp)
11:39:30.575 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:30.578 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:30.591 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:30.592 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:39:30.596 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:31.234 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:39:31.235 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:31.238 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:32.000 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:32.000 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:32.009 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:32.239 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:39:32.240 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:39:32.244 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:33.530 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:39:33.531 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String), N(String), 00(String)
11:39:33.535 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:39.451 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:39:39.454 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04880(String), 43440(Long), N(String)
11:39:39.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:39.861 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:39:39.864 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:39:38(String), 9999999(String), KVSP(String), 43440(String), 04880(String), A6(String), N(String), 1309                     (String)
11:39:39.869 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:40.568 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:39:40.576 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04880(String), 43442(Long), N(String)
11:39:40.586 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:41.026 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:39:41.030 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:39:38(String), 9999999(String), KVSP(String), 43442(String), 04880(String), A6(String), N(String), 1310                     (String)
11:39:41.035 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:41.823 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:39:41.826 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04880(String)
11:39:41.831 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:39:42.396 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:45.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:45.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:39:46.707 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:39:46.713 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:39:46.739 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:39:55.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:39:55.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:39:55.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:09.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:09.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:09.676 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:19.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:19.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:19.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:29.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:29.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:29.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:39.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:39.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:39.641 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:49.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:49.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:49.640 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:40:59.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:40:59.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:40:59.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:41:09.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:41:09.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:41:09.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:41:19.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:41:19.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:41:19.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:41:29.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:41:29.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:41:29.642 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:03.991 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:04.100 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:04.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 17
11:42:04.447 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:04.449 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:04.480 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:04.495 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.497 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), PREPRINT(String)
11:42:04.512 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.531 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.532 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:42:04.542 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.549 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.550 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), PREPRINT(String)
11:42:04.555 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.566 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.567 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), PREPRINT(String)
11:42:04.570 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.577 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), PREPRINT(String)
11:42:04.586 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.594 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.594 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:42:04.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.608 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:04.609 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), PREPRINT(String)
11:42:04.616 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:04.655 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:04.660 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:04.675 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.210 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:05.212 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:42:05.216 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:42:05.226 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.248 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:05.249 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:05.253 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.254 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.255 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43468(Long), N(String), PREPRINT(String)
11:42:05.261 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.265 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04882(String), 43469(Long), N(String), PREPRINT(String)
11:42:05.278 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:05.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.280 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:05.295 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.332 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:05.336 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:05.336 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:42:05.339 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:05.344 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.344 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:42:05.347 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.348 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:42:05.352 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.356 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.357 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:42:05.360 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.371 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:05.372 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:05.384 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.400 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:05.401 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:05.404 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.406 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.407 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:42:05.410 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.429 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.430 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:42:05.434 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.438 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.440 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:42:05.440 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:05.441 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:05.446 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.447 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.451 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:05.619 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:42:05.626 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.630 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:42:05.631 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:42:05.637 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:05.648 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:05.648 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:05.652 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:11.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:11.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:11.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:21.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:21.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:21.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:27.767 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:27.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:42:27.774 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:27.792 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:27.793 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:27.798 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:27.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:27.815 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:27.819 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:27.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:27.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:27.843 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:31.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:31.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:31.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:33.695 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:42:33.696 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), N(String), 00(String)
11:42:33.700 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:34.373 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:42:34.375 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43670(Long), N(String)
11:42:34.380 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:42:34.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43669(Long), N(String)
11:42:34.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:42:34.394 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43671(Long), N(String)
11:42:34.398 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:42:34.402 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43667(Long), N(String)
11:42:34.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.411 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:42:34.411 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43668(Long), N(String)
11:42:34.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.427 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:42:34.427 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:42:34.427 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:42:34.428 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), 2018-01-24 11:42:34.369(Timestamp), 2018-01-24 11:43:34.369(Timestamp)
11:42:34.431 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:34.434 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:42:34.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:34.461 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:42:34.471 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:35.215 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:42:35.215 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:35.219 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:36.204 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:36.205 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:42:36.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:39.223 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:42:39.224 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), N(String), 00(String)
11:42:39.227 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:41.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:41.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:41.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:42.159 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:42.160 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:42:42.164 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:42.713 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:42.714 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:42.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:42.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:42.743 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:42.752 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:42.771 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:42.772 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:42.776 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:42.792 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:42.792 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:42:42.800 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:43.356 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:42:43.357 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:43.361 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:44.962 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:44.963 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:42:44.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:47.210 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:47.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:47.214 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:47.227 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:47.228 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:47.231 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:47.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:47.246 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:47.249 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:47.262 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:47.263 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:42:47.266 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:47.546 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:47.547 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:42:47.552 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:48.650 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:42:48.651 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:48.654 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:50.749 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:50.750 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:50.754 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:50.765 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:50.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:50.769 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:50.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:50.783 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:50.787 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:50.798 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:50.799 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:42:50.802 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:51.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:42:51.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:42:51.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:42:54.701 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:54.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:42:54.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:54.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:54.720 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:42:54.723 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:54.736 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:54.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:42:54.741 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:42:54.754 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:42:54.755 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:42:54.759 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:01.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:01.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:01.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:03.953 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:03.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:03.959 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:05.001 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:05.002 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:05.005 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:07.512 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:07.513 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:07.516 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:11.080 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:11.080 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:11.084 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:11.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:11.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:11.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:13.090 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.091 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:13.095 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.106 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.107 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:13.112 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.125 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.125 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:13.129 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:13.143 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.651 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.652 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:13.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:13.671 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:13.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:13.696 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:13.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:13.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:14.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:14.057 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:14.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:14.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:14.076 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:14.080 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:14.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:14.093 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:14.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:14.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:14.110 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:14.114 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:14.660 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:14.661 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:14.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:15.800 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:15.801 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:15.804 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:19.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:19.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:19.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:19.400 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:19.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:19.404 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:19.415 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:19.416 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:19.419 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:19.427 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:19.428 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:19.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:20.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:20.315 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:20.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:20.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:20.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:20.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:20.340 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:20.341 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:20.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:20.354 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:20.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:20.358 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:21.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:21.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:21.347 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:21.658 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:21.659 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:21.663 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:30.321 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:30.322 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:30.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:31.340 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:31.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:31.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:31.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:31.372 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:31.375 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:31.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:31.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:31.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:31.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:31.402 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:31.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:31.417 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:31.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:31.423 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.532 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.532 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:32.535 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.544 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:32.548 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.556 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:32.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.576 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.577 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:32.581 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.940 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:32.943 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.953 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:32.957 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.966 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:32.969 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:32.979 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:32.979 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:32.985 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:33.579 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:33.579 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:33.583 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:34.944 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:43:34.944 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:34.947 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:37.898 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:37.899 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:37.902 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:38.529 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:38.530 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:38.533 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:38.541 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:38.541 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:38.544 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:38.553 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:38.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:38.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:38.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:38.565 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:38.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:39.201 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:39.202 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:39.205 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:39.214 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:39.215 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:39.219 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:39.230 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:39.230 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:39.233 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:39.241 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:39.242 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:39.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:41.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:41.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:41.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 5
11:43:41.364 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.365 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43670(Long), N(String), HANG(String)
11:43:41.368 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.372 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.373 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43673(Long), N(String), PREPRINT(String)
11:43:41.376 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.381 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.381 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43669(Long), N(String), HANG(String)
11:43:41.384 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.387 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.387 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43671(Long), N(String), HANG(String)
11:43:41.390 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.394 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.394 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43667(Long), N(String), HANG(String)
11:43:41.398 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.401 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.401 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43672(Long), N(String), PREPRINT(String)
11:43:41.404 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.407 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:41.408 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04899(String), 43668(Long), N(String), HANG(String)
11:43:41.411 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.415 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:43:41.415 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:43:41.418 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:41.426 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:43:41.426 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:43:41.432 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:44.777 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:44.778 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:44.781 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:44.789 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:44.789 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:44.792 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:44.802 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:44.802 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:44.805 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:44.816 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:44.817 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:44.820 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:45.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:45.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:45.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:46.048 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:46.063 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.086 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:46.094 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.101 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.102 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:46.105 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:46.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.947 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.947 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:46.950 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.962 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.963 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:46.966 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.975 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.975 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:46.980 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:46.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:46.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:46.996 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:47.296 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:47.297 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:47.300 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:47.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:47.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:47.312 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:47.321 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:47.322 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:47.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:47.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:47.335 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:47.339 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:51.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:43:51.338 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:43:51.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:53.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:53.916 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:43:53.919 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:54.491 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:54.492 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String)
11:43:54.496 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:54.507 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:54.508 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:43:54.511 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:54.521 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:54.521 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:43:54.525 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:54.540 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:54.540 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:43:54.546 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:56.812 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:43:56.813 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04881(String), N(String), 00(String)
11:43:56.817 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:43:57.475 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:43:57.476 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:43:57(String), 9999999(String), KVSP(String), 43459(String), 04881(String), A7(String), N(String), 1309                     (String)
11:43:57.479 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:57.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:43:57.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04881(String), 43459(Long), N(String), PREPRINT(String)
11:43:57.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:43:57.503 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:43:57.508 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:43:57.508 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:43:57.509 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
11:43:57.513 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:43:57.515 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
11:44:00.027 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:00.028 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:44:00.032 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:00.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:00.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:44:00.046 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:00.055 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:00.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:44:00.059 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:00.070 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:00.071 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:44:00.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:00.854 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:44:00.855 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String), N(String), 00(String)
11:44:00.860 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:01.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:01.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:01.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:01.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:01.630 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04882(String), 43468(Long), N(String)
11:44:01.637 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:01.641 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:01.642 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04882(String), 43469(Long), N(String)
11:44:01.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:01.656 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:44:01.660 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:44:01.661 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:44:01.661 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String), 2018-01-24 11:44:01.624(Timestamp), 2018-01-24 11:45:01.624(Timestamp)
11:44:01.668 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:01.671 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:02.409 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:44:02.410 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:02.413 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:03.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:03.324 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:44:03.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:04.019 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:44:04.019 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String), N(String), 00(String)
11:44:04.022 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:04.492 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:04.494 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:04(String), 9999999(String), KVSP(String), 43468(String), 04882(String), A8(String), N(String), 1309                     (String)
11:44:04.497 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:04.498 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:04.499 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04882(String), 43468(Long), N(String), HANG(String)
11:44:04.503 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:04.509 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:04.511 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:04(String), 9999999(String), KVSP(String), 43469(String), 04882(String), A8(String), N(String), 1310                     (String)
11:44:04.513 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:04.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:04.516 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04882(String), 43469(Long), N(String), HANG(String)
11:44:04.522 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.941 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:08.941 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04882(String), 43468(Long), N(String)
11:44:08.944 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.950 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:08.950 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:08(String), 9999999(String), KVSP(String), 43468(String), 04882(String), A8(String), N(String), 1309                     (String)
11:44:08.953 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:08.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04882(String), 43469(Long), N(String)
11:44:08.957 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.964 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:08.964 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:08(String), 9999999(String), KVSP(String), 43469(String), 04882(String), A8(String), N(String), 1310                     (String)
11:44:08.967 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.967 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:44:08.968 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04882(String)
11:44:08.971 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:08.981 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:44:08.981 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:44:08.985 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:10.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:10.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:44:10.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:10.985 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:10.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:44:10.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:10.997 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:10.997 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:44:11.000 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:11.340 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:11.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:11.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:13.386 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:44:13.387 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), N(String), 00(String)
11:44:13.389 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:14.172 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:14.173 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43670(Long), N(String)
11:44:14.177 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.180 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:14.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43669(Long), N(String)
11:44:14.184 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.187 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:14.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43671(Long), N(String)
11:44:14.192 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.195 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:14.196 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43667(Long), N(String)
11:44:14.200 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.204 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:14.205 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04899(String), 43668(Long), N(String)
11:44:14.208 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.213 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:44:14.219 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:44:14.220 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), 2018-01-24 11:44:14.168(Timestamp), 2018-01-24 11:46:14.168(Timestamp)
11:44:14.220 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:44:14.223 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:14.226 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:14.903 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:44:14.904 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:14.907 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:15.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:15.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:44:15.771 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:16.556 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:44:16.556 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String), N(String), 00(String)
11:44:16.559 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:17.299 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.299 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43670(String), 04899(String), B7(String), N(String), 0030                     (String)
11:44:17.302 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.303 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:17.303 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43670(Long), N(String), HANG(String)
11:44:17.307 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.317 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43673(Long), N(String)
11:44:17.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.335 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.335 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43673(String), 04899(String), B7(String), N(String), 0034                     (String)
11:44:17.338 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.345 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.345 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43669(String), 04899(String), B7(String), N(String), 0034                     (String)
11:44:17.351 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.351 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:17.352 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43669(Long), N(String), HANG(String)
11:44:17.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.360 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.360 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43671(String), 04899(String), B7(String), N(String), 0031                     (String)
11:44:17.363 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.363 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:17.364 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43671(Long), N(String), HANG(String)
11:44:17.367 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.373 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.374 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43667(String), 04899(String), B7(String), N(String), 0032                     (String)
11:44:17.376 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.378 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:17.378 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43667(Long), N(String), HANG(String)
11:44:17.382 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43672(Long), N(String)
11:44:17.388 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.395 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.395 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43672(String), 04899(String), B7(String), N(String), 0033                     (String)
11:44:17.398 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.401 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.402 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43668(String), 04899(String), B7(String), N(String), 0033                     (String)
11:44:17.404 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:44:17.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43668(Long), N(String), HANG(String)
11:44:17.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43670(Long), N(String)
11:44:17.417 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.426 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.426 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43670(String), 04899(String), B7(String), N(String), 0030                     (String)
11:44:17.432 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.432 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.433 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43669(Long), N(String)
11:44:17.437 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.447 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.448 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43669(String), 04899(String), B7(String), N(String), 0034                     (String)
11:44:17.451 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.451 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43671(Long), N(String)
11:44:17.456 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.462 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.463 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43671(String), 04899(String), B7(String), N(String), 0031                     (String)
11:44:17.466 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.467 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.467 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43667(Long), N(String)
11:44:17.470 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.477 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.478 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43667(String), 04899(String), B7(String), N(String), 0032                     (String)
11:44:17.481 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:44:17.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04899(String), 43668(Long), N(String)
11:44:17.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.490 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:44:17.490 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:44:17(String), 9999999(String), KVSP(String), 43668(String), 04899(String), B7(String), N(String), 0033                     (String)
11:44:17.494 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.495 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:44:17.495 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04899(String)
11:44:17.498 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:44:17.503 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:44:17.504 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:44:17.508 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:20.337 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:20.337 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:44:20.343 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:20.840 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:20.840 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:44:20.843 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:20.856 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:20.857 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:44:20.862 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:21.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:21.339 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:21.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:22.766 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:44:22.767 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:22.769 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:24.703 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:24.704 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:44:24.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:26.274 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:26.274 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:44:26.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:26.816 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:26.816 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:44:26.819 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:26.827 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:44:26.827 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:44:26.830 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:44:31.340 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:31.340 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:31.347 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:41.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:41.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:41.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:44:51.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:44:51.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:44:51.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:01.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:01.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:01.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:03.065 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:03.066 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String)
11:45:03.069 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:03.080 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:03.081 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:03.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:03.096 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:03.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:03.100 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:06.138 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:45:06.139 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04883(String), N(String), 00(String)
11:45:06.142 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:06.824 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:45:06.824 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:45:06(String), 9999999(String), KVSP(String), 43472(String), 04883(String), A9(String), N(String), 1309                     (String)
11:45:06.827 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:45:06.828 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:45:06.829 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04883(String), 43472(Long), N(String), PREPRINT(String)
11:45:06.836 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:45:06.841 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:45:06.842 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 11:45:06(String), 9999999(String), KVSP(String), 43474(String), 04883(String), A9(String), N(String), 1310                     (String)
11:45:06.844 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:45:06.845 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:45:06.845 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04883(String), 43474(Long), N(String), PREPRINT(String)
11:45:06.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:45:06.857 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:45:06.858 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:45:06.862 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:11.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:11.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:11.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:11.638 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:11.638 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:11.641 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:11.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:11.914 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:11.917 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:12.264 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:12.265 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:12.268 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:12.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:12.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:12.282 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:13.202 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:45:13.203 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), N(String), 00(String)
11:45:13.207 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:15.555 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:15.555 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:15.558 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:15.823 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:15.823 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:15.827 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:16.954 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:16.955 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:16.961 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:16.972 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:16.972 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:16.978 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:17.313 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:17.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:17.317 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:17.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:17.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:17.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:18.023 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:45:18.024 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:18.027 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:19.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:19.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:19.996 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:20.336 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:20.336 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:45:20.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:20.360 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:45:20.360 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:45:20.364 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:45:21.381 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:21.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:21.409 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:31.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:31.358 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:31.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:41.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:41.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:41.359 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:45:51.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:45:51.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:45:51.453 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:01.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:01.362 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:01.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:11.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:11.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:11.382 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:21.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:21.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:21.425 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:31.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:31.361 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:31.374 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:41.459 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:41.460 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:41.504 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:46:51.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:46:51.483 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:46:51.506 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:01.557 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:01.558 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:01.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:11.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:11.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:11.502 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:21.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:21.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:21.456 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:31.449 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:31.450 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:31.460 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:41.459 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:41.460 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:41.469 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:47:51.456 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:47:51.457 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:47:51.464 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:01.477 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:01.478 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:01.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:11.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:11.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:11.475 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:21.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:21.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:21.474 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:31.470 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:31.470 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:31.478 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:41.471 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:41.471 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:41.481 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:48:51.471 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:48:51.472 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:48:51.480 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:01.473 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:01.474 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:01.485 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:11.472 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:11.473 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:11.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:21.575 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:21.575 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:21.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:31.558 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:31.559 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:31.566 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:41.560 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:41.560 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:41.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:49:51.562 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:49:51.562 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:49:51.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:01.561 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:01.561 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:01.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:11.561 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:11.561 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:11.571 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:21.563 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:21.564 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:21.571 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:31.564 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:31.564 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:31.571 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:41.563 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:41.563 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:41.572 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:50:51.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:50:51.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:50:51.572 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:51:01.563 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:51:01.564 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:51:01.572 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:51:11.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:51:11.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:51:11.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:51:21.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:51:21.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:51:21.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:51:31.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:51:31.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:51:31.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:51:41.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:51:41.669 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:51:41.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:17.533 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:17.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:17.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 5
11:52:17.795 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:17.796 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:17.804 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:17.823 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:52:17.824 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:52:17.828 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:17.841 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:52:17.842 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:52:17.845 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:17.862 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:52:17.865 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:52:17.871 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:18.278 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:18.279 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:18.284 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:18.288 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:52:18.289 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43601(Long), N(String), PREPRINT(String)
11:52:18.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:18.309 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:52:18.311 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43602(Long), N(String), PREPRINT(String)
11:52:18.318 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:18.322 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:52:18.323 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04890(String), 43597(Long), N(String), PREPRINT(String)
11:52:18.327 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:18.351 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:18.352 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:18.356 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:18.364 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:52:18.365 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:52:18.370 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:25.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:25.287 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:25.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:27.304 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:52:27.306 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:52:27.311 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:30.130 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:30.131 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:30.136 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:30.588 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:30.589 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:30.593 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:31.010 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:31.011 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:31.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:31.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:31.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:31.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:31.664 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:31.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:31.669 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:32.605 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:32.606 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:32.610 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:33.295 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:52:33.296 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:52:33.301 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:33.928 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:52:33.929 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04889(String), 43584(Long), N(String)
11:52:33.933 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:33.936 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:52:33.937 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04889(String), 43583(Long), N(String)
11:52:33.942 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:33.953 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:52:33.955 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:52:33.957 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:52:33.958 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), 2018-01-24 11:52:33.925(Timestamp), 2018-01-24 11:53:33.925(Timestamp)
11:52:33.961 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:33.963 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:52:34.766 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:52:34.767 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:34.771 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:35.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:35.287 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:35.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:35.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:35.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:52:35.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:37.785 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:52:37.785 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:52:37.788 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:40.095 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:52:40.096 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:52:40.100 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:41.825 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:41.825 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:41.829 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:42.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:42.897 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:42.901 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:43.458 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:43.458 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:43.463 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:45.287 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:52:45.295 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:45.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:45.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:45.303 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:45.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:52:47.599 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:47.600 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:47.603 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:49.137 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:49.138 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:49.143 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:49.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:49.703 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:49.706 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:50.340 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:52:50.340 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:50.343 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:52.316 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:52:52.316 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:52:52.320 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:52:55.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:52:55.287 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:52:55.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:53:01.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:53:01.318 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:53:01.322 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:53:05.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:05.282 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:05.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:53:15.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:15.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:15.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:53:25.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:25.285 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:25.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:53:35.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:35.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:35.321 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
11:53:35.327 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:53:35.328 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), HANG(String)
11:53:35.333 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:53:35.342 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:53:35.342 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), HANG(String)
11:53:35.345 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:53:35.357 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:53:35.357 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:53:35.360 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:53:35.374 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:53:35.375 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:53:35.378 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:53:45.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:45.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:45.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:53:55.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:53:55.283 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:53:55.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:05.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:05.325 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:05.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:15.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:15.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:15.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:25.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:25.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:25.326 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:35.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:35.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:35.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:45.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:45.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:45.317 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:54:55.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:54:55.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:54:55.321 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:00.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:00.224 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:00.234 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:01.334 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:55:01.335 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:55:01.338 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:04.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:04.164 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String)
11:55:04.168 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:05.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:55:05.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:05.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:06.543 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:55:06.544 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), N(String), 00(String)
11:55:06.547 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:09.014 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:55:09.015 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), N(String), 00(String)
11:55:09.019 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:10.222 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:55:10.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04890(String), 43601(Long), N(String)
11:55:10.227 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
11:55:10.232 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
11:55:10.233 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04890(String), 43597(Long), N(String)
11:55:10.236 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
11:55:10.242 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
11:55:10.243 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04890(String), 2018-01-24 11:55:10.219(Timestamp), 2018-01-24 11:56:10.219(Timestamp)
11:55:10.246 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:55:10.247 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:55:10.248 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:55:10.255 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:11.389 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:11.390 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:11.393 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:13.949 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:13.950 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:13.954 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:15.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:55:15.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:15.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:16.172 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:16.173 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:16.176 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:18.222 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:18.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:18.226 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:19.295 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:19.295 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:19.298 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:21.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:21.093 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:21.096 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:23.021 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:23.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:23.025 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:23.798 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:23.798 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:23.802 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:25.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:55:25.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:25.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:28.682 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
11:55:28.683 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:55:28.686 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:55:31.233 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:31.233 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:31.237 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:55:31.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:55:31.567 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:55:31.571 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:56:16.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:16.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:16.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
11:56:17.018 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:17.019 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:17.027 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:56:17.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:56:17.047 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
11:56:17.051 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:56:17.064 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:56:17.065 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
11:56:17.070 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:56:17.117 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:56:17.121 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:56:17.127 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:56:17.807 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:56:17.808 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
11:56:17.816 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:56:22.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:22.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:22.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:56:31.929 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:56:31.931 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
11:56:31.941 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:56:32.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:32.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:32.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:56:42.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:42.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:42.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:56:52.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:56:52.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:56:52.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:02.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:02.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:02.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:12.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:12.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:12.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:22.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:22.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:22.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:32.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:32.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:32.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:42.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:42.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:42.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:57:52.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:57:52.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:57:52.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:02.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:02.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:02.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:12.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:12.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:12.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:22.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:22.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:22.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:32.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:32.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:32.159 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:42.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:42.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:42.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:58:52.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:58:52.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:58:52.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:02.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:02.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:02.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:12.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:12.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:12.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:22.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:22.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:22.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:32.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:32.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:32.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:42.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:42.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:42.190 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:59:52.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:59:52.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:59:52.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:02.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:02.159 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:02.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:12.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:12.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:12.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:22.159 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:22.160 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:22.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:32.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:32.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:32.170 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:42.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:42.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:42.199 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:00:52.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:00:52.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:00:52.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:02.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:02.165 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:02.174 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:12.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:12.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:12.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:22.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:22.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:22.174 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:32.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:32.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:32.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:42.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:42.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:42.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:01:52.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:01:52.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:01:52.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:02.170 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:02.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:02.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:12.172 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:12.173 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:12.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:22.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:22.172 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:22.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:32.173 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:32.174 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:32.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:42.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:42.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:42.184 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:02:52.175 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:02:52.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:02:52.187 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:02.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:02.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:02.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:12.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:12.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:12.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:22.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:22.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:22.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:32.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:32.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:32.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:42.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:42.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:42.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:03:52.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:03:52.182 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:03:52.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:02.182 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:02.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:02.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:12.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:12.231 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:12.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:22.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:22.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:22.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:32.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:32.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:32.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:42.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:42.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:42.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:04:52.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:04:52.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:04:52.231 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:02.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:02.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:02.231 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:12.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:12.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:12.232 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:22.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:22.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:22.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:32.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:32.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:32.246 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:42.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:42.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:42.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:05:52.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:05:52.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:05:52.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:02.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:02.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:02.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:12.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:12.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:12.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:22.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:22.241 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:22.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:32.241 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:32.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:32.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:42.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:42.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:42.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:06:52.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:06:52.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:06:52.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:02.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:02.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:02.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:12.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:12.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:12.251 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:22.246 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:22.246 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:22.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:32.246 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:32.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:32.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:42.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:42.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:42.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:07:52.249 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:07:52.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:07:52.257 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:02.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:02.251 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:02.260 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:12.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:12.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:12.258 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:22.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:22.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:22.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:32.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:32.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:32.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:42.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:42.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:42.260 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:08:52.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:08:52.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:08:52.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:02.254 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:02.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:02.264 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:12.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:12.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:12.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:22.259 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:22.260 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:22.268 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:32.258 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:32.259 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:32.268 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:42.266 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:42.267 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:42.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:09:52.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:09:52.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:09:52.269 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:02.261 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:02.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:02.271 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:12.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:12.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:12.269 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:22.268 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:22.269 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:22.276 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:32.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:32.296 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:32.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:42.289 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:42.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:42.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:10:52.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:10:52.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:10:52.298 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:02.303 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:02.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:02.317 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:12.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:12.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:12.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:22.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:22.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:22.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:32.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:32.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:32.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:42.296 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:42.296 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:42.303 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:11:52.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:11:52.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:11:52.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:02.303 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:02.303 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:02.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:12.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:12.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:12.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:22.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:22.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:22.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:32.299 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:32.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:32.312 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:42.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:42.303 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:42.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:12:52.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:12:52.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:12:52.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:02.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:02.302 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:02.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:12.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:12.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:12.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:22.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:22.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:22.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:32.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:32.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:32.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:42.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:42.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:42.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:13:52.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:13:52.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:13:52.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:02.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:02.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:02.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:12.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:12.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:12.317 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:22.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:22.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:22.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:32.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:32.310 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:32.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:42.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:42.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:42.373 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:14:52.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:14:52.341 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:14:52.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:02.344 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:02.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:02.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:12.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:12.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:12.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:22.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:22.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:22.357 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:32.347 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:32.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:32.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:42.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:42.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:42.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:15:52.365 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:15:52.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:15:52.379 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:02.397 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:02.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:02.408 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:12.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:12.387 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:12.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:22.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:22.395 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:22.402 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:32.390 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:32.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:32.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:42.392 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:42.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:42.400 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:16:52.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:16:52.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:16:52.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:02.397 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:02.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:02.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:12.394 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:12.395 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:12.402 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:22.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:22.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:22.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:32.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:32.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:32.408 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:42.397 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:42.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:42.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:17:52.398 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:17:52.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:17:52.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:02.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:02.402 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:02.411 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:12.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:12.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:12.408 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:22.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:22.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:22.411 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:32.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:32.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:32.423 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:42.402 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:42.403 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:42.410 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:18:52.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:18:52.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:18:52.413 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:02.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:02.404 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:02.415 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:12.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:12.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:12.412 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:22.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:22.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:22.415 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:32.405 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:32.406 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:32.414 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:42.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:42.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:42.414 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:19:52.409 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:19:52.410 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:19:52.418 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:02.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:02.408 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:02.417 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:12.413 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:12.413 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:12.421 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:22.410 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:22.411 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:22.419 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:32.426 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:32.427 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:32.446 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:42.424 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:42.425 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:42.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:20:52.426 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:20:52.426 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:20:52.433 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:02.426 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:02.426 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:02.437 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:12.429 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:12.429 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:12.438 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:22.429 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:22.429 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:22.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:32.430 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:32.430 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:32.439 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:42.427 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:42.428 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:42.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:21:52.429 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:21:52.430 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:21:52.440 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:02.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:02.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:02.443 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:12.435 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:12.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:12.445 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:22.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:22.432 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:22.440 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:32.451 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:32.457 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:32.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:42.484 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:42.484 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:42.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:22:52.485 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:22:52.485 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:22:52.496 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:23:02.489 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:23:02.491 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:23:02.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:23:35.050 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:23:35.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:23:35.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
12:23:35.550 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:23:35.551 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:23:35.565 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:23:35.623 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:23:35.625 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43584(Long), N(String), PREPRINT(String)
12:23:35.634 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:23:35.640 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:23:35.641 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04889(String), 43583(Long), N(String), PREPRINT(String)
12:23:35.645 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:23:35.687 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:23:35.707 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:23:35.719 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:23:37.827 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:23:37.828 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
12:23:37.837 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:23:40.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:23:40.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:23:40.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:23:41.795 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:23:41.796 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
12:23:41.800 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:23:42.456 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:23:42.457 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String)
12:23:42.461 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:23:50.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:23:50.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:23:50.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:00.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:00.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:00.190 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:06.561 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:24:06.562 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), N(String), 00(String)
12:24:06.566 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:24:06.570 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:24:06.571 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), 00(String)
12:24:06.577 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:10.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:10.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:10.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:10.690 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:24:10.691 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04889(String), 43584(Long), N(String)
12:24:10.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:24:10.705 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:24:10.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04889(String), 43583(Long), N(String)
12:24:10.713 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:24:10.730 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:24:10.735 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04889(String), 2018-01-24 12:24:10.687(Timestamp), 2018-01-24 12:25:10.687(Timestamp)
12:24:10.741 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:24:10.742 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:24:10.747 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:24:10.750 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:24:12.504 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:24:12.505 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:12.509 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:18.558 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:24:18.559 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:18.563 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:20.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:20.182 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:20.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:30.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:30.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:30.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:40.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:40.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:40.217 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:24:50.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:24:50.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:24:50.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:25:17.428 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:25:17.551 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:25:17.725 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:25:17.795 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:25:17.796 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:25:17.804 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:25:24.845 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:25:24.846 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:25:24.872 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
12:25:24.889 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:25:24.890 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04900(String), 43679(Long), N(String), UNPRINT(String)
12:25:24.893 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:25:24.897 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:25:24.898 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04900(String), 43678(Long), N(String), UNPRINT(String)
12:25:24.901 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:25:24.915 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:25:24.917 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:25:24.923 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:25:25.300 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:25:25.301 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04900(String)
12:25:25.306 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:25:34.845 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:25:34.846 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:25:34.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:25:41.200 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:25:41.203 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04900(String), N(String), 00(String)
12:25:41.213 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:25:51.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:25:51.965 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:25:52.009 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:25:55.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:25:55.440 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04900(String), 00(String)
12:25:55.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:26:08.639 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:26:08.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:26:09.952 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:26:18.817 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:26:18.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:26:19.348 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:26:34.556 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:26:41.343 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:26:42.400 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:26:44.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:26:44.213 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:26:44.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:26:54.213 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:26:54.214 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:26:54.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:04.226 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:04.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:04.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:14.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:14.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:14.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:24.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:24.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:24.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:34.260 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:34.267 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:34.279 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:44.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:44.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:44.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:27:54.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:27:54.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:27:54.264 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:28:04.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:28:04.256 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:28:04.272 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:28:14.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:28:14.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:28:14.262 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:28:24.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:28:24.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:28:24.263 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:28:34.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:28:34.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:28:34.266 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:10.542 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:10.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:10.829 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:10.896 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:10.898 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:10.908 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:17.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:17.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:17.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:27.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:27.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:27.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:37.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:37.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:37.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:47.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:47.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:47.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:29:57.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:29:57.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:29:57.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:30:07.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:30:07.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:30:07.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:30:17.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:30:17.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:30:17.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:30:27.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:30:27.241 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:30:27.251 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:30:37.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:30:37.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:30:37.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:30:47.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:30:47.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:30:47.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:17.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:17.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:17.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:17.763 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:17.765 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:17.822 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:23.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:23.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:23.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:31:23.966 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:23.968 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43682(Long), N(String), UNPRINT(String)
12:31:23.978 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:23.988 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:23.989 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43681(Long), N(String), UNPRINT(String)
12:31:23.994 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:24.002 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:24.003 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43680(Long), N(String), UNPRINT(String)
12:31:24.006 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:24.064 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:31:24.066 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:31:24.072 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:25.029 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:31:25.030 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:25.036 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:31.099 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:31:31.100 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:31.105 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:33.970 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:31:33.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:33.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:33.972 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:31:33.983 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:33.986 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:33.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:31:33.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 00(String)
12:31:33.995 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:35.359 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:35.360 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43682(Long), N(String)
12:31:35.368 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:35.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:35.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43681(Long), N(String)
12:31:35.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:35.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:35.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43680(Long), N(String)
12:31:35.395 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:35.412 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:31:35.416 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:31:35.417 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:31:35.417 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 2018-01-24 12:31:35.356(Timestamp), 2018-01-24 12:32:35.356(Timestamp)
12:31:35.424 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:35.430 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:36.873 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:31:36.876 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:36.880 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:38.880 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:31:38.881 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:38.896 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:39.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:31:39.605 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:39.614 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:42.176 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:31:42.177 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:31:42.181 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:43.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:43.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:43.979 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:44.975 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:31:44.976 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:44.981 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:46.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:31:46.388 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:46.394 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:53.281 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:31:53.282 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:53.286 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:53.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:31:53.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:31:53.982 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:54.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:31:54.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:54.143 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:31:55.141 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:31:55.143 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:31:55.146 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:31:55.845 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.847 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43682(String), 04901(String), B9(String), N(String), 0034                     (String)
12:31:55.850 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.851 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:55.853 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43682(Long), N(String), HANG(String)
12:31:55.858 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.865 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.866 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43681(String), 04901(String), B9(String), N(String), 0032                     (String)
12:31:55.869 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.870 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:55.871 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43681(Long), N(String), HANG(String)
12:31:55.875 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.881 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.882 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43680(String), 04901(String), B9(String), N(String), 0033                     (String)
12:31:55.885 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.886 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:31:55.887 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43680(Long), N(String), HANG(String)
12:31:55.893 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.899 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:55.900 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43682(Long), N(String)
12:31:55.904 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.910 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.911 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43682(String), 04901(String), B9(String), N(String), 0034                     (String)
12:31:55.914 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:55.916 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43681(Long), N(String)
12:31:55.919 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.925 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.927 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43681(String), 04901(String), B9(String), N(String), 0032                     (String)
12:31:55.933 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.934 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:31:55.935 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43680(Long), N(String)
12:31:55.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.946 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:31:55.947 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:31:55(String), 9999999(String), KVSP(String), 43680(String), 04901(String), B9(String), N(String), 0033                     (String)
12:31:55.951 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.952 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
12:31:55.953 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:31:55.957 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:31:55.971 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:31:55.972 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:31:55.977 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:32:03.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:03.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:03.983 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:32:13.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:13.973 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:13.988 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:32:23.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:23.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:23.985 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:32:33.973 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:33.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:33.990 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:32:43.974 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:43.975 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:44.036 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 13
12:32:44.041 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.042 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43691(Long), N(String), UNPRINT(String)
12:32:44.049 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.060 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.061 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43697(Long), N(String), UNPRINT(String)
12:32:44.065 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.080 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.080 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43696(Long), N(String), UNPRINT(String)
12:32:44.093 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.108 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.109 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43695(Long), N(String), UNPRINT(String)
12:32:44.113 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.116 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.117 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43693(Long), N(String), UNPRINT(String)
12:32:44.120 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.128 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.128 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43692(Long), N(String), UNPRINT(String)
12:32:44.132 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.136 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43688(Long), N(String), UNPRINT(String)
12:32:44.139 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.143 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.144 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43694(Long), N(String), UNPRINT(String)
12:32:44.146 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43687(Long), N(String), UNPRINT(String)
12:32:44.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.157 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.157 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43685(Long), N(String), UNPRINT(String)
12:32:44.162 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43689(Long), N(String), UNPRINT(String)
12:32:44.171 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.178 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43686(Long), N(String), UNPRINT(String)
12:32:44.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.186 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:32:44.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43690(Long), N(String), UNPRINT(String)
12:32:44.191 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:32:44.198 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:32:44.199 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:32:44.202 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:32:48.396 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:32:48.397 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:32:48.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:32:53.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:32:53.976 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:32:53.983 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:03.975 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:03.975 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:03.985 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:13.978 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:13.978 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:13.987 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:23.977 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:23.977 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:23.984 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:34.029 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:34.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:34.039 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:44.021 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:44.022 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:44.037 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:33:54.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:33:54.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:33:54.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:34:21.054 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:21.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:21.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 13
12:34:21.437 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:21.438 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:21.447 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:34:21.466 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43691(Long), N(String), PREPRINT(String)
12:34:21.473 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.485 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.486 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43697(Long), N(String), PREPRINT(String)
12:34:21.490 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.502 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.503 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43696(Long), N(String), PREPRINT(String)
12:34:21.511 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.517 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.519 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43695(Long), N(String), PREPRINT(String)
12:34:21.522 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.526 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.527 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43693(Long), N(String), PREPRINT(String)
12:34:21.531 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.534 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.535 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43692(Long), N(String), PREPRINT(String)
12:34:21.538 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.542 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.543 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43688(Long), N(String), PREPRINT(String)
12:34:21.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.549 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.550 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43694(Long), N(String), PREPRINT(String)
12:34:21.554 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.560 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.561 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43687(Long), N(String), PREPRINT(String)
12:34:21.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.568 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43685(Long), N(String), PREPRINT(String)
12:34:21.572 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.575 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.577 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43689(Long), N(String), PREPRINT(String)
12:34:21.580 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.585 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43686(Long), N(String), PREPRINT(String)
12:34:21.588 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.593 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:34:21.594 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43690(Long), N(String), PREPRINT(String)
12:34:21.597 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:34:21.619 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:34:21.640 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:34:21.650 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:34:22.291 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:34:22.294 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:34:22.300 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:34:27.993 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:27.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:28.010 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:34:37.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:37.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:38.004 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:34:47.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:47.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:48.002 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:34:57.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:34:57.994 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:34:58.006 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:35:07.997 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:35:07.997 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:35:08.005 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:35:40.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:35:40.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:35:40.950 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 13
12:35:41.036 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:35:41.038 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:35:41.047 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:35:41.096 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43691(Long), N(String), PREPRINT(String)
12:35:41.103 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.107 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.108 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43697(Long), N(String), PREPRINT(String)
12:35:41.113 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43696(Long), N(String), PREPRINT(String)
12:35:41.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.157 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43695(Long), N(String), PREPRINT(String)
12:35:41.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.169 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43693(Long), N(String), PREPRINT(String)
12:35:41.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43692(Long), N(String), PREPRINT(String)
12:35:41.191 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43688(Long), N(String), PREPRINT(String)
12:35:41.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.210 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43694(Long), N(String), PREPRINT(String)
12:35:41.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43687(Long), N(String), PREPRINT(String)
12:35:41.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.277 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.278 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43685(Long), N(String), PREPRINT(String)
12:35:41.282 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.311 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.313 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43689(Long), N(String), PREPRINT(String)
12:35:41.316 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.365 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.366 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43686(Long), N(String), PREPRINT(String)
12:35:41.413 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.446 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:35:41.448 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43690(Long), N(String), PREPRINT(String)
12:35:41.470 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:35:41.487 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:35:41.490 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:35:41.498 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:35:43.190 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:35:43.191 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:35:43.196 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:35:46.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:35:46.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:35:46.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:35:56.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:35:56.356 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:35:56.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:36:06.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:36:06.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:36:06.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:36:39.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:36:39.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:36:39.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 13
12:36:39.693 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:36:39.695 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:36:39.704 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:36:39.763 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.764 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43691(Long), N(String), PREPRINT(String)
12:36:39.798 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.862 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.863 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43697(Long), N(String), PREPRINT(String)
12:36:39.918 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.922 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.923 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43696(Long), N(String), PREPRINT(String)
12:36:39.928 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.935 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.937 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43695(Long), N(String), PREPRINT(String)
12:36:39.945 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.955 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.956 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43693(Long), N(String), PREPRINT(String)
12:36:39.962 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.969 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.970 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43692(Long), N(String), PREPRINT(String)
12:36:39.974 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.979 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.980 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43688(Long), N(String), PREPRINT(String)
12:36:39.985 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.989 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:39.990 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43694(Long), N(String), PREPRINT(String)
12:36:39.994 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:39.999 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:40.000 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43687(Long), N(String), PREPRINT(String)
12:36:40.005 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:40.011 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:40.011 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43685(Long), N(String), PREPRINT(String)
12:36:40.016 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:40.020 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:40.021 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43689(Long), N(String), PREPRINT(String)
12:36:40.025 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:40.031 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:40.032 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43686(Long), N(String), PREPRINT(String)
12:36:40.038 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:40.044 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:36:40.045 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43690(Long), N(String), PREPRINT(String)
12:36:40.052 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:36:40.067 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:36:40.074 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:36:40.082 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:41.961 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:36:41.962 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:36:41.968 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:44.812 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:36:44.813 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:36:44.825 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:36:52.083 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:36:52.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:36:52.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:53.108 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:36:53.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:36:53.114 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:53.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:36:53.985 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:36:53.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:54.803 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:36:54.804 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:36:54.811 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:36:54.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:36:54.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:36:54.823 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:00.485 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:37:00.487 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:37:00.491 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:02.471 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.475 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43691(String), 04901(String), B9(String), N(String), 0042                     (String)
12:37:02.481 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.483 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43691(Long), N(String), PREPRINT(String)
12:37:02.486 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.493 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.493 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43697(String), 04901(String), B9(String), N(String), 0043                     (String)
12:37:02.496 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.497 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.497 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43697(Long), N(String), PREPRINT(String)
12:37:02.500 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.509 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.511 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43696(String), 04901(String), B9(String), N(String), 0044                     (String)
12:37:02.514 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.516 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43696(Long), N(String), PREPRINT(String)
12:37:02.522 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.527 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.529 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43695(String), 04901(String), B9(String), N(String), 0045                     (String)
12:37:02.533 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.534 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.535 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43695(Long), N(String), PREPRINT(String)
12:37:02.538 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.544 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.546 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43693(String), 04901(String), B9(String), N(String), 0035                     (String)
12:37:02.549 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.550 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.551 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43693(Long), N(String), PREPRINT(String)
12:37:02.555 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.561 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.562 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43692(String), 04901(String), B9(String), N(String), 0037                     (String)
12:37:02.566 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.567 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.568 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43692(Long), N(String), PREPRINT(String)
12:37:02.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.580 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.582 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43688(String), 04901(String), B9(String), N(String), 1311                     (String)
12:37:02.587 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.589 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.590 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43688(Long), N(String), PREPRINT(String)
12:37:02.596 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.602 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.603 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43694(String), 04901(String), B9(String), N(String), 0040                     (String)
12:37:02.608 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.609 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.610 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43694(Long), N(String), PREPRINT(String)
12:37:02.614 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.622 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:02.624 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:02(String), 9999999(String), KVSP(String), 43687(String), 04901(String), B9(String), N(String), 0034                     (String)
12:37:02.627 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.628 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:02.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43687(Long), N(String), PREPRINT(String)
12:37:02.634 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:02.652 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:37:02.656 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:37:02.660 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:37:04.815 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:04.816 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:04.898 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:14.814 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:14.815 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:14.823 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:15.203 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:37:15.204 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:37:15.207 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:15.210 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:37:15.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 00(String)
12:37:15.216 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:16.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:16.021 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43687(Long), N(String)
12:37:16.025 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.028 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:16.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43685(Long), N(String)
12:37:16.032 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.036 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:16.037 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43689(Long), N(String)
12:37:16.040 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:16.045 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43686(Long), N(String)
12:37:16.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.054 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:16.055 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43690(Long), N(String)
12:37:16.059 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.071 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:37:16.072 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:37:16.074 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:37:16.075 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 2018-01-24 12:37:16.017(Timestamp), 2018-01-24 12:38:16.017(Timestamp)
12:37:16.080 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:37:16.086 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:16.958 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:37:16.960 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:16.966 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:37:18.142 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:37:18.142 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:37:18.148 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:37:19.667 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:37:19.668 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:37:19.671 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:20.415 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.417 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43687(String), 04901(String), B9(String), N(String), 0034                     (String)
12:37:20.420 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:20.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43687(Long), N(String), HANG(String)
12:37:20.426 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.432 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.433 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43685(String), 04901(String), B9(String), N(String), 0032                     (String)
12:37:20.436 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.437 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:20.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43685(Long), N(String), HANG(String)
12:37:20.441 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.447 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.448 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43689(String), 04901(String), B9(String), N(String), 1309                     (String)
12:37:20.452 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:20.454 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43689(Long), N(String), HANG(String)
12:37:20.457 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.462 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.464 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43686(String), 04901(String), B9(String), N(String), 0033                     (String)
12:37:20.468 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.469 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:20.470 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43686(Long), N(String), HANG(String)
12:37:20.473 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.479 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.480 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43690(String), 04901(String), B9(String), N(String), 1310                     (String)
12:37:20.483 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:37:20.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43690(Long), N(String), HANG(String)
12:37:20.488 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.493 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:20.494 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43687(Long), N(String)
12:37:20.498 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.506 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.507 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43687(String), 04901(String), B9(String), N(String), 0034                     (String)
12:37:20.511 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.512 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:20.513 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43685(Long), N(String)
12:37:20.516 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.522 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.523 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43685(String), 04901(String), B9(String), N(String), 0032                     (String)
12:37:20.538 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.538 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:20.539 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43689(Long), N(String)
12:37:20.542 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.550 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.551 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43689(String), 04901(String), B9(String), N(String), 1309                     (String)
12:37:20.556 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.556 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:20.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43686(Long), N(String)
12:37:20.560 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.566 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.567 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43686(String), 04901(String), B9(String), N(String), 0033                     (String)
12:37:20.570 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.571 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:37:20.571 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43690(Long), N(String)
12:37:20.574 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.579 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:37:20.580 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:37:20(String), 9999999(String), KVSP(String), 43690(String), 04901(String), B9(String), N(String), 1310                     (String)
12:37:20.583 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.583 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
12:37:20.584 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:37:20.587 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:37:20.597 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:37:20.598 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:37:20.601 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:37:24.816 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:24.817 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:24.826 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:34.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:34.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:34.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:44.902 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:44.903 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:44.910 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:37:54.905 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:37:54.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:37:54.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:04.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:04.913 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:04.929 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:14.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:14.904 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:14.911 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:24.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:24.927 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:24.936 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:34.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:34.906 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:34.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:44.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:44.907 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:44.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:38:54.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:38:54.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:38:54.918 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:39:04.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:39:04.909 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:39:04.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:39:14.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:39:14.915 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:39:14.924 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:39:46.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:39:46.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:39:47.091 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:39:47.218 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:39:47.220 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:39:47.437 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:39:52.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:39:52.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:39:52.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:40:02.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:40:02.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:40:02.342 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
12:40:02.362 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:40:02.364 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43701(Long), N(String), UNPRINT(String)
12:40:02.371 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:40:02.384 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:40:02.385 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43702(Long), N(String), UNPRINT(String)
12:40:02.396 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:40:12.314 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:40:12.315 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:40:12.323 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:40:22.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:40:22.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:40:22.360 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:40:32.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:40:32.368 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:40:32.391 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:48:51.007 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:48:51.092 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:48:51.307 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 2
12:48:51.401 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:48:51.403 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:48:51.444 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:48:51.462 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:48:51.464 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43701(Long), N(String), PREPRINT(String)
12:48:51.514 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:48:51.565 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:48:51.566 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43702(Long), N(String), PREPRINT(String)
12:48:51.570 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:48:51.642 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:48:51.645 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:48:51.650 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:48:52.267 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:48:52.269 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:48:52.275 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:48:55.480 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:48:55.483 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:48:55.488 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:48:55.493 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:48:55.494 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 00(String)
12:48:55.500 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:48:56.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:48:56.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43701(Long), N(String)
12:48:56.456 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:48:56.461 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:48:56.462 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04901(String), 43702(Long), N(String)
12:48:56.466 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:48:56.499 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:48:56.501 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 2018-01-24 12:48:56.445(Timestamp), 2018-01-24 12:49:56.445(Timestamp)
12:48:56.513 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:48:56.530 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:48:56.532 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:48:56.535 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:48:57.860 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:48:57.861 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:48:57.864 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:48:58.279 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:48:58.280 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:48:58.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:48:58.914 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:48:58.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:48:58.923 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:08.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:08.282 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:08.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:49:18.288 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:18.288 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:18.299 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:49:28.281 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:28.282 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:28.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:49:38.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:38.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:38.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:49:38.315 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:49:38.316 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04902(String), 43705(Long), N(String), UNPRINT(String)
12:49:38.324 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:38.335 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:49:38.336 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04902(String), 43703(Long), N(String), UNPRINT(String)
12:49:38.340 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:38.349 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:49:38.350 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04902(String), 43704(Long), N(String), UNPRINT(String)
12:49:38.358 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:38.369 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:49:38.370 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:49:38.373 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:38.392 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:38.393 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String)
12:49:38.400 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:42.104 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:42.104 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String)
12:49:42.113 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:42.488 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:42.489 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String)
12:49:42.495 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:48.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:48.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:48.305 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:49:50.808 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:50.809 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String)
12:49:50.816 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:51.091 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:51.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String)
12:49:51.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:51.814 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:49:51.816 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String), N(String), 00(String)
12:49:51.820 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:51.823 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:49:51.824 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String), 00(String)
12:49:51.830 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:49:53.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:49:53.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04902(String), 43705(Long), N(String)
12:49:53.899 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:49:53.902 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:49:53.903 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04902(String), 43703(Long), N(String)
12:49:53.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:49:53.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:49:53.909 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04902(String), 43704(Long), N(String)
12:49:53.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:49:53.919 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:49:53.922 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:49:53.922 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04902(String), 2018-01-24 12:49:53.891(Timestamp), 2018-01-24 12:50:53.891(Timestamp)
12:49:53.923 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:49:53.926 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:53.928 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:58.285 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:49:58.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:58.313 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
12:49:58.321 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:49:58.322 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43701(Long), N(String), HANG(String)
12:49:58.331 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:58.341 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:49:58.341 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04901(String), 43702(Long), N(String), HANG(String)
12:49:58.345 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:58.356 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
12:49:58.357 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:49:58.366 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:49:58.379 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:49:58.380 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:49:58.383 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:58.393 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:49:58.394 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:49:58.397 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:49:58.904 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:49:58.905 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:49:58.909 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:02.520 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:50:02.521 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String)
12:50:02.525 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:50:08.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:50:08.284 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:08.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:16.879 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:50:16.880 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), N(String), 00(String)
12:50:16.884 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:50:16.887 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:50:16.888 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04901(String), 00(String)
12:50:16.892 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:50:18.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:50:18.297 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:18.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:28.285 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:50:28.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:28.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:36.704 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:50:36.706 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:50:36(String), 9999999(String), KVSP(String), 43701(String), 04901(String), B9(String), N(String), 0034                     (String)
12:50:36.709 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:50:36.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:50:36.712 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43701(Long), N(String), PREPRINT(String)
12:50:36.721 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:50:36.733 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:50:36.734 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:50:36(String), 9999999(String), KVSP(String), 43702(String), 04901(String), B9(String), N(String), 0033                     (String)
12:50:36.737 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:50:36.738 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:50:36.739 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04901(String), 43702(Long), N(String), PREPRINT(String)
12:50:36.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:50:36.752 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:50:36.753 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:50:36.758 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:50:38.117 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:50:38.117 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:38.120 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:38.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:50:38.286 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:38.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:50:41.069 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:50:41.069 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:50:41.075 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:07.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:07.861 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:07.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:08.108 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:08.110 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:08.118 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:14.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:14.852 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:14.862 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:24.850 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:24.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:24.859 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:34.849 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:34.850 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:34.876 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:51:34.894 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:51:34.896 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43709(Long), N(String), UNPRINT(String)
12:51:34.903 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:34.912 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:51:34.913 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43707(Long), N(String), UNPRINT(String)
12:51:34.917 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:34.933 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:51:34.933 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43708(Long), N(String), UNPRINT(String)
12:51:34.938 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:34.950 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:51:34.956 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:51:34.965 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:35.571 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:51:35.573 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:51:35.584 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:36.268 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:51:36.269 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:51:36.272 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:38.029 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:51:38.031 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), N(String), 00(String)
12:51:38.034 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:38.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:51:38.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), 00(String)
12:51:38.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:38.727 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:51:38.728 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43709(Long), N(String)
12:51:38.732 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:38.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:51:38.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43707(Long), N(String)
12:51:38.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:38.746 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:51:38.748 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43708(Long), N(String)
12:51:38.753 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:38.766 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:51:38.766 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:51:38.767 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:51:38.768 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), 2018-01-24 12:51:38.722(Timestamp), 2018-01-24 12:52:38.722(Timestamp)
12:51:38.771 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:38.777 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:51:39.721 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:51:39.722 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:39.726 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:41.236 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:51:41.237 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:51:41.241 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:51:44.850 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:44.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:44.862 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:51:54.853 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:51:54.853 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:51:54.861 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:00.208 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:52:00.209 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:00.216 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:04.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:04.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:04.871 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:52:04.878 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:04.879 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04904(String), 43713(Long), N(String), UNPRINT(String)
12:52:04.882 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:04.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:04.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04904(String), 43711(Long), N(String), UNPRINT(String)
12:52:04.905 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:04.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:04.915 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04904(String), 43712(Long), N(String), UNPRINT(String)
12:52:04.920 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:04.947 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:52:04.947 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:52:04.950 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:05.233 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:05.234 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:52:05.239 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:05.529 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:05.530 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:52:05.534 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:14.851 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:14.852 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:14.861 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:24.573 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:52:24.573 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:52:24.576 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:24.579 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:52:24.580 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:52:24.583 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:24.853 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:24.854 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:24.887 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:31.324 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:52:31.325 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:52:31.330 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:31.333 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:52:31.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:52:31.337 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:34.857 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:34.857 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:34.864 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:37.525 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:37.526 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:52:37.530 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:39.603 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:52:39.604 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:52:39.608 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:39.612 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:52:39.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:52:39.617 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:44.856 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:44.857 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:44.882 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:52:44.887 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:44.888 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43709(Long), N(String), HANG(String)
12:52:44.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:44.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:44.906 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43707(Long), N(String), HANG(String)
12:52:44.910 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:44.919 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:52:44.920 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04903(String), 43708(Long), N(String), HANG(String)
12:52:44.924 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:44.935 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
12:52:44.936 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:52:44.939 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:52:44.946 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:52:44.946 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:52:44.950 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:44.959 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:44.960 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:52:44.966 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:49.917 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:49.917 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:52:49.922 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:49.938 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:52:49.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:52:49.944 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:52.443 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:52:52.444 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:52:52.447 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:52:52.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:52:52.451 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:52:52.455 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:52:54.856 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:52:54.856 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:52:54.865 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:53:05.821 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:53:05.822 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:53:06.795 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:53:07.252 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:53:07.256 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:53:07.264 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:53:08.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:53:08.669 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:53:08.675 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:53:49.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:53:49.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:53:49.367 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:53:58.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:53:58.616 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:53:58.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:08.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:08.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:08.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:16.072 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:54:16.075 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), N(String), 00(String)
12:54:16.082 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:16.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:54:16.442 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), 00(String)
12:54:16.448 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:18.626 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:18.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:18.650 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:28.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:28.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:28.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:37.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:54:37.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:54:37.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:37.435 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:54:37.436 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:54:37.439 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:37.760 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:54:37.761 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:54:37.764 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:37.778 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:54:37.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:54:37.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:38.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:38.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:38.641 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:54:38.645 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:54:38.646 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04905(String), 43717(Long), N(String), UNPRINT(String)
12:54:38.649 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:54:38.660 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:54:38.660 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04905(String), 43715(Long), N(String), UNPRINT(String)
12:54:38.665 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:54:38.675 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:54:38.676 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04905(String), 43716(Long), N(String), UNPRINT(String)
12:54:38.687 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:54:38.711 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:54:38.711 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:54:38.719 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:38.725 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:54:38.725 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04905(String)
12:54:38.731 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:48.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:48.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:48.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:54:53.707 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:54:53.710 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04905(String), N(String), 00(String)
12:54:53.715 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:54.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:54:54.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04905(String), 00(String)
12:54:54.420 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:54:58.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:54:58.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:54:58.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:03.654 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:55:03.655 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:55:03(String), 9999999(String), KVSP(String), 43717(String), 04905(String), B17(String), N(String), 0034                     (String)
12:55:03.658 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:55:03.659 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:55:03.660 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04905(String), 43717(Long), N(String), PREPRINT(String)
12:55:03.664 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:03.670 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:55:03.670 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:55:03(String), 9999999(String), KVSP(String), 43715(String), 04905(String), B17(String), N(String), 0032                     (String)
12:55:03.673 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:55:03.674 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:55:03.675 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04905(String), 43715(Long), N(String), PREPRINT(String)
12:55:03.679 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:03.685 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
12:55:03.686 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 12:55:03(String), 9999999(String), KVSP(String), 43716(String), 04905(String), B17(String), N(String), 0033                     (String)
12:55:03.689 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:55:03.690 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:55:03.691 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04905(String), 43716(Long), N(String), PREPRINT(String)
12:55:03.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:03.706 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:55:03.706 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:55:03.711 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:08.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:08.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:08.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:10.031 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:55:10.032 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:10.035 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:12.180 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:12.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:12.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:12.203 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:12.204 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:12.207 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:12.987 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:12.988 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:12.991 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:13.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:13.005 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:13.008 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:13.615 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:13.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:13.619 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:13.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:13.633 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:13.637 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:14.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:14.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:14.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:14.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:14.402 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:14.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:14.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:14.720 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:14.723 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:14.735 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:14.736 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:14.744 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:18.621 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:18.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:18.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:20.893 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:20.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:20.898 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:20.911 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:20.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:20.916 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:21.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:21.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:21.486 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:21.500 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:21.501 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:21.504 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:22.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:22.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:22.281 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:22.293 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:22.293 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:22.297 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:22.741 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:22.742 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:22.745 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:22.757 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:22.758 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:22.762 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:23.108 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:23.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:23.113 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:23.125 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:23.125 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:23.128 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:25.826 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:25.826 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String)
12:55:25.829 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:25.840 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:25.840 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:25.843 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:26.988 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:55:26.989 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), N(String), 00(String)
12:55:26.992 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:26.995 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:55:26.996 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 00(String)
12:55:26.999 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:27.956 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:27.957 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04904(String), 43713(Long), N(String)
12:55:27.961 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:27.964 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:27.965 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04904(String), 43711(Long), N(String)
12:55:27.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:27.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:27.971 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04904(String), 43712(Long), N(String)
12:55:27.974 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:27.979 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:55:27.980 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04904(String), 2018-01-24 12:55:27.953(Timestamp), 2018-01-24 12:56:27.953(Timestamp)
12:55:27.988 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:55:27.988 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:55:27.988 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:55:27.992 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:28.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:28.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:28.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:29.151 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:55:29.152 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:29.155 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:31.816 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:55:31.817 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:31.820 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:35.785 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:55:35.786 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:35.790 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:37.963 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:37.964 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:37.967 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:38.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:38.605 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:38.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:38.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:38.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:38.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:38.907 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:38.908 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:38.911 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:39.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:39.914 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:39.932 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:40.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:40.212 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:40.215 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:40.784 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:40.785 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:40.789 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:41.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:41.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:41.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:41.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:41.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:41.911 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:42.224 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:42.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:42.228 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:42.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:42.851 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:42.853 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:43.217 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:55:43.218 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String)
12:55:43.221 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:48.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:48.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:48.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:50.452 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:55:50.453 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), N(String), 00(String)
12:55:50.456 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:50.459 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:55:50.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), 00(String)
12:55:50.463 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:51.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:51.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43709(Long), N(String)
12:55:51.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:51.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:51.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43707(Long), N(String)
12:55:51.333 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:51.341 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
12:55:51.341 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04903(String), 43708(Long), N(String)
12:55:51.349 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:55:51.353 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
12:55:51.355 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:55:51.356 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:55:51.355 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04903(String), 2018-01-24 12:55:51.296(Timestamp), 2018-01-24 12:56:51.296(Timestamp)
12:55:51.359 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:55:51.361 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:55:52.745 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:55:52.746 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:52.749 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:55:58.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:55:58.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:55:58.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:56:08.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:56:08.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:56:08.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:56:18.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:56:18.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:56:18.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:56:28.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:56:28.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:56:28.641 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:56:38.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:56:38.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:56:38.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:56:48.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:56:48.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:56:48.642 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:18.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:18.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:18.971 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:19.147 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:19.150 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:19.164 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:24.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:24.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:24.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:34.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:34.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:34.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:44.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:44.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:44.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 2
12:57:44.770 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:57:44.771 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04906(String), 43720(Long), N(String), UNPRINT(String)
12:57:44.777 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:57:44.782 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:57:44.783 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04906(String), 43719(Long), N(String), UNPRINT(String)
12:57:44.790 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:57:44.813 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:57:44.819 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:57:44.826 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:57:45.911 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:57:45.912 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:57:45.920 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:57:52.907 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:57:52.908 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String), N(String), 00(String)
12:57:52.913 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:57:52.917 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:57:52.918 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String), 00(String)
12:57:52.922 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:57:54.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:57:54.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:57:54.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:58:03.756 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:58:03.757 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String), N(String), 00(String)
12:58:03.763 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:03.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:58:03.768 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String), 00(String)
12:58:03.771 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
12:58:04.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:58:04.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:58:04.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:58:05.624 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:05.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:05.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:06.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:06.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:06.144 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:14.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:58:14.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:58:14.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:58:24.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:58:24.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:58:24.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:58:25.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:25.630 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:25.634 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:26.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:26.416 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:26.420 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:26.807 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:26.808 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:26.813 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:27.096 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:27.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:27.101 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:27.698 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:27.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:27.704 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:28.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:28.079 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:28.082 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:28.395 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:28.396 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:28.399 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:58:28.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:58:28.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04906(String)
12:58:28.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:00.080 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:00.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:00.420 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:00.576 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:00.577 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:00.592 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:00.633 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:59:00.635 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:00.644 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:06.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:06.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:06.173 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:16.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:16.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:16.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
12:59:16.203 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:16.204 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04908(String), 43725(Long), N(String), UNPRINT(String)
12:59:16.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:59:16.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:16.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04908(String), 43723(Long), N(String), UNPRINT(String)
12:59:16.233 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:59:16.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:16.243 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04908(String), 43724(Long), N(String), UNPRINT(String)
12:59:16.248 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
12:59:16.264 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:59:16.266 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:59:16.274 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:17.278 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:59:17.279 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04908(String)
12:59:17.284 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:25.220 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:59:25.221 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04908(String)
12:59:25.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:25.787 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
12:59:25.788 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04908(String)
12:59:25.795 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:26.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:26.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:26.172 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:36.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:36.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:36.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:38.847 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
12:59:38.848 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04908(String), N(String), 00(String)
12:59:38.853 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:38.858 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
12:59:38.863 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04908(String), 00(String)
12:59:38.877 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:42.178 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:42.179 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04908(String), 43725(Long), N(String), PREPRINT(String)
12:59:42.221 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:59:42.264 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:42.265 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04908(String), 43723(Long), N(String), PREPRINT(String)
12:59:42.269 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:59:42.272 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
12:59:42.273 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04908(String), 43724(Long), N(String), PREPRINT(String)
12:59:42.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
12:59:42.287 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
12:59:42.288 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
12:59:42.293 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
12:59:46.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:46.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:46.190 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:47.527 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM,rob.table_no from ORDER_HANG_LIST as ohl inner join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
12:59:47.528 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:47.539 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
12:59:56.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
12:59:56.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
12:59:56.175 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:00:06.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:00:06.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:00:06.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
13:00:06.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:06.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04909(String), 43730(Long), N(String), UNPRINT(String)
13:00:06.191 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:06.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:06.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04909(String), 43728(Long), N(String), UNPRINT(String)
13:00:06.207 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:06.226 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:06.227 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04909(String), 43729(Long), N(String), UNPRINT(String)
13:00:06.232 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:06.241 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:00:06.242 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:00:06.247 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
13:00:06.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
13:00:06.407 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04909(String)
13:00:06.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
13:00:15.737 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
13:00:15.738 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04909(String), N(String), 00(String)
13:00:15.741 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:00:15.747 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL where bill_no = ? and bill_t = 'N' and sub_no = ? and settled = 'FALSE' ; 
13:00:15.747 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04909(String), 00(String)
13:00:15.750 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
13:00:16.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
13:00:16.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
13:00:16.175 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
13:00:18.653 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:00:18.658 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 13:00:18(String), 9999999(String), KVSP(String), 43730(String), 04909(String), C2(String), N(String), 0034                     (String)
13:00:18.664 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:18.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:18.666 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04909(String), 43730(Long), N(String), PREPRINT(String)
13:00:18.671 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:00:18.676 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:00:18.677 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 13:00:18(String), 9999999(String), KVSP(String), 43728(String), 04909(String), C2(String), N(String), 0032                     (String)
13:00:18.681 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:18.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:18.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04909(String), 43728(Long), N(String), PREPRINT(String)
13:00:18.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:00:18.701 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
13:00:18.703 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-24(String), 13:00:18(String), 9999999(String), KVSP(String), 43729(String), 04909(String), C2(String), N(String), 0033                     (String)
13:00:18.706 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
13:00:18.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
13:00:18.708 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04909(String), 43729(Long), N(String), PREPRINT(String)
13:00:18.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
13:00:18.722 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
13:00:18.723 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
13:00:18.726 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
