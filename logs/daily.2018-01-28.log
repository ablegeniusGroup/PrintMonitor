08:55:28.781 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:55:28.900 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:55:29.203 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
08:55:29.308 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:55:29.310 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:55:29.369 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:55:36.085 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:55:36.085 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:55:36.103 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:55:46.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:55:46.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:55:46.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:55:56.099 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:55:56.099 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:55:56.113 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:06.085 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:06.086 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:06.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:16.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:16.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:16.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
08:56:16.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.172 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44434(Long), N(String), UNPRINT(String)
08:56:16.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.194 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44433(Long), N(String), UNPRINT(String)
08:56:16.209 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44432(Long), N(String), UNPRINT(String)
08:56:16.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.232 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.234 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44427(Long), N(String), UNPRINT(String)
08:56:16.237 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44431(Long), N(String), UNPRINT(String)
08:56:16.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.251 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.252 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44430(Long), N(String), UNPRINT(String)
08:56:16.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.259 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.260 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44425(Long), N(String), UNPRINT(String)
08:56:16.263 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44429(Long), N(String), UNPRINT(String)
08:56:16.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.277 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.278 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44426(Long), N(String), UNPRINT(String)
08:56:16.300 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.306 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:16.307 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44428(Long), N(String), UNPRINT(String)
08:56:16.312 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:16.378 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:56:16.380 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:56:16.400 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:22.918 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:22.919 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
08:56:22.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:26.086 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:26.086 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:26.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
08:56:26.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44440(Long), N(String), UNPRINT(String)
08:56:26.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.228 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44444(Long), N(String), UNPRINT(String)
08:56:26.236 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.248 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44437(Long), N(String), UNPRINT(String)
08:56:26.255 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.261 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.262 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44438(Long), N(String), UNPRINT(String)
08:56:26.265 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44443(Long), N(String), UNPRINT(String)
08:56:26.273 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.282 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.283 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44439(Long), N(String), UNPRINT(String)
08:56:26.287 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.290 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.291 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44435(Long), N(String), UNPRINT(String)
08:56:26.294 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.298 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.299 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44442(Long), N(String), UNPRINT(String)
08:56:26.302 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.308 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.310 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44436(Long), N(String), UNPRINT(String)
08:56:26.315 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.325 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:26.327 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44441(Long), N(String), UNPRINT(String)
08:56:26.333 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:26.365 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:56:26.366 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:56:26.372 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:26.464 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:26.465 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:56:26.470 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:36.086 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:36.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:36.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:46.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:46.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:46.116 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
08:56:46.120 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.120 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44451(Long), N(String), UNPRINT(String)
08:56:46.124 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.136 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44452(Long), N(String), UNPRINT(String)
08:56:46.141 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44447(Long), N(String), UNPRINT(String)
08:56:46.158 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.169 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44449(Long), N(String), UNPRINT(String)
08:56:46.173 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.177 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44450(Long), N(String), UNPRINT(String)
08:56:46.180 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44454(Long), N(String), UNPRINT(String)
08:56:46.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.192 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44453(Long), N(String), UNPRINT(String)
08:56:46.196 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.199 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.200 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44446(Long), N(String), UNPRINT(String)
08:56:46.209 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44448(Long), N(String), UNPRINT(String)
08:56:46.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:46.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44445(Long), N(String), UNPRINT(String)
08:56:46.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:46.232 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:56:46.233 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:56:46.240 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:46.244 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:46.245 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:56:46.253 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:49.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:49.411 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
08:56:49.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:49.430 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:49.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:56:49.436 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:49.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:49.461 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:56:49.465 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:50.736 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:50.736 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
08:56:50.741 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:50.755 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:50.756 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:56:50.760 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:50.773 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:50.773 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:56:50.777 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:52.584 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:56:52.585 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), N(String), 00(String)
08:56:52.589 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:52.592 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
08:56:52.593 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), 00(String)
08:56:52.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:53.593 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.594 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44434(Long), N(String)
08:56:53.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.603 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44433(Long), N(String)
08:56:53.608 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.612 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44432(Long), N(String)
08:56:53.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.620 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.621 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44427(Long), N(String)
08:56:53.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.629 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44431(Long), N(String)
08:56:53.633 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.637 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44430(Long), N(String)
08:56:53.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.644 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44425(Long), N(String)
08:56:53.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.651 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.651 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44429(Long), N(String)
08:56:53.654 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.659 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44426(Long), N(String)
08:56:53.662 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:56:53.666 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04944(String), 44428(Long), N(String)
08:56:53.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:53.684 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
08:56:53.684 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:56:53.685 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:56:53.685 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), 2018-01-28 08:56:53.59(Timestamp), 2018-01-28 08:59:53.59(Timestamp)
08:56:53.689 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:53.692 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:55.202 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
08:56:55.203 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:55.209 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:56.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:56:56.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:56:56.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:56.102 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:56:56.103 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
08:56:56.106 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:56:57.716 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:56:57.716 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), N(String), 00(String)
08:56:57.719 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:56:59.221 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.222 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44434(String), 04944(String), T6(String), N(String), 0042                     (String)
08:56:59.225 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.226 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.227 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44434(Long), N(String), HANG(String)
08:56:59.230 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.237 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.237 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44433(String), 04944(String), T6(String), N(String), 1311                     (String)
08:56:59.245 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.246 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44433(Long), N(String), HANG(String)
08:56:59.252 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.257 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.258 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44432(String), 04944(String), T6(String), N(String), 1312                     (String)
08:56:59.260 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44432(Long), N(String), HANG(String)
08:56:59.265 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.271 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.272 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44427(String), 04944(String), T6(String), N(String), 0036                     (String)
08:56:59.275 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44427(Long), N(String), HANG(String)
08:56:59.280 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.286 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.286 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44431(String), 04944(String), T6(String), N(String), 0039                     (String)
08:56:59.289 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.290 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.290 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44431(Long), N(String), HANG(String)
08:56:59.294 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.303 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.304 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44430(String), 04944(String), T6(String), N(String), 0034                     (String)
08:56:59.307 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.308 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44430(Long), N(String), HANG(String)
08:56:59.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.320 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.321 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44425(String), 04944(String), T6(String), N(String), 1309                     (String)
08:56:59.324 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44425(Long), N(String), HANG(String)
08:56:59.328 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.334 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:56:59.335 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:56:59(String), 9999999(String), KVSP(String), 44429(String), 04944(String), T6(String), N(String), 0032                     (String)
08:56:59.339 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.340 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:56:59.340 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44429(Long), N(String), HANG(String)
08:56:59.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:56:59.356 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:56:59.356 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:56:59.360 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:06.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:06.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:06.104 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:16.097 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:16.097 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:16.110 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:26.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:26.087 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:26.101 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:26.367 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:57:26.368 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), N(String), 00(String)
08:57:26.372 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:27.055 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
08:57:27.056 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
08:57:27.063 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:27.075 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:27.076 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:27(String), 9999999(String), KVSP(String), 44426(String), 04944(String), T6(String), N(String), 1310                     (String)
08:57:27.079 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:27.080 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:27.081 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44426(Long), N(String), HANG(String)
08:57:27.084 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:27.092 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:27.093 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:27(String), 9999999(String), KVSP(String), 44428(String), 04944(String), T6(String), N(String), 0033                     (String)
08:57:27.096 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:27.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:27.098 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04944(String), 44428(Long), N(String), HANG(String)
08:57:27.101 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:27.119 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:57:27.120 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:57:27.123 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:28.654 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:28.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:57:28.659 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:28.669 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:28.670 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:57:28.673 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:29.520 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:29.521 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:57:29.524 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:29.536 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:29.536 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:57:29.540 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:30.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:30.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:57:30.192 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:30.206 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:30.207 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:57:30.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:30.560 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:30.561 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
08:57:30.564 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:30.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:57:30.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:57:30.577 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:32.351 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:57:32.352 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), N(String), 00(String)
08:57:32.355 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:32.997 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:32.998 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44440(String), 04940(String), T7(String), N(String), 0035                     (String)
08:57:33.003 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44440(Long), N(String), PREPRINT(String)
08:57:33.009 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.015 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.016 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44444(String), 04940(String), T7(String), N(String), 1311                     (String)
08:57:33.018 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44444(Long), N(String), PREPRINT(String)
08:57:33.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.029 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.030 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44437(String), 04940(String), T7(String), N(String), 0036                     (String)
08:57:33.033 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.033 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.034 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44437(Long), N(String), PREPRINT(String)
08:57:33.037 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.045 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.046 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44438(String), 04940(String), T7(String), N(String), 0030                     (String)
08:57:33.049 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.051 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44438(Long), N(String), PREPRINT(String)
08:57:33.055 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.062 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.062 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44443(String), 04940(String), T7(String), N(String), 0034                     (String)
08:57:33.066 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.067 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44443(Long), N(String), PREPRINT(String)
08:57:33.074 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.081 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.081 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44439(String), 04940(String), T7(String), N(String), 0031                     (String)
08:57:33.085 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.086 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.087 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44439(Long), N(String), PREPRINT(String)
08:57:33.091 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.098 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.099 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44435(String), 04940(String), T7(String), N(String), 1309                     (String)
08:57:33.103 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.104 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.105 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44435(Long), N(String), PREPRINT(String)
08:57:33.110 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.127 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:33.127 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:32(String), 9999999(String), KVSP(String), 44442(String), 04940(String), T7(String), N(String), 0032                     (String)
08:57:33.131 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.132 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:33.151 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44442(Long), N(String), PREPRINT(String)
08:57:33.155 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:33.162 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:57:33.163 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:57:33.167 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:34.159 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:57:34.159 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), N(String), 00(String)
08:57:34.163 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:34.635 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:34.636 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:34(String), 9999999(String), KVSP(String), 44436(String), 04940(String), T7(String), N(String), 1310                     (String)
08:57:34.641 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:34.642 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:34.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44436(Long), N(String), PREPRINT(String)
08:57:34.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:34.653 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:57:34.654 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:57:34(String), 9999999(String), KVSP(String), 44441(String), 04940(String), T7(String), N(String), 0033                     (String)
08:57:34.656 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:34.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:57:34.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04940(String), 44441(Long), N(String), PREPRINT(String)
08:57:34.661 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:34.671 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:57:34.672 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:57:34.675 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:36.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:36.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:36.106 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:36.183 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:57:36.184 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
08:57:36.187 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:36.190 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
08:57:36.190 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 00(String)
08:57:36.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:37.304 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.304 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44451(Long), N(String)
08:57:37.307 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.312 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.313 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44452(Long), N(String)
08:57:37.316 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.321 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.322 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44447(Long), N(String)
08:57:37.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.332 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44449(Long), N(String)
08:57:37.336 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.339 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.339 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44450(Long), N(String)
08:57:37.345 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.349 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44454(Long), N(String)
08:57:37.353 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.358 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.359 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44453(Long), N(String)
08:57:37.363 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.367 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.368 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44446(Long), N(String)
08:57:37.375 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.380 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44448(Long), N(String)
08:57:37.383 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
08:57:37.387 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44445(Long), N(String)
08:57:37.396 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:37.405 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
08:57:37.407 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:57:37.407 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 2018-01-28 08:57:37.3(Timestamp), 2018-01-28 09:00:37.3(Timestamp)
08:57:37.408 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:57:37.411 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:57:37.413 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:57:46.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:46.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:46.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:57:56.088 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:57:56.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:57:56.102 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:06.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:06.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:06.104 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:16.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:16.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:16.104 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:26.093 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:26.093 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:26.106 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:36.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:36.090 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:36.106 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:46.090 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:46.090 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:46.117 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:52.108 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
08:58:52.109 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:52.114 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
08:58:53.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
08:58:53.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:58:53.281 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
08:58:54.209 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:58:54.209 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
08:58:54.212 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:58:55.205 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.206 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44451(String), 04941(String), T8(String), N(String), 0042                     (String)
08:58:55.208 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44451(Long), N(String), HANG(String)
08:58:55.213 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.221 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.221 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44452(String), 04941(String), T8(String), N(String), 0043                     (String)
08:58:55.224 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.224 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44452(Long), N(String), HANG(String)
08:58:55.228 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.236 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.237 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44447(String), 04941(String), T8(String), N(String), 0035                     (String)
08:58:55.240 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.241 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.241 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44447(Long), N(String), HANG(String)
08:58:55.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.251 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.252 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44449(String), 04941(String), T8(String), N(String), 1311                     (String)
08:58:55.255 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.256 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.257 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44449(Long), N(String), HANG(String)
08:58:55.260 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.266 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.266 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44450(String), 04941(String), T8(String), N(String), 1312                     (String)
08:58:55.272 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.272 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.273 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44450(Long), N(String), HANG(String)
08:58:55.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.281 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.281 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44454(String), 04941(String), T8(String), N(String), 0040                     (String)
08:58:55.284 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.285 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.285 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44454(Long), N(String), HANG(String)
08:58:55.288 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.293 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.294 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44453(String), 04941(String), T8(String), N(String), 0039                     (String)
08:58:55.296 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.297 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.298 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44453(Long), N(String), HANG(String)
08:58:55.301 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.306 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:58:55.307 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:58:55(String), 9999999(String), KVSP(String), 44446(String), 04941(String), T8(String), N(String), 0034                     (String)
08:58:55.310 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.310 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:58:55.311 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44446(Long), N(String), HANG(String)
08:58:55.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:58:55.324 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:58:55.325 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:58:55.328 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:58:56.095 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:58:56.095 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:58:56.110 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:06.092 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:06.093 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:06.109 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:09.936 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
08:59:09.937 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
08:59:09.943 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:10.619 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
08:59:10.620 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
08:59:10.623 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:59:10.633 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:59:10.634 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:59:10(String), 9999999(String), KVSP(String), 44448(String), 04941(String), T8(String), N(String), 0032                     (String)
08:59:10.642 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:59:10.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:59:10.643 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44448(Long), N(String), HANG(String)
08:59:10.647 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:59:10.652 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
08:59:10.653 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 08:59:10(String), 9999999(String), KVSP(String), 44445(String), 04941(String), T8(String), N(String), 0033                     (String)
08:59:10.655 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:59:10.656 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
08:59:10.657 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44445(Long), N(String), HANG(String)
08:59:10.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
08:59:10.679 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
08:59:10.680 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
08:59:10.685 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
08:59:16.095 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:16.095 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:16.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:26.098 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:26.099 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:26.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:36.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:36.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:36.164 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:46.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:46.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:46.136 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
08:59:56.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
08:59:56.122 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
08:59:56.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:06.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:06.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:06.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:16.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:16.122 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:16.135 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:26.122 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:26.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:26.136 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:36.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:36.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:36.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:46.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:46.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:46.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:46.820 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:00:46.821 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:46.823 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:00:56.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:00:56.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:00:56.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
09:00:56.145 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:00:56.145 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44455(Long), N(String), UNPRINT(String)
09:00:56.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:00:56.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:00:56.164 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44457(Long), N(String), UNPRINT(String)
09:00:56.171 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:00:56.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:00:56.182 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44456(Long), N(String), UNPRINT(String)
09:00:56.186 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:00:56.197 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:00:56.197 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:00:56.200 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:06.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:06.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:06.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
09:01:06.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:06.150 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44458(Long), N(String), UNPRINT(String)
09:01:06.154 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:06.164 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:06.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44459(Long), N(String), UNPRINT(String)
09:01:06.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:06.179 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:06.180 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44460(Long), N(String), UNPRINT(String)
09:01:06.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:06.201 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:01:06.202 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:01:06.206 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:09.677 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:09.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:01:09.683 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:09.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:09.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:01:09.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:10.348 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:10.349 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:01:10.352 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:10.361 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:10.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:01:10.368 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:16.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:16.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:16.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:17.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:17.469 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:01:17.472 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:17.483 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:17.483 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:01:17.486 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:20.682 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:01:20.683 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:20.693 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:24.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:24.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:01:24.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:24.444 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:01:24.445 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:01:24.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:25.509 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:01:25.510 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String), N(String), 00(String)
09:01:25.512 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:26.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:26.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:26.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:26.217 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:01:26.218 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:01:26(String), 9999999(String), KVSP(String), 44455(String), 04945(String), T9(String), N(String), 1309                     (String)
09:01:26.221 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.221 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:26.222 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44455(Long), N(String), PREPRINT(String)
09:01:26.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.231 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:01:26.231 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:01:26(String), 9999999(String), KVSP(String), 44457(String), 04945(String), T9(String), N(String), 0032                     (String)
09:01:26.234 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.234 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:26.235 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44457(Long), N(String), PREPRINT(String)
09:01:26.240 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.247 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:01:26.247 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:01:26(String), 9999999(String), KVSP(String), 44456(String), 04945(String), T9(String), N(String), 1310                     (String)
09:01:26.250 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.251 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:01:26.251 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44456(Long), N(String), PREPRINT(String)
09:01:26.254 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:01:26.263 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:01:26.264 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:01:26.269 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:01:36.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:36.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:36.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:46.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:46.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:46.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:01:56.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:01:56.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:01:56.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:06.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:06.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:06.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:16.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:16.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:16.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:26.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:26.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:26.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:36.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:36.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:36.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:46.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:46.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:46.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:02:56.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:02:56.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:02:56.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:06.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:06.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:06.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:16.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:16.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:16.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:26.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:26.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:26.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:36.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:36.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:36.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:46.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:46.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:46.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:03:56.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:03:56.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:03:56.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:06.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:06.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:06.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:16.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:16.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:16.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:26.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:26.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:26.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:36.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:36.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:36.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:46.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:46.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:46.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:04:56.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:04:56.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:04:56.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:06.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:06.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:06.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:16.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:16.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:16.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:26.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:26.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:26.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:36.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:36.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:36.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:46.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:46.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:46.176 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:05:56.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:05:56.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:05:56.166 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:06:06.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:06:06.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:06:06.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:06:16.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:06:16.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:06:16.170 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:06:26.165 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:06:26.165 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:06:26.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:06:36.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:06:36.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:06:36.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:06:46.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:06:46.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:06:46.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:07:28.318 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:07:28.393 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:07:28.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 3
09:07:28.650 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:07:28.651 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:07:28.709 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:07:28.724 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:07:28.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44458(Long), N(String), PREPRINT(String)
09:07:28.729 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:07:28.732 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:07:28.733 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44459(Long), N(String), PREPRINT(String)
09:07:28.738 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:07:28.742 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:07:28.743 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44460(Long), N(String), PREPRINT(String)
09:07:28.746 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:07:28.765 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:07:28.767 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:07:28.773 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:07:28.923 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:07:28.924 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:07:28.928 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:07:36.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:07:36.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:07:36.309 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:07:46.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:07:46.290 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:07:46.304 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:07:56.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:07:56.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:07:56.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:07:59.305 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:07:59.305 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:07:59.311 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:00.336 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:08:00.338 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:08:00.342 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:00.766 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:08:00.767 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:08:00.771 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:01.644 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:08:01.645 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:08:01.649 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:02.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:08:02.189 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:08:02.195 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:06.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:06.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:06.311 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:08:16.291 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:16.292 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:16.306 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:08:26.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:26.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:26.316 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:08:36.293 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:36.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:36.319 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
09:08:36.324 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:36.325 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44463(Long), N(String), UNPRINT(String)
09:08:36.331 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:36.346 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:36.347 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44461(Long), N(String), UNPRINT(String)
09:08:36.351 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:36.361 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:36.362 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44462(Long), N(String), UNPRINT(String)
09:08:36.367 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.828 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:08:37.829 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:08:37(String), 9999999(String), KVSP(String), 44463(String), 04945(String), T9(String), N(String), 0034                     (String)
09:08:37.833 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.834 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:37.835 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44463(Long), N(String), PREPRINT(String)
09:08:37.839 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.845 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:08:37.846 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:08:37(String), 9999999(String), KVSP(String), 44461(String), 04945(String), T9(String), N(String), 0032                     (String)
09:08:37.850 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.850 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:37.851 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44461(Long), N(String), PREPRINT(String)
09:08:37.855 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.862 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:08:37.863 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:08:37(String), 9999999(String), KVSP(String), 44462(String), 04945(String), T9(String), N(String), 0033                     (String)
09:08:37.865 [Timer-0] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.866 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:37.867 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44462(Long), N(String), PREPRINT(String)
09:08:37.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:37.882 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:08:37.883 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:08:37.889 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:46.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:46.294 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:46.308 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:08:56.295 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:08:56.296 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:08:56.317 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 3
09:08:56.322 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:56.323 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44466(Long), N(String), UNPRINT(String)
09:08:56.326 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:56.338 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:56.339 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44464(Long), N(String), UNPRINT(String)
09:08:56.344 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:56.353 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:08:56.354 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44465(Long), N(String), UNPRINT(String)
09:08:56.358 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:08:56.374 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:08:56.375 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:08:56.379 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:08:56.387 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:08:56.387 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:08:56.392 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:09:21.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:21.995 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:22.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 6
09:09:22.217 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:22.218 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:22.229 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:09:22.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.249 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44458(Long), N(String), PREPRINT(String)
09:09:22.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.266 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44459(Long), N(String), PREPRINT(String)
09:09:22.276 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.286 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.286 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44460(Long), N(String), PREPRINT(String)
09:09:22.290 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.305 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:09:22.312 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:09:22.320 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:09:22.535 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:09:22.536 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:09:22.541 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:09:22.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.548 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44466(Long), N(String), PREPRINT(String)
09:09:22.554 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.559 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.560 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44464(Long), N(String), PREPRINT(String)
09:09:22.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:09:22.570 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44465(Long), N(String), PREPRINT(String)
09:09:22.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:09:22.602 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:09:22.603 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:09:22.607 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:09:22.654 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:09:22.655 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:09:22.660 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:09:29.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:29.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:29.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:09:39.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:39.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:39.620 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:09:49.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:49.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:49.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:09:59.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:09:59.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:09:59.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:09.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:09.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:09.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:19.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:19.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:19.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:29.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:29.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:29.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:39.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:39.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:39.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:49.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:49.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:10:59.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:10:59.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:10:59.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:09.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:09.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:09.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:19.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:19.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:19.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:29.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:29.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:29.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:39.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:39.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:39.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:49.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:49.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:11:59.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:11:59.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:11:59.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:09.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:09.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:09.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:19.587 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:19.587 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:19.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:29.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:29.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:29.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:39.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:39.587 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:39.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:49.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:49.586 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:49.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:12:59.587 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:12:59.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:12:59.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:09.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:09.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:09.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:19.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:19.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:19.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:29.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:29.588 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:29.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:39.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:39.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:39.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:49.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:49.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:49.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:13:59.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:13:59.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:13:59.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:09.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:09.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:09.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:19.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:19.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:19.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:29.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:29.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:29.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:39.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:39.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:39.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:49.618 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:14:59.590 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:14:59.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:14:59.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:09.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:09.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:09.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:19.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:19.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:19.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:29.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:29.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:29.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:39.591 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:39.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:39.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:49.592 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:49.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:49.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:15:59.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:15:59.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:15:59.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:09.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:09.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:09.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:19.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:19.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:19.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:29.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:29.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:29.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:39.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:39.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:39.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:49.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:49.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:49.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:16:59.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:16:59.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:16:59.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:09.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:09.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:09.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:19.594 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:19.595 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:19.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:29.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:39.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:39.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:39.614 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:49.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:49.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:49.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:17:59.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:17:59.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:17:59.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:09.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:09.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:09.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:19.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:19.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:19.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:29.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:39.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:39.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:39.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:49.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:18:59.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:18:59.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:18:59.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:09.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:09.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:09.618 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:19.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:19.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:19.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:29.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:29.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:39.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:39.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:39.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:49.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:49.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:19:59.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:19:59.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:19:59.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:09.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:09.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:09.614 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:19.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:19.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:19.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:29.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:29.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:29.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:39.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:39.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:39.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:49.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:49.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:20:59.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:20:59.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:20:59.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:09.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:09.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:09.614 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:19.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:19.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:19.614 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:29.600 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:29.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:29.616 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:39.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:39.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:39.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:49.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:49.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:21:59.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:21:59.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:21:59.619 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:09.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:09.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:09.619 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:19.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:19.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:19.616 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:29.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:29.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:29.619 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:39.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:39.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:39.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:49.603 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:49.604 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:49.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:22:59.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:22:59.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:22:59.650 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:09.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:09.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:09.618 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:19.605 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:19.606 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:19.619 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:29.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:29.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:29.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:39.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:39.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:39.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:49.628 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:23:59.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:23:59.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:23:59.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:09.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:09.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:09.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:19.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:19.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:19.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:29.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:29.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:29.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:39.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:39.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:39.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:49.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:49.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:49.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:24:59.607 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:24:59.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:24:59.627 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:09.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:09.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:09.622 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:19.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:19.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:19.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:29.608 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:29.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:29.624 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:39.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:39.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:39.626 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:49.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:49.610 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:49.623 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:52.379 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:25:52.380 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String), N(String), 00(String)
09:25:52.385 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:52.388 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:25:52.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String), 00(String)
09:25:52.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:53.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:53.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04946(String), 44458(Long), N(String)
09:25:53.285 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:53.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:53.296 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04946(String), 44459(Long), N(String)
09:25:53.301 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:53.305 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:53.306 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04946(String), 44460(Long), N(String)
09:25:53.309 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:53.319 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:25:53.320 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:25:53.320 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:25:53.320 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String), 2018-01-28 09:25:53.273(Timestamp), 2018-01-28 09:26:53.273(Timestamp)
09:25:53.323 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:25:53.328 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:54.428 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:25:54.429 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String), N(String), 00(String)
09:25:54.436 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:54.440 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:25:54.440 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String), 00(String)
09:25:54.444 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:25:55.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:55.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04945(String), 44466(Long), N(String)
09:25:55.167 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:55.170 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:55.171 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04945(String), 44464(Long), N(String)
09:25:55.174 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:55.177 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:25:55.177 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04945(String), 44465(Long), N(String)
09:25:55.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:55.187 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:25:55.189 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:25:55.189 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String), 2018-01-28 09:25:55.16(Timestamp), 2018-01-28 09:26:55.16(Timestamp)
09:25:55.190 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:25:55.193 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:25:55.195 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:25:59.044 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:25:59.045 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:59.049 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:25:59.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:25:59.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:25:59.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:00.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:00.117 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:26:00.121 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:09.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:09.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:09.628 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:19.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:19.617 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:19.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:29.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:29.613 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:29.628 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:31.347 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:26:31.347 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:31.352 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:26:39.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:39.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:39.625 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:49.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:49.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 6
09:26:49.654 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.654 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44458(Long), N(String), HANG(String)
09:26:49.663 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.677 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44459(Long), N(String), HANG(String)
09:26:49.680 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.690 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.690 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04946(String), 44460(Long), N(String), HANG(String)
09:26:49.694 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.706 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:26:49.706 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:26:49.709 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.715 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44466(Long), N(String), HANG(String)
09:26:49.718 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:26:49.719 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:26:49.721 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.724 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.726 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44464(Long), N(String), HANG(String)
09:26:49.728 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:49.731 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.735 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:26:49.735 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04945(String), 44465(Long), N(String), HANG(String)
09:26:49.738 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.741 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:26:49.743 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:26:49.745 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:26:49.752 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:26:49.753 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:26:49.755 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:51.886 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:51.886 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:26:51.890 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:51.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:51.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:26:51.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:54.269 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:26:54.270 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:54.273 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:26:56.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:56.700 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:26:56.703 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:57.062 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:57.062 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:26:57.067 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:57.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:57.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:26:57.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:58.002 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:58.003 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:26:58.006 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:58.015 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:26:58.015 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:26:58.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:26:59.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:26:59.672 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:26:59.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:27:09.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:27:09.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:27:09.626 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:27:19.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:27:19.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:27:19.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:27:29.947 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:27:29.948 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:27:29.967 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:27:39.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:27:39.961 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:27:39.977 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:27:50.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:27:50.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:27:50.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:00.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:00.170 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:00.191 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:05.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:28:05.141 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String)
09:28:05.148 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:28:06.229 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:28:06.230 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04945(String), N(String), 00(String)
09:28:06.234 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:07.929 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:07.931 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:07(String), 9999999(String), KVSP(String), 44466(String), 04945(String), T9(String), N(String), 0035                     (String)
09:28:07.934 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:07.936 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:07.937 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44466(Long), N(String), PREPRINT(String)
09:28:07.943 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:07.951 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:07.952 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:07(String), 9999999(String), KVSP(String), 44464(String), 04945(String), T9(String), N(String), 0034                     (String)
09:28:07.963 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:07.964 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:07.965 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44464(Long), N(String), PREPRINT(String)
09:28:07.968 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:07.974 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:07.975 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:07(String), 9999999(String), KVSP(String), 44465(String), 04945(String), T9(String), N(String), 0033                     (String)
09:28:07.978 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:07.980 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:07.981 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04945(String), 44465(Long), N(String), PREPRINT(String)
09:28:07.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:08.076 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:28:08.076 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:28:08.080 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:28:10.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:10.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:10.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:11.739 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:28:11.740 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String)
09:28:11.744 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:28:13.296 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:28:13.296 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04946(String), N(String), 00(String)
09:28:13.299 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:13.801 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:13.802 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:13(String), 9999999(String), KVSP(String), 44458(String), 04946(String), T10(String), N(String), 0035                     (String)
09:28:13.805 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.806 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:13.807 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04946(String), 44458(Long), N(String), PREPRINT(String)
09:28:13.810 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.817 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:13.817 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:13(String), 9999999(String), KVSP(String), 44459(String), 04946(String), T10(String), N(String), 1311                     (String)
09:28:13.820 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.821 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:13.822 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04946(String), 44459(Long), N(String), PREPRINT(String)
09:28:13.825 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.833 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:28:13.834 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:28:13(String), 9999999(String), KVSP(String), 44460(String), 04946(String), T10(String), N(String), 0032                     (String)
09:28:13.837 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.838 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:28:13.838 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04946(String), 44460(Long), N(String), PREPRINT(String)
09:28:13.841 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:28:13.851 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:28:13.852 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:28:13.855 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:28:20.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:20.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:20.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:30.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:30.211 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:30.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:40.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:40.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:40.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:28:50.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:28:50.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:28:50.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:00.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:00.226 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:00.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:10.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:10.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:10.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:20.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:20.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:20.259 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:30.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:30.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:30.241 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:40.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:40.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:40.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:29:50.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:29:50.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:29:50.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:00.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:00.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:00.270 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:10.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:10.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:10.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:20.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:20.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:20.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:30.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:30.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:30.241 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:40.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:40.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:40.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:30:50.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:30:50.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:30:50.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:00.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:00.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:00.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:10.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:10.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:10.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:20.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:20.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:20.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:30.224 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:30.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:30.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:40.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:40.226 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:40.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:31:50.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:31:50.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:31:50.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:00.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:00.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:00.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:10.225 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:10.226 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:10.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:20.249 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:20.249 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:20.267 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:30.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:30.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:30.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:40.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:40.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:40.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:32:50.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:32:50.230 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:32:50.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:00.227 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:00.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:00.244 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:10.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:10.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:10.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:20.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:20.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:20.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:30.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:30.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:30.247 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:40.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:40.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:40.243 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:33:50.228 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:33:50.229 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:33:50.242 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:00.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:00.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:00.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:10.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:10.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:10.251 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:20.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:20.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:20.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:30.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:30.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:30.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:40.237 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:40.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:40.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:34:50.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:34:50.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:34:50.255 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:35:00.248 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:35:00.249 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:35:00.301 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:36:05.274 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:05.364 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:05.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
09:36:05.584 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:05.585 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:05.596 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:36:12.120 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:12.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:12.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:36:22.105 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:22.105 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:22.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:36:32.109 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:32.109 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:32.157 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
09:36:32.173 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.175 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44476(Long), N(String), UNPRINT(String)
09:36:32.179 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.187 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44473(Long), N(String), UNPRINT(String)
09:36:32.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.201 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44475(Long), N(String), UNPRINT(String)
09:36:32.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44474(Long), N(String), UNPRINT(String)
09:36:32.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44471(Long), N(String), UNPRINT(String)
09:36:32.228 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44472(Long), N(String), UNPRINT(String)
09:36:32.239 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.244 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44467(Long), N(String), UNPRINT(String)
09:36:32.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.250 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.251 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44470(Long), N(String), UNPRINT(String)
09:36:32.255 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.258 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.259 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44468(Long), N(String), UNPRINT(String)
09:36:32.264 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:32.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04944(String), 44469(Long), N(String), UNPRINT(String)
09:36:32.275 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:32.288 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:36:32.291 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:36:32.300 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:36:32.622 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:36:32.624 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:36:32.629 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:36:42.107 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:42.108 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:42.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
09:36:42.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44484(Long), N(String), UNPRINT(String)
09:36:42.160 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.170 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.171 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44483(Long), N(String), UNPRINT(String)
09:36:42.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.184 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44478(Long), N(String), UNPRINT(String)
09:36:42.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.199 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44486(Long), N(String), UNPRINT(String)
09:36:42.203 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.207 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.208 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44477(Long), N(String), UNPRINT(String)
09:36:42.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44485(Long), N(String), UNPRINT(String)
09:36:42.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44480(Long), N(String), UNPRINT(String)
09:36:42.231 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44481(Long), N(String), UNPRINT(String)
09:36:42.238 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.242 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44479(Long), N(String), UNPRINT(String)
09:36:42.246 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.252 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:36:42.252 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44482(Long), N(String), UNPRINT(String)
09:36:42.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:36:42.286 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:36:42.291 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:36:42.291 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:36:42.291 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ====> Parameters: 200101(String)
09:36:42.296 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:36:42.297 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <====      Total: 1
09:36:52.107 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:36:52.108 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:36:52.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:02.108 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:02.108 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:02.122 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:12.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:12.112 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:12.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:22.109 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:22.110 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:22.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:32.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:32.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:32.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:42.112 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:42.113 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:42.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 7
09:37:42.143 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.144 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44492(Long), N(String), UNPRINT(String)
09:37:42.147 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.159 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.160 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44488(Long), N(String), UNPRINT(String)
09:37:42.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.175 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.175 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44494(Long), N(String), UNPRINT(String)
09:37:42.179 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.188 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44493(Long), N(String), UNPRINT(String)
09:37:42.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.197 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44491(Long), N(String), UNPRINT(String)
09:37:42.201 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44489(Long), N(String), UNPRINT(String)
09:37:42.208 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:37:42.213 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44490(Long), N(String), UNPRINT(String)
09:37:42.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:37:42.237 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:37:42.238 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:37:42.255 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:37:42.256 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====> Parameters: 04941(String)
09:37:42.257 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:37:42.264 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <====      Total: 1
09:37:52.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:37:52.111 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:37:52.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:37:55.283 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:37:55.284 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:37:55.288 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:37:55.303 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:37:55.304 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:37:55.308 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:37:55.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:37:55.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:37:55.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:02.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:02.120 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:02.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:12.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:12.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:12.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:22.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:22.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:22.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:32.112 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:32.112 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:32.133 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 4
09:38:32.136 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:38:32.137 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44500(Long), N(String), UNPRINT(String)
09:38:32.141 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:38:32.147 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:38:32.148 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44499(Long), N(String), UNPRINT(String)
09:38:32.152 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:38:32.155 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:38:32.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44498(Long), N(String), UNPRINT(String)
09:38:32.159 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:38:32.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:38:32.163 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44497(Long), N(String), UNPRINT(String)
09:38:32.168 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:38:32.174 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:38:32.174 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:38:32.179 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:32.192 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:32.193 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:38:32.201 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:38.588 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:38:38.589 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:38.594 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:41.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:41.402 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:38:41.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:41.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:41.419 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:38:41.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:41.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:41.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:38:41.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:41.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:41.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:38:41.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:42.114 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:42.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:42.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:43.684 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:43.685 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:38:43.688 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:43.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:43.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:38:43.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:43.713 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:43.713 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:38:43.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:43.731 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:38:43.731 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:38:43.734 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:38:46.663 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:38:46.664 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:38:46.669 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:46.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:38:46.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 00(String)
09:38:46.680 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:38:52.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:38:52.116 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:38:52.132 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:02.114 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:02.114 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:02.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:12.114 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:12.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:12.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:22.117 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:22.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:22.133 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:32.116 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:32.117 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:32.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:42.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:42.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:42.132 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:39:52.118 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:39:52.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:39:52.135 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:02.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:02.119 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:02.133 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:12.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:12.121 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:12.135 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:19.477 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:40:19.478 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:40:19.483 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:19.487 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:40:19.487 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 00(String)
09:40:19.490 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:20.965 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:20.966 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44492(Long), N(String)
09:40:20.970 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:20.974 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:20.975 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44488(Long), N(String)
09:40:20.980 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:20.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:20.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44494(Long), N(String)
09:40:20.988 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:20.991 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:20.992 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44493(Long), N(String)
09:40:20.998 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:21.001 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:21.002 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44491(Long), N(String)
09:40:21.006 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:21.009 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:21.010 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44489(Long), N(String)
09:40:21.013 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:21.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:21.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44490(Long), N(String)
09:40:21.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:21.033 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:40:21.037 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:40:21.037 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:40:21.037 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 2018-01-28 09:40:20.962(Timestamp), 2018-01-28 09:43:20.962(Timestamp)
09:40:21.041 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:21.044 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:22.170 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:22.171 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:22.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:23.558 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:40:23.559 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:23.563 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:25.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:25.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:25.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:29.244 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:29.245 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:40:29.249 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:29.260 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:29.260 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:40:29.266 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:29.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:29.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:29.284 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:32.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:32.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:32.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:33.148 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:40:33.149 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:40:33.152 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:33.155 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:40:33.155 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 00(String)
09:40:33.160 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:34.117 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:34.117 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44500(Long), N(String)
09:40:34.121 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:34.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:34.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44499(Long), N(String)
09:40:34.131 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:34.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:34.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44498(Long), N(String)
09:40:34.161 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:34.167 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:40:34.168 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44497(Long), N(String)
09:40:34.173 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:34.188 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:40:34.192 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:40:34.193 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 2018-01-28 09:40:34.114(Timestamp), 2018-01-28 09:43:34.114(Timestamp)
09:40:34.193 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:40:34.196 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:34.198 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:40:35.523 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:40:35.524 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:35.529 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:40:37.620 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:37.621 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:37.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:37.656 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:37.656 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:37.661 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:42.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:42.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:42.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:43.026 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:40:43.027 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:43.036 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:40:44.021 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:44.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:44.025 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:44.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:44.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:44.048 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:45.754 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:40:45.755 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:45.759 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:40:46.855 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:46.856 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:46.860 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:46.880 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:46.881 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:46.884 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:48.219 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:40:48.220 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:48.226 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:40:52.124 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:40:52.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:40:52.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:40:53.247 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:53.248 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:53.259 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:40:53.276 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:40:53.277 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:40:53.281 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:02.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:02.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:02.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:10.058 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:10.059 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:10.066 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:41:11.210 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:11.210 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:11.213 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:11.231 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:11.232 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:11.235 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:12.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:12.125 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:12.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:12.715 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:12.715 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:12.721 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:41:13.836 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:13.837 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:13.845 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:13.866 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:13.867 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:13.871 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:20.144 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:20.145 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:20.149 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:41:22.126 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:22.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:22.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:22.636 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:22.636 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:22.687 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:41:23.458 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:23.459 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:23.467 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:23.483 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:23.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:23.492 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:28.095 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:41:28.096 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:41:28.099 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:29.545 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:41:29.548 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:29.554 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 2
09:41:29.569 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.569 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44492(String), 04941(String), T8(String), N(String), 1311                     (String)
09:41:29.572 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.573 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44492(Long), N(String), HANG(String)
09:41:29.577 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.584 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.584 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44488(String), 04941(String), T8(String), N(String), 0036                     (String)
09:41:29.590 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.590 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.591 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44488(Long), N(String), HANG(String)
09:41:29.594 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.601 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.602 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44494(String), 04941(String), T8(String), N(String), 0039                     (String)
09:41:29.608 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.609 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.609 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44494(Long), N(String), HANG(String)
09:41:29.612 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.624 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.625 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44493(String), 04941(String), T8(String), N(String), 0034                     (String)
09:41:29.630 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.631 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.631 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44493(Long), N(String), HANG(String)
09:41:29.634 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.641 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.642 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44491(String), 04941(String), T8(String), N(String), 0032                     (String)
09:41:29.645 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44491(Long), N(String), HANG(String)
09:41:29.650 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.665 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.667 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44489(String), 04941(String), T8(String), N(String), 1310                     (String)
09:41:29.670 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.671 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.671 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44489(Long), N(String), HANG(String)
09:41:29.675 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.684 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:29.685 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:29(String), 9999999(String), KVSP(String), 44490(String), 04941(String), T8(String), N(String), 0033                     (String)
09:41:29.690 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.691 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:29.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44490(Long), N(String), HANG(String)
09:41:29.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:29.708 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:41:29.711 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:41:29.721 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:32.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:32.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:32.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 4
09:41:32.153 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:32.153 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44500(Long), N(String), HANG(String)
09:41:32.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:32.173 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:32.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44499(Long), N(String), HANG(String)
09:41:32.178 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:32.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:32.182 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44498(Long), N(String), HANG(String)
09:41:32.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:32.191 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:32.191 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04941(String), 44497(Long), N(String), HANG(String)
09:41:32.194 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:32.199 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:41:32.199 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:32.202 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:41:32.210 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:41:32.210 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:41:32.213 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:38.337 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:38.337 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:41:38.340 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:38.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:38.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:41:38.353 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:38.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:38.363 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:38.367 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:40.507 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:40.508 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:40.512 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:42.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:42.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:42.144 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:43.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:43.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:41:43.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:43.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:43.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:41:43.396 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:43.404 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:43.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:43.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:45.141 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:45.141 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:41:45.145 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:45.153 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:45.154 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:41:45.158 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:45.167 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:45.167 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:45.171 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:46.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:46.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:41:46.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:46.495 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:46.496 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:41:46.499 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:46.506 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:46.507 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:46.510 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:47.634 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:47.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:41:47.638 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:47.645 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:47.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:41:47.650 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:47.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:47.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:47.662 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:52.028 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:41:52.028 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:41:52.036 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:52.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:41:52.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 00(String)
09:41:52.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:52.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:41:52.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:52.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:53.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:41:53.188 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44500(Long), N(String)
09:41:53.192 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:53.197 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:41:53.197 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44499(Long), N(String)
09:41:53.200 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:53.203 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:41:53.204 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44498(Long), N(String)
09:41:53.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:53.213 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:41:53.213 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04941(String), 44497(Long), N(String)
09:41:53.217 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:53.222 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:41:53.224 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:41:53.224 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), 2018-01-28 09:41:53.185(Timestamp), 2018-01-28 09:44:53.185(Timestamp)
09:41:53.224 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:41:53.226 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:53.230 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:54.035 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:41:54.036 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:41:54.039 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:54.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:41:54.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:54.980 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:41:55.956 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:41:55.957 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String), N(String), 00(String)
09:41:55.961 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:41:56.709 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:41:56.711 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04941(String)
09:41:56.716 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.725 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:56.728 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:56(String), 9999999(String), KVSP(String), 44500(String), 04941(String), T8(String), N(String), 1312                     (String)
09:41:56.732 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.733 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:56.734 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44500(Long), N(String), HANG(String)
09:41:56.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.747 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:56.749 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:56(String), 9999999(String), KVSP(String), 44499(String), 04941(String), T8(String), N(String), 0034                     (String)
09:41:56.752 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.753 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:56.754 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44499(Long), N(String), HANG(String)
09:41:56.757 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.765 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:56.765 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:56(String), 9999999(String), KVSP(String), 44498(String), 04941(String), T8(String), N(String), 0032                     (String)
09:41:56.769 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:56.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44498(Long), N(String), HANG(String)
09:41:56.774 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.781 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:41:56.781 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:41:56(String), 9999999(String), KVSP(String), 44497(String), 04941(String), T8(String), N(String), 0033                     (String)
09:41:56.784 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.784 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:41:56.785 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04941(String), 44497(Long), N(String), HANG(String)
09:41:56.788 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:41:56.796 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:41:56.797 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:41:56.800 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:42:00.677 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:42:00.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:42:00.681 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:42:00.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:42:00.690 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:42:00.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:42:02.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:02.127 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:02.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:42:12.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:12.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:12.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:42:22.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:22.128 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:22.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:42:32.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:32.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:32.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:42:42.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:42.131 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:42.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:42:52.129 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:42:52.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:42:52.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:02.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:02.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:02.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:12.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:12.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:12.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:22.131 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:22.132 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:22.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:32.133 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:32.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:32.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:42.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:42.135 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:42.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:43:52.134 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:43:52.135 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:43:52.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:02.136 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:02.136 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:02.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:12.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:12.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:12.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:22.136 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:22.137 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:22.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:25.878 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:25.879 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String)
09:44:25.883 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:25.891 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:25.892 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:44:25.895 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:32.138 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:32.139 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:32.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:36.667 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:44:36.667 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), N(String), 00(String)
09:44:36.670 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:36.674 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:44:36.675 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04944(String), 00(String)
09:44:36.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:42.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.005 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44476(Long), N(String), PREPRINT(String)
09:44:42.008 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.010 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.011 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44473(Long), N(String), PREPRINT(String)
09:44:42.013 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44475(Long), N(String), PREPRINT(String)
09:44:42.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.024 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.025 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44474(Long), N(String), PREPRINT(String)
09:44:42.027 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.030 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.030 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44471(Long), N(String), PREPRINT(String)
09:44:42.033 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.041 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.041 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44472(Long), N(String), PREPRINT(String)
09:44:42.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44467(Long), N(String), PREPRINT(String)
09:44:42.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.053 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.053 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44470(Long), N(String), PREPRINT(String)
09:44:42.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.059 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44468(Long), N(String), PREPRINT(String)
09:44:42.063 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:44:42.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04944(String), 44469(Long), N(String), PREPRINT(String)
09:44:42.071 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:44:42.079 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:44:42.079 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:44:42.081 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:42.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:42.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:42.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:46.319 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:46.320 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:44:46.323 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:46.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:46.952 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:44:46.960 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:47.799 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:44:47.800 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:47.804 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:44:49.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:49.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:44:49.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:50.263 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:44:50.264 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:44:50.267 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:44:52.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:44:52.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:44:52.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:02.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:02.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:02.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:12.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:12.140 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:12.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:22.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:22.141 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:22.169 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
09:45:22.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44512(Long), N(String), UNPRINT(String)
09:45:22.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.192 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44509(Long), N(String), UNPRINT(String)
09:45:22.197 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.206 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.207 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44510(Long), N(String), UNPRINT(String)
09:45:22.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.222 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44511(Long), N(String), UNPRINT(String)
09:45:22.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44506(Long), N(String), UNPRINT(String)
09:45:22.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.238 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.238 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44507(Long), N(String), UNPRINT(String)
09:45:22.244 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.248 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.248 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44508(Long), N(String), UNPRINT(String)
09:45:22.252 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44505(Long), N(String), UNPRINT(String)
09:45:22.261 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.265 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.266 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44503(Long), N(String), UNPRINT(String)
09:45:22.268 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.273 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:22.273 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04947(String), 44504(Long), N(String), UNPRINT(String)
09:45:22.277 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:22.288 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:45:22.289 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:45:22.293 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:22.299 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:22.300 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04947(String)
09:45:22.305 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:32.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:32.143 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:32.156 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:40.930 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:45:40.931 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04947(String), N(String), 00(String)
09:45:40.934 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:40.937 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:45:40.938 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04947(String), 00(String)
09:45:40.941 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:42.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:42.142 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:42.155 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:44.346 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.346 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44512(String), 04947(String), T6(String), N(String), 0049                     (String)
09:45:44.349 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.349 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.350 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44512(Long), N(String), PREPRINT(String)
09:45:44.353 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.359 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.359 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44509(String), 04947(String), T6(String), N(String), 0042                     (String)
09:45:44.362 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44509(Long), N(String), PREPRINT(String)
09:45:44.365 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.370 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.371 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44510(String), 04947(String), T6(String), N(String), 0043                     (String)
09:45:44.373 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.374 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.374 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44510(Long), N(String), PREPRINT(String)
09:45:44.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.386 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.386 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44511(String), 04947(String), T6(String), N(String), 1313                     (String)
09:45:44.389 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44511(Long), N(String), PREPRINT(String)
09:45:44.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.402 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.403 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44506(String), 04947(String), T6(String), N(String), 1311                     (String)
09:45:44.405 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44506(Long), N(String), PREPRINT(String)
09:45:44.409 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.415 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.415 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44507(String), 04947(String), T6(String), N(String), 1312                     (String)
09:45:44.419 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.419 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.420 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44507(Long), N(String), PREPRINT(String)
09:45:44.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.427 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.428 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44508(String), 04947(String), T6(String), N(String), 0039                     (String)
09:45:44.433 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44508(Long), N(String), PREPRINT(String)
09:45:44.437 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.442 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:44.442 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:44(String), 9999999(String), KVSP(String), 44505(String), 04947(String), T6(String), N(String), 0034                     (String)
09:45:44.445 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:44.445 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:44.445 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44505(Long), N(String), PREPRINT(String)
09:45:44.448 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:44.455 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:45:44.455 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:45:44.458 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:49.091 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:45:49.091 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04947(String), N(String), 00(String)
09:45:49.094 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:49.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:45:49.097 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04947(String), 00(String)
09:45:49.100 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:50.893 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:50.893 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:50(String), 9999999(String), KVSP(String), 44503(String), 04947(String), T6(String), N(String), 0032                     (String)
09:45:50.896 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:50.896 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:50.896 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44503(Long), N(String), PREPRINT(String)
09:45:50.899 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:50.906 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:45:50.906 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:45:50(String), 9999999(String), KVSP(String), 44504(String), 04947(String), T6(String), N(String), 0033                     (String)
09:45:50.909 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:45:50.910 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:45:50.910 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04947(String), 44504(Long), N(String), PREPRINT(String)
09:45:50.913 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:45:50.920 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:45:50.920 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:45:50.923 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:52.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:45:52.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:45:52.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:45:54.599 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:54.599 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:54.603 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:55.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:55.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:55.785 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:56.838 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:56.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:56.844 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:57.776 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:57.776 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:57.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:59.074 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:59.074 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:59.077 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:45:59.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:45:59.782 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:45:59.786 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:00.519 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:46:00.519 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:00.522 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:02.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:02.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:02.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:02.446 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:02.447 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:02.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:03.110 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:03.110 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:03.113 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:12.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:12.145 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:12.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:15.774 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:15.775 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:15.778 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:16.677 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:16.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:16.681 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:17.294 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:17.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:17.298 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:18.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:18.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:46:18.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:22.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:22.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:22.165 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:23.497 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:46:23.498 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), N(String), 00(String)
09:46:23.500 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:23.504 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:46:23.504 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), 00(String)
09:46:23.507 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:24.369 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.370 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44484(Long), N(String)
09:46:24.373 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.377 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.378 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44483(Long), N(String)
09:46:24.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.385 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44478(Long), N(String)
09:46:24.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.392 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44486(Long), N(String)
09:46:24.396 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.401 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.402 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44477(Long), N(String)
09:46:24.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.409 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44485(Long), N(String)
09:46:24.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.418 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44480(Long), N(String)
09:46:24.422 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44481(Long), N(String)
09:46:24.428 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.432 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44479(Long), N(String)
09:46:24.434 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.438 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:24.439 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04940(String), 44482(Long), N(String)
09:46:24.442 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.447 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:46:24.449 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:46:24.449 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), 2018-01-28 09:46:24.367(Timestamp), 2018-01-28 09:47:24.367(Timestamp)
09:46:24.449 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:46:24.452 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:24.455 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:32.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:32.154 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:32.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:42.146 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:42.147 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:42.161 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:51.065 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:46:51.065 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:51.068 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:52.151 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:46:52.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:52.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
09:46:52.181 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.182 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44519(Long), N(String), UNPRINT(String)
09:46:52.185 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.192 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44523(Long), N(String), UNPRINT(String)
09:46:52.195 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.199 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44521(Long), N(String), UNPRINT(String)
09:46:52.202 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44524(Long), N(String), UNPRINT(String)
09:46:52.208 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.211 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44518(Long), N(String), UNPRINT(String)
09:46:52.214 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.219 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44516(Long), N(String), UNPRINT(String)
09:46:52.223 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.226 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.227 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44522(Long), N(String), UNPRINT(String)
09:46:52.229 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.232 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.233 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44517(Long), N(String), UNPRINT(String)
09:46:52.236 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.239 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:46:52.239 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04948(String), 44520(Long), N(String), UNPRINT(String)
09:46:52.244 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:52.252 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:46:52.252 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:46:52.255 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:53.997 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:53.998 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String)
09:46:54.001 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:56.010 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:46:56.010 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String), N(String), 00(String)
09:46:56.013 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:56.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:46:56.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String), 00(String)
09:46:56.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:46:57.962 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:57.962 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44519(Long), N(String)
09:46:57.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:57.982 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:57.983 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44523(Long), N(String)
09:46:57.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:57.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:57.989 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44521(Long), N(String)
09:46:57.992 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:57.995 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:57.996 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44524(Long), N(String)
09:46:58.014 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.017 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:58.017 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44518(Long), N(String)
09:46:58.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:58.024 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44516(Long), N(String)
09:46:58.028 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.031 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:58.031 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44522(Long), N(String)
09:46:58.035 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:58.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44517(Long), N(String)
09:46:58.048 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.057 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:46:58.058 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04948(String), 44520(Long), N(String)
09:46:58.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.065 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:46:58.068 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:46:58.068 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String), 2018-01-28 09:46:57.959(Timestamp), 2018-01-28 09:49:57.959(Timestamp)
09:46:58.068 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:46:58.070 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:46:58.073 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:46:58.838 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:46:58.839 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:46:58.843 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
09:46:59.933 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:46:59.934 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String)
09:46:59.937 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:02.148 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:02.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:02.162 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:47:12.149 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:12.150 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:12.163 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:47:16.170 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:47:16.170 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String), N(String), 00(String)
09:47:16.174 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:16.984 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:16.985 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44519(String), 04948(String), T6(String), N(String), 0035                     (String)
09:47:16.989 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:16.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:16.990 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44519(Long), N(String), HANG(String)
09:47:16.993 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.000 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.001 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44523(String), 04948(String), T6(String), N(String), 1311                     (String)
09:47:17.003 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44523(Long), N(String), HANG(String)
09:47:17.007 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.012 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.012 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44521(String), 04948(String), T6(String), N(String), 0036                     (String)
09:47:17.017 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.018 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44521(Long), N(String), HANG(String)
09:47:17.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.028 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.028 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44524(String), 04948(String), T6(String), N(String), 0030                     (String)
09:47:17.031 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.032 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.033 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44524(Long), N(String), HANG(String)
09:47:17.036 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.041 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.042 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44518(String), 04948(String), T6(String), N(String), 0034                     (String)
09:47:17.044 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.045 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.045 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44518(Long), N(String), HANG(String)
09:47:17.048 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.055 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.055 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44516(String), 04948(String), T6(String), N(String), 0032                     (String)
09:47:17.058 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.058 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.059 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44516(Long), N(String), HANG(String)
09:47:17.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.067 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.067 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44522(String), 04948(String), T6(String), N(String), 1309                     (String)
09:47:17.070 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.071 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.072 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44522(Long), N(String), HANG(String)
09:47:17.076 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.081 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:17.082 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:16(String), 9999999(String), KVSP(String), 44517(String), 04948(String), T6(String), N(String), 0033                     (String)
09:47:17.085 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:17.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:17.086 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44517(Long), N(String), HANG(String)
09:47:17.090 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:17.096 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:47:17.096 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:47:17.099 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:21.057 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:47:21.058 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String), N(String), 00(String)
09:47:21.061 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:21.497 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:47:21.497 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04948(String)
09:47:21.500 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:21.510 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:47:21.510 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:47:21(String), 9999999(String), KVSP(String), 44520(String), 04948(String), T6(String), N(String), 1310                     (String)
09:47:21.513 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:21.513 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:21.513 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04948(String), 44520(Long), N(String), HANG(String)
09:47:21.516 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:47:21.523 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:47:21.524 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:47:21.529 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:22.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:22.159 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:22.190 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
09:47:22.196 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.196 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44484(Long), N(String), HANG(String)
09:47:22.203 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.214 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.215 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44483(Long), N(String), HANG(String)
09:47:22.228 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44478(Long), N(String), HANG(String)
09:47:22.251 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44486(Long), N(String), HANG(String)
09:47:22.282 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.285 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.285 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44477(Long), N(String), HANG(String)
09:47:22.288 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.292 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.293 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44485(Long), N(String), HANG(String)
09:47:22.298 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.301 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.301 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44480(Long), N(String), HANG(String)
09:47:22.304 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.308 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.308 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44481(Long), N(String), HANG(String)
09:47:22.313 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.317 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.317 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44479(Long), N(String), HANG(String)
09:47:22.320 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.325 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:47:22.326 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04940(String), 44482(Long), N(String), HANG(String)
09:47:22.329 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.334 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:47:22.334 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:22.337 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:47:22.343 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:47:22.343 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:47:22.345 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:26.037 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:26.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:26.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:26.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:26.912 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:26.917 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:27.623 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:27.623 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:27.626 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:28.334 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:47:28.334 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:28.339 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:47:30.733 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:30.734 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:30.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:31.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:31.295 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:31.299 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:32.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:32.152 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:32.167 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:47:32.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:32.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:32.186 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:33.562 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:33.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:33.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:34.483 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:34.484 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:34.487 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:35.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:47:35.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:47:35.289 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:47:42.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:42.153 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:42.168 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:47:52.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:47:52.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:47:52.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:02.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:02.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:02.191 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:12.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:12.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:12.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:22.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:22.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:22.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:32.185 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:32.185 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:32.199 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:42.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:42.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:42.191 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:48:52.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:48:52.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:48:52.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:02.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:02.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:02.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:12.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:12.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:12.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:22.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:22.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:22.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:32.177 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:32.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:32.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:42.178 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:42.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:42.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:49:52.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:49:52.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:49:52.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:02.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:02.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:02.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:12.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:12.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:12.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:22.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:22.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:22.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:32.179 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:32.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:32.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:42.180 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:42.181 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:42.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:52.182 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:50:52.182 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:50:52.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:50:57.404 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:50:57.405 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:50:57.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:50:58.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:50:58.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String)
09:50:58.329 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:51:02.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:02.183 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:02.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:51:12.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:12.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:12.218 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:51:22.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:22.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:22.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:51:32.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:32.186 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:32.199 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:51:35.599 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:51:35.600 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), N(String), 00(String)
09:51:35.603 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:51:35.606 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:51:35.607 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04940(String), 00(String)
09:51:35.610 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:51:40.640 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.641 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44484(Long), N(String), PREPRINT(String)
09:51:40.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.649 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.650 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44483(Long), N(String), PREPRINT(String)
09:51:40.655 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.658 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44478(Long), N(String), PREPRINT(String)
09:51:40.662 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.665 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44486(Long), N(String), PREPRINT(String)
09:51:40.670 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.672 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.673 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44477(Long), N(String), PREPRINT(String)
09:51:40.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.682 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44485(Long), N(String), PREPRINT(String)
09:51:40.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.688 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44480(Long), N(String), PREPRINT(String)
09:51:40.692 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.694 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44481(Long), N(String), PREPRINT(String)
09:51:40.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.700 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.700 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44479(Long), N(String), PREPRINT(String)
09:51:40.704 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:51:40.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04940(String), 44482(Long), N(String), PREPRINT(String)
09:51:40.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:51:40.717 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:51:40.717 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:51:40.720 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:51:42.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:42.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:42.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:51:52.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:51:52.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:51:52.203 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:02.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:02.198 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:02.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:12.188 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:12.189 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:12.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:22.191 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:22.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:22.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 8
09:52:22.220 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.221 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44535(Long), N(String), UNPRINT(String)
09:52:22.224 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.228 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.228 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44536(Long), N(String), UNPRINT(String)
09:52:22.231 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.234 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44534(Long), N(String), UNPRINT(String)
09:52:22.238 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.241 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44533(Long), N(String), UNPRINT(String)
09:52:22.247 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.253 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.254 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44532(Long), N(String), UNPRINT(String)
09:52:22.260 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.263 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.263 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44531(Long), N(String), UNPRINT(String)
09:52:22.266 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.269 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44529(Long), N(String), UNPRINT(String)
09:52:22.272 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.275 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:52:22.275 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04949(String), 44530(Long), N(String), UNPRINT(String)
09:52:22.279 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:22.286 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:52:22.287 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:52:22.295 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:22.295 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:52:22.296 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ====> Parameters: 04949(String)
09:52:22.299 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <====      Total: 1
09:52:32.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:32.193 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:32.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:40.368 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:52:40.369 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String), N(String), 00(String)
09:52:40.373 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:40.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:52:40.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String), 00(String)
09:52:40.382 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:41.159 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.159 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44535(Long), N(String)
09:52:41.162 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.165 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.166 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44536(Long), N(String)
09:52:41.172 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.177 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.177 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44534(Long), N(String)
09:52:41.180 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44533(Long), N(String)
09:52:41.189 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.192 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44532(Long), N(String)
09:52:41.196 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.201 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.202 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44531(Long), N(String)
09:52:41.205 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.208 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.208 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44529(Long), N(String)
09:52:41.211 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.214 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:52:41.215 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04949(String), 44530(Long), N(String)
09:52:41.218 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.224 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:52:41.226 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:52:41.226 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String), 2018-01-28 09:52:41.156(Timestamp), 2018-01-28 09:55:41.156(Timestamp)
09:52:41.226 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:52:41.228 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:52:41.231 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:41.801 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:52:41.801 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:41.806 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:42.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:42.192 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:42.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:52:43.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:52:43.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String)
09:52:43.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:52:52.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:52:52.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:52:52.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:02.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:02.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:02.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:05.130 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:53:05.131 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String), N(String), 00(String)
09:53:05.139 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:53:07.663 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.663 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44535(Long), N(String), HANG(String)
09:53:07.666 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.668 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.669 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44536(Long), N(String), HANG(String)
09:53:07.676 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.679 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.680 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44534(Long), N(String), HANG(String)
09:53:07.683 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.685 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44533(Long), N(String), HANG(String)
09:53:07.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44532(Long), N(String), HANG(String)
09:53:07.696 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.699 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44531(Long), N(String), HANG(String)
09:53:07.702 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.704 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.705 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44529(Long), N(String), HANG(String)
09:53:07.707 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:07.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:07.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44530(Long), N(String), HANG(String)
09:53:07.715 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:11.169 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:53:11.170 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String), N(String), 00(String)
09:53:11.172 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:53:12.194 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:12.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:12.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:13.249 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
09:53:13.250 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04949(String)
09:53:13.254 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.266 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.267 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44535(String), 04949(String), T7(String), N(String), 0042                     (String)
09:53:13.270 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.270 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.271 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44535(Long), N(String), HANG(String)
09:53:13.275 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.280 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.281 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44536(String), 04949(String), T7(String), N(String), 1313                     (String)
09:53:13.285 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.286 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44536(Long), N(String), HANG(String)
09:53:13.289 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.296 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.297 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44534(String), 04949(String), T7(String), N(String), 0035                     (String)
09:53:13.300 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.301 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.301 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44534(Long), N(String), HANG(String)
09:53:13.305 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.311 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.311 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44533(String), 04949(String), T7(String), N(String), 1311                     (String)
09:53:13.313 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.314 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44533(Long), N(String), HANG(String)
09:53:13.317 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.323 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.323 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44532(String), 04949(String), T7(String), N(String), 0039                     (String)
09:53:13.329 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.329 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.330 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44532(Long), N(String), HANG(String)
09:53:13.333 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.338 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.339 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44531(String), 04949(String), T7(String), N(String), 0034                     (String)
09:53:13.341 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.342 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.343 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44531(Long), N(String), HANG(String)
09:53:13.346 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.351 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.351 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44529(String), 04949(String), T7(String), N(String), 0032                     (String)
09:53:13.355 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.356 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.356 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44529(Long), N(String), HANG(String)
09:53:13.359 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.365 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:13.365 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:13(String), 9999999(String), KVSP(String), 44530(String), 04949(String), T7(String), N(String), 0033                     (String)
09:53:13.368 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:13.368 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:13.369 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44530(Long), N(String), HANG(String)
09:53:13.373 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:13.380 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:53:13.380 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:53:13.384 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:53:17.476 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.476 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44535(String), 04949(String), T7(String), N(String), 0042                     (String)
09:53:17.479 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.480 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.480 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44535(Long), N(String), HANG(String)
09:53:17.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.493 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.494 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44536(String), 04949(String), T7(String), N(String), 1313                     (String)
09:53:17.497 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.497 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.498 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44536(Long), N(String), HANG(String)
09:53:17.503 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.508 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.509 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44534(String), 04949(String), T7(String), N(String), 0035                     (String)
09:53:17.511 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.512 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.512 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44534(Long), N(String), HANG(String)
09:53:17.515 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.521 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.521 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44533(String), 04949(String), T7(String), N(String), 1311                     (String)
09:53:17.531 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.531 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.532 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44533(Long), N(String), HANG(String)
09:53:17.541 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.550 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.550 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44532(String), 04949(String), T7(String), N(String), 0039                     (String)
09:53:17.556 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44532(Long), N(String), HANG(String)
09:53:17.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.579 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.579 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44531(String), 04949(String), T7(String), N(String), 0034                     (String)
09:53:17.584 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.585 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.585 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44531(Long), N(String), HANG(String)
09:53:17.589 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.594 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.595 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44529(String), 04949(String), T7(String), N(String), 0032                     (String)
09:53:17.597 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44529(Long), N(String), HANG(String)
09:53:17.604 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.610 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
09:53:17.610 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 09:53:17(String), 9999999(String), KVSP(String), 44530(String), 04949(String), T7(String), N(String), 0033                     (String)
09:53:17.612 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:53:17.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:17.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04949(String), 44530(Long), N(String), HANG(String)
09:53:17.616 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:17.621 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:53:17.622 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:53:17.625 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:53:19.527 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.528 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44535(Long), N(String), HANG(String)
09:53:19.538 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.542 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.542 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44536(Long), N(String), HANG(String)
09:53:19.545 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.547 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.547 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44534(Long), N(String), HANG(String)
09:53:19.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.556 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.557 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44533(Long), N(String), HANG(String)
09:53:19.560 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.562 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44532(Long), N(String), HANG(String)
09:53:19.566 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.569 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.569 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44531(Long), N(String), HANG(String)
09:53:19.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.576 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.576 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44529(Long), N(String), HANG(String)
09:53:19.579 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:19.582 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:53:19.582 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: LEAVE(String), 04949(String), 44530(Long), N(String), HANG(String)
09:53:19.585 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
09:53:22.195 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:22.196 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:22.212 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:32.239 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:32.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:32.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:42.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:42.197 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:42.210 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:53:52.199 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:53:52.200 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:53:52.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:02.200 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:02.200 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:02.213 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:12.200 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:12.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:12.213 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:22.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:22.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:22.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:32.203 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:32.203 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:32.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:42.200 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:42.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:42.214 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:54:52.201 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:54:52.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:54:52.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:02.202 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:02.203 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:02.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:12.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:12.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:12.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:22.204 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:22.204 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:22.219 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:32.204 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:32.204 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:32.216 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:42.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:42.205 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:42.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:55:52.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:55:52.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:55:52.220 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:02.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:02.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:02.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:12.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:12.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:12.221 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:22.207 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:22.208 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:22.222 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:32.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:32.209 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:32.223 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:42.121 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:56:42.122 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:42.126 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:56:42.214 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:56:42.215 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:56:42.245 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:11.830 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:11.926 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:12.031 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:12.089 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:12.091 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:12.099 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:19.564 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:19.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:19.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:29.566 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:29.567 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:29.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:39.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:39.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:39.580 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:49.565 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:49.566 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:49.584 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:51.439 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:57:51.441 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:51.445 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:57:59.568 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:57:59.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:57:59.583 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:09.566 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:09.567 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:09.609 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
09:58:09.624 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.626 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44547(Long), N(String), UNPRINT(String)
09:58:09.631 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.647 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.648 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44546(Long), N(String), UNPRINT(String)
09:58:09.655 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.661 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.662 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44548(Long), N(String), UNPRINT(String)
09:58:09.666 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.670 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.671 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44545(Long), N(String), UNPRINT(String)
09:58:09.675 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.681 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.681 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44540(Long), N(String), UNPRINT(String)
09:58:09.686 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.693 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.694 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44544(Long), N(String), UNPRINT(String)
09:58:09.713 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.718 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.720 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44539(Long), N(String), UNPRINT(String)
09:58:09.725 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.729 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.730 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44543(Long), N(String), UNPRINT(String)
09:58:09.733 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.738 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.739 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44541(Long), N(String), UNPRINT(String)
09:58:09.744 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.747 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
09:58:09.748 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04950(String), 44542(Long), N(String), UNPRINT(String)
09:58:09.753 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:09.766 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:58:09.767 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:58:09.773 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:11.859 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:58:11.860 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String)
09:58:11.869 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:14.824 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:58:14.825 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String), N(String), 00(String)
09:58:14.828 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:14.832 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
09:58:14.833 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String), 00(String)
09:58:14.841 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:16.110 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.111 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44547(Long), N(String)
09:58:16.115 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.118 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44546(Long), N(String)
09:58:16.125 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.129 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.130 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44548(Long), N(String)
09:58:16.133 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.136 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.137 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44545(Long), N(String)
09:58:16.140 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.144 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.145 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44540(Long), N(String)
09:58:16.148 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.154 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.155 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44544(Long), N(String)
09:58:16.159 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.163 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44539(Long), N(String)
09:58:16.167 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.171 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.172 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44543(Long), N(String)
09:58:16.175 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.178 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.179 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44541(Long), N(String)
09:58:16.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.185 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
09:58:16.186 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04950(String), 44542(Long), N(String)
09:58:16.191 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.201 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
09:58:16.207 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
09:58:16.208 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
09:58:16.208 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String), 2018-01-28 09:58:16.107(Timestamp), 2018-01-28 10:01:16.107(Timestamp)
09:58:16.211 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:16.215 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
09:58:16.746 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
09:58:16.747 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:16.752 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:17.712 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
09:58:17.713 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String)
09:58:17.718 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:19.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:19.570 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:19.585 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:29.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:29.582 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:29.596 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:39.567 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:39.568 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:39.581 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:58:45.082 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
09:58:45.083 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04950(String), N(String), 00(String)
09:58:45.091 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
09:58:49.572 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:58:49.573 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:58:49.589 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:01.238 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:01.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:01.545 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:11.130 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:16.240 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:16.399 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:21.401 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:21.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:21.876 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:33.970 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:33.972 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:34.185 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
09:59:50.619 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
09:59:50.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
09:59:51.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:14.396 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:00:14.407 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:14.411 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:14.413 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:00:14(String), 9999999(String), KVSP(String), 44541(String), 04950(String), T7(String), N(String), 1310                     (String)
10:00:14.423 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:00:14.424 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:00:14.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04950(String), 44541(Long), N(String), HANG(String)
10:00:14.428 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:14.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:00:14.440 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:00:14.441 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:00:14(String), 9999999(String), KVSP(String), 44542(String), 04950(String), T7(String), N(String), 0033                     (String)
10:00:14.449 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:00:14.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:00:14.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04950(String), 44542(Long), N(String), HANG(String)
10:00:14.454 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:00:14.474 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:00:14.475 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:00:14.479 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:00:24.370 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:24.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:24.384 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:34.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:34.372 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:34.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:44.369 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:44.370 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:44.383 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:00:54.370 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:00:54.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:00:54.385 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:04.419 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:04.420 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:04.436 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:14.675 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:14.675 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:14.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:24.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:24.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:24.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:34.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:34.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:34.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:44.775 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:44.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:44.820 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:01:54.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:01:54.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:01:54.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:04.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:04.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:04.768 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:14.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:14.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:14.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:24.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:24.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:24.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:34.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:34.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:34.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:44.778 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:44.779 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:44.792 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:02:54.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:02:54.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:02:54.806 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:04.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:04.776 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:04.792 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:14.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:14.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:14.783 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:24.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:24.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:24.786 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:34.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:34.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:34.782 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:44.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:44.769 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:44.784 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:03:54.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:03:54.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:03:54.793 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:04.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:04.770 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:04.783 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:14.805 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:14.806 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:14.827 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:48.265 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:48.366 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:48.517 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:48.595 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:48.596 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:48.606 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:04:54.250 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:04:54.252 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:54.259 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:04:55.676 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:04:55.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:04:55.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:00.383 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:05:00.384 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:00.388 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:05:05.676 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:05.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:05.691 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:15.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:15.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:15.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:25.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:25.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:25.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:26.229 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:05:26.230 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:26.234 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:05:29.183 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:05:29.184 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:29.187 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:05:35.677 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:35.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:35.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:45.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:45.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:45.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:55.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:05:55.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:55.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:56.819 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:05:56.820 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:56.823 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:05:58.467 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:05:58.468 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:05:58.471 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:00.096 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:06:00.098 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:00.104 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:01.886 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:06:01.887 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:01.890 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:05.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:05.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:05.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:15.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:15.679 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:15.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:25.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:25.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:25.795 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 11
10:06:25.808 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.809 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44560(Long), N(String), UNPRINT(String)
10:06:25.814 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.818 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.819 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44561(Long), N(String), UNPRINT(String)
10:06:25.823 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.826 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.826 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44559(Long), N(String), UNPRINT(String)
10:06:25.829 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.834 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.835 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44553(Long), N(String), UNPRINT(String)
10:06:25.838 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.848 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.848 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44555(Long), N(String), UNPRINT(String)
10:06:25.851 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.855 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.855 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44557(Long), N(String), UNPRINT(String)
10:06:25.858 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.861 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.862 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44554(Long), N(String), UNPRINT(String)
10:06:25.865 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.870 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.871 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44551(Long), N(String), UNPRINT(String)
10:06:25.875 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.879 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.879 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44558(Long), N(String), UNPRINT(String)
10:06:25.885 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.889 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.889 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44552(Long), N(String), UNPRINT(String)
10:06:25.892 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.895 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:06:25.896 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04951(String), 44556(Long), N(String), UNPRINT(String)
10:06:25.899 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:06:25.918 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:06:25.921 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:06:25.927 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:26.091 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:26.094 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:26.106 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:35.680 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:35.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:35.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:45.680 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:45.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:45.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:55.680 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:06:55.680 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:06:55.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:06:56.774 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:56.775 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:56.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:57.326 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:57.327 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:57.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:57.751 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:57.752 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:57.756 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:58.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:58.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:58.026 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:58.341 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:58.342 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:58.348 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:58.631 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:58.632 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:58.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:58.903 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:58.904 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:58.910 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:59.155 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:59.156 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:59.160 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:59.363 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:59.364 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:59.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:59.635 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:59.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:59.641 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:06:59.884 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:06:59.885 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:06:59.889 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:00.170 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:00.171 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:00.179 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:00.490 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:00.491 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:00.494 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:00.762 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:00.764 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:00.770 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:01.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:01.017 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:01.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:01.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:01.377 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:01.382 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:05.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:05.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:05.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:08.191 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:08.192 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:08.195 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:08.591 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:08.591 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:08.595 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:09.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:09.051 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:09.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:09.351 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:09.351 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:09.356 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:09.880 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:09.880 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:09.884 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:10.174 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:10.175 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:10.178 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:10.863 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:10.864 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:10.868 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:11.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:11.194 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:11.199 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:15.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:15.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:15.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:25.680 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:25.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:25.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:26.897 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:07:26.898 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String), N(String), 00(String)
10:07:26.901 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:26.904 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:07:26.905 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String), 00(String)
10:07:26.909 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:27.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44560(Long), N(String)
10:07:27.854 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.857 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.858 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44561(Long), N(String)
10:07:27.862 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.867 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.868 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44559(Long), N(String)
10:07:27.871 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.875 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.875 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44553(Long), N(String)
10:07:27.881 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.884 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.886 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44555(Long), N(String)
10:07:27.891 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.894 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.895 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44557(Long), N(String)
10:07:27.902 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.905 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44554(Long), N(String)
10:07:27.911 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.914 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44551(Long), N(String)
10:07:27.920 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.923 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.924 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44558(Long), N(String)
10:07:27.929 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.932 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.933 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44552(Long), N(String)
10:07:27.941 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.944 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:07:27.945 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04951(String), 44556(Long), N(String)
10:07:27.949 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:27.957 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:07:27.959 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:07:27.959 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:07:27.959 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String), 2018-01-28 10:07:27.846(Timestamp), 2018-01-28 10:10:27.846(Timestamp)
10:07:27.962 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:27.965 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:07:28.622 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:07:28.622 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:28.626 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:29.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:07:29.481 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:07:29.485 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:07:35.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:35.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:35.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:45.686 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:45.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:45.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:07:55.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:07:55.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:07:55.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:05.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:05.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:05.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:15.682 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:15.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:15.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:25.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:25.684 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:25.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:35.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:35.683 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:35.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:37.701 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:37.702 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:37.706 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:40.389 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:40.390 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:40.393 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:42.261 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:42.261 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:42.266 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:43.750 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:43.751 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:43.761 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:45.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:45.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:45.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:46.109 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:46.110 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:46.115 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:55.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:08:55.734 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:55.886 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:08:58.670 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:08:58.670 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:08:58.674 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:08:59.663 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:08:59.664 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:08:59.667 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:09:05.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:05.691 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:05.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:13.456 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:09:13.456 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String), N(String), 00(String)
10:09:13.461 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:09:15.810 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:15.819 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:17.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:19.369 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.370 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44560(String), 04951(String), T6(String), N(String), 0042                     (String)
10:09:19.374 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.375 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.375 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44560(Long), N(String), HANG(String)
10:09:19.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.385 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.386 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44561(String), 04951(String), T6(String), N(String), 0043                     (String)
10:09:19.390 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.391 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.392 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44561(Long), N(String), HANG(String)
10:09:19.395 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.404 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.405 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44559(String), 04951(String), T6(String), N(String), 1311                     (String)
10:09:19.408 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.411 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44559(Long), N(String), HANG(String)
10:09:19.416 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.426 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.427 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44553(String), 04951(String), T6(String), N(String), 0036                     (String)
10:09:19.431 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.432 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.433 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44553(Long), N(String), HANG(String)
10:09:19.437 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.443 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.444 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44555(String), 04951(String), T6(String), N(String), 0030                     (String)
10:09:19.448 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.449 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.450 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44555(Long), N(String), HANG(String)
10:09:19.458 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.464 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.466 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44557(String), 04951(String), T6(String), N(String), 0034                     (String)
10:09:19.469 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.472 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.473 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44557(Long), N(String), HANG(String)
10:09:19.477 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.486 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.486 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44554(String), 04951(String), T6(String), N(String), 0031                     (String)
10:09:19.491 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.492 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.493 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44554(Long), N(String), HANG(String)
10:09:19.497 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.506 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:19.507 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:19(String), 9999999(String), KVSP(String), 44551(String), 04951(String), T6(String), N(String), 1309                     (String)
10:09:19.510 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:19.511 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:19.512 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44551(Long), N(String), HANG(String)
10:09:19.520 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:19.554 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:09:19.555 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:09:19.559 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:09:21.915 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:09:21.916 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String), N(String), 00(String)
10:09:21.919 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:09:22.719 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:09:22.720 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04951(String)
10:09:22.724 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:23.219 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:23.220 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:23(String), 9999999(String), KVSP(String), 44558(String), 04951(String), T6(String), N(String), 0032                     (String)
10:09:23.223 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:23.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:23.224 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44558(Long), N(String), HANG(String)
10:09:23.229 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:23.236 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:23.236 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:23(String), 9999999(String), KVSP(String), 44552(String), 04951(String), T6(String), N(String), 1310                     (String)
10:09:23.239 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:23.239 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:23.240 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44552(Long), N(String), HANG(String)
10:09:23.244 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:23.249 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:09:23.250 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:09:23(String), 9999999(String), KVSP(String), 44556(String), 04951(String), T6(String), N(String), 0033                     (String)
10:09:23.253 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:09:23.253 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:09:23.254 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04951(String), 44556(Long), N(String), HANG(String)
10:09:23.257 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:09:23.264 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:09:23.265 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:09:23.268 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:09:25.686 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:25.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:25.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:35.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:35.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:35.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:45.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:45.688 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:45.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:09:55.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:09:55.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:09:55.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:05.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:05.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:05.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:15.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:15.688 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:15.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:25.688 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:25.688 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:25.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:35.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:35.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:35.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:45.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:45.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:45.785 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:10:55.689 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:10:55.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:10:55.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:05.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:05.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:05.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:15.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:15.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:15.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:25.690 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:25.691 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:25.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:35.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:35.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:35.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:45.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:45.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:45.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:11:55.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:11:55.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:11:55.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:05.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:05.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:05.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:15.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:15.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:15.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:25.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:25.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:25.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:35.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:35.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:35.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:45.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:45.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:45.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:12:55.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:12:55.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:12:55.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:05.728 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:05.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:05.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:15.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:15.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:15.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:25.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:25.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:25.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:35.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:35.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:35.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:45.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:45.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:45.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:13:55.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:13:55.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:13:55.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:05.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:05.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:05.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:15.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:15.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:15.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:25.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:25.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:25.718 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:35.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:35.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:35.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:45.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:45.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:45.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:14:55.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:14:55.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:14:55.720 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:05.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:05.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:05.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:15.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:15.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:15.723 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:25.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:25.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:25.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:35.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:35.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:35.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:45.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:45.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:45.718 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:15:55.718 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:15:55.719 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:15:55.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:05.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:05.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:05.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:15.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:15.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:15.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:25.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:25.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:25.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:35.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:35.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:35.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:45.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:45.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:45.719 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:16:55.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:16:55.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:16:55.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:05.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:05.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:05.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:15.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:15.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:15.723 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:25.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:25.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:25.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:35.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:35.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:35.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:45.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:45.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:45.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:17:55.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:17:55.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:17:55.720 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:05.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:05.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:05.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:15.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:15.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:15.718 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:25.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:25.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:25.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:35.704 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:35.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:35.718 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:45.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:45.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:45.720 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:18:55.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:18:55.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:18:55.722 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:05.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:05.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:05.720 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:15.706 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:15.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:15.720 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:25.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:25.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:25.725 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:35.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:35.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:35.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:45.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:45.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:45.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:19:55.707 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:19:55.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:19:55.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:05.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:05.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:05.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:15.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:15.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:15.722 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:25.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:25.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:25.726 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:35.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:35.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:35.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:45.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:45.717 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:45.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:20:55.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:20:55.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:20:55.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:05.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:05.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:05.727 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:15.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:15.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:15.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:25.712 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:25.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:25.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:35.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:35.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:35.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:45.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:45.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:45.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:21:55.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:21:55.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:21:55.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:05.729 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:05.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:05.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:15.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:15.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:15.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:25.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:25.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:25.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:35.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:35.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:35.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:45.731 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:45.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:45.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:22:55.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:22:55.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:22:55.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:05.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:05.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:05.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:15.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:15.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:15.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:25.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:25.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:25.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:35.732 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:35.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:35.746 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:45.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:45.733 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:45.747 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:23:55.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:23:55.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:23:55.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:05.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:05.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:05.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:15.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:15.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:15.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:25.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:25.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:25.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:35.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:35.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:35.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:45.734 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:45.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:45.748 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:24:55.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:24:55.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:24:55.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:05.735 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:05.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:05.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:15.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:15.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:15.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:25.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:25.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:25.752 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:35.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:35.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:35.749 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:45.736 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:45.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:45.750 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:25:55.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:25:55.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:25:55.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:05.737 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:05.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:05.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:15.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:15.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:15.751 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:25.738 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:25.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:25.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:35.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:35.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:35.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:45.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:45.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:45.767 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:26:55.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:26:55.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:26:55.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:05.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:05.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:05.753 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:15.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:15.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:15.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:25.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:25.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:25.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:35.740 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:35.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:35.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:45.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:45.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:45.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:27:55.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:27:55.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:27:55.757 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:05.741 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:05.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:05.754 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:15.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:15.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:15.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:25.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:25.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:25.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:35.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:35.743 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:35.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:45.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:45.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:45.773 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:28:55.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:28:55.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:28:55.760 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:05.748 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:05.748 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:05.771 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:15.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:15.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:15.758 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:29:25.744 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:29:25.745 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:29:25.759 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:09.068 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:09.206 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:09.447 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:09.519 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:09.520 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:09.617 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:16.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:16.328 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:16.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:26.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:26.327 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:26.376 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
10:30:26.392 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.394 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44568(Long), N(String), UNPRINT(String)
10:30:26.399 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.403 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.404 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44572(Long), N(String), UNPRINT(String)
10:30:26.410 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.414 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.415 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44566(Long), N(String), UNPRINT(String)
10:30:26.419 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.423 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.425 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44567(Long), N(String), UNPRINT(String)
10:30:26.429 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.432 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.433 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44571(Long), N(String), UNPRINT(String)
10:30:26.437 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.441 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.442 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44564(Long), N(String), UNPRINT(String)
10:30:26.446 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.450 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.451 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44570(Long), N(String), UNPRINT(String)
10:30:26.455 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.459 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.461 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44565(Long), N(String), UNPRINT(String)
10:30:26.464 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.469 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:30:26.470 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04952(String), 44569(Long), N(String), UNPRINT(String)
10:30:26.473 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:26.497 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:30:26.503 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:30:26.511 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:30:26.844 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:30:26.846 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String)
10:30:26.854 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:30:36.329 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:36.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:36.349 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:39.603 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:30:39.604 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String), N(String), 00(String)
10:30:39.609 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:39.612 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:30:39.613 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String), 00(String)
10:30:39.618 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:40.801 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:40.804 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44568(Long), N(String)
10:30:40.808 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:40.812 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:40.813 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44572(Long), N(String)
10:30:40.817 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:40.821 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:40.822 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44566(Long), N(String)
10:30:40.826 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:40.834 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:40.835 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44567(Long), N(String)
10:30:40.839 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:40.845 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:40.847 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44571(Long), N(String)
10:30:40.850 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:40.854 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:41.194 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44564(Long), N(String)
10:30:41.198 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:41.207 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:41.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44570(Long), N(String)
10:30:41.212 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:41.216 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:41.218 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44565(Long), N(String)
10:30:41.221 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:41.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:30:41.227 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04952(String), 44569(Long), N(String)
10:30:41.230 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:41.242 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:30:41.243 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String), 2018-01-28 10:30:40.797(Timestamp), 2018-01-28 10:33:40.797(Timestamp)
10:30:41.248 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:30:41.258 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:30:41.259 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:30:41.262 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:30:42.104 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:30:42.106 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:42.111 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:30:43.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:30:43.016 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String)
10:30:43.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:30:46.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:46.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:46.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:56.330 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:30:56.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:30:56.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:30:58.327 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:30:58.328 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String), N(String), 00(String)
10:30:58.331 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:31:00.973 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:00.974 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44568(String), 04952(String), T6(String), N(String), 0035                     (String)
10:31:00.978 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:00.980 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:00.981 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44568(Long), N(String), HANG(String)
10:31:00.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:00.992 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:00.993 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44572(String), 04952(String), T6(String), N(String), 1312                     (String)
10:31:00.997 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:00.999 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.001 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44572(Long), N(String), HANG(String)
10:31:01.004 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.012 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.013 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44566(String), 04952(String), T6(String), N(String), 0036                     (String)
10:31:01.018 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.019 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.020 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44566(Long), N(String), HANG(String)
10:31:01.024 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.030 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.031 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44567(String), 04952(String), T6(String), N(String), 0030                     (String)
10:31:01.036 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.037 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44567(Long), N(String), HANG(String)
10:31:01.042 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.049 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.050 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44571(String), 04952(String), T6(String), N(String), 0034                     (String)
10:31:01.054 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.055 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.056 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44571(Long), N(String), HANG(String)
10:31:01.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.066 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.068 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44564(String), 04952(String), T6(String), N(String), 1309                     (String)
10:31:01.072 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.074 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44564(Long), N(String), HANG(String)
10:31:01.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.084 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.085 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44570(String), 04952(String), T6(String), N(String), 0032                     (String)
10:31:01.088 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44570(Long), N(String), HANG(String)
10:31:01.094 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.101 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:01.101 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:00(String), 9999999(String), KVSP(String), 44565(String), 04952(String), T6(String), N(String), 1310                     (String)
10:31:01.105 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:01.106 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:01.106 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44565(Long), N(String), HANG(String)
10:31:01.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:01.121 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:31:01.121 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:31:01.128 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:31:06.331 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:06.332 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:06.345 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:16.332 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:16.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:16.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:26.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:26.333 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:26.346 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:34.174 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:31:34.175 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String), N(String), 00(String)
10:31:34.181 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:31:36.046 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:31:36.047 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04952(String)
10:31:36.049 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:36.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:36.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:36.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:36.715 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:31:36.716 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:31:36(String), 9999999(String), KVSP(String), 44569(String), 04952(String), T6(String), N(String), 0033                     (String)
10:31:36.719 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:31:36.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:31:36.720 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04952(String), 44569(Long), N(String), HANG(String)
10:31:36.723 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:31:36.732 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:31:36.732 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:31:36.736 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:31:46.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:46.337 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:46.352 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:31:56.335 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:31:56.336 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:31:56.350 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:38.123 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:38.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:38.396 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:38.495 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:38.496 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:38.506 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:45.232 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:45.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:45.300 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
10:32:45.316 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.318 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44583(Long), N(String), UNPRINT(String)
10:32:45.322 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.327 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.328 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44584(Long), N(String), UNPRINT(String)
10:32:45.333 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.336 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.337 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44581(Long), N(String), UNPRINT(String)
10:32:45.340 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.343 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.344 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44582(Long), N(String), UNPRINT(String)
10:32:45.351 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.354 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.354 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44579(Long), N(String), UNPRINT(String)
10:32:45.358 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.361 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.362 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44580(Long), N(String), UNPRINT(String)
10:32:45.367 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.371 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.372 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44575(Long), N(String), UNPRINT(String)
10:32:45.375 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.378 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.379 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44578(Long), N(String), UNPRINT(String)
10:32:45.383 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.387 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.388 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44576(Long), N(String), UNPRINT(String)
10:32:45.391 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:32:45.395 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04953(String), 44577(Long), N(String), UNPRINT(String)
10:32:45.398 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:45.420 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:32:45.423 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:32:45.429 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:45.752 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:45.757 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:45.764 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:52.076 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:52.077 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:52.083 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:52.427 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:52.427 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:52.433 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:52.630 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:52.631 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:52.638 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:52.976 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:52.977 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:52.983 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:53.262 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:53.263 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:53.268 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:53.521 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:53.522 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:53.529 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:53.814 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:53.816 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:53.823 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:54.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:32:54.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:32:54.082 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:55.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:32:55.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:32:55.250 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:56.943 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:32:56.944 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String), N(String), 00(String)
10:32:56.948 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:56.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:32:56.953 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String), 00(String)
10:32:56.957 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:32:57.678 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.679 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44583(Long), N(String)
10:32:57.683 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.687 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44584(Long), N(String)
10:32:57.693 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.697 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.698 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44581(Long), N(String)
10:32:57.706 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44582(Long), N(String)
10:32:57.714 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.717 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.718 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44579(Long), N(String)
10:32:57.721 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.724 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.725 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44580(Long), N(String)
10:32:57.729 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.732 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.733 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44575(Long), N(String)
10:32:57.737 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.745 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.746 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44578(Long), N(String)
10:32:57.749 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.756 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.756 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44576(Long), N(String)
10:32:57.760 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.765 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:32:57.765 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04953(String), 44577(Long), N(String)
10:32:57.769 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:32:57.779 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:32:57.781 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:32:57.781 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:32:57.781 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String), 2018-01-28 10:32:57.675(Timestamp), 2018-01-28 10:35:57.675(Timestamp)
10:32:57.786 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:32:57.791 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:05.235 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:05.236 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:05.252 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:07.183 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:33:07.184 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:07.190 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:08.254 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:33:08.255 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:33:08.258 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:14.705 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:33:14.705 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:14.709 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:15.233 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:15.234 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:15.253 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:16.963 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:33:16.963 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:16.967 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:18.134 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:33:18.134 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:33:18.138 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:23.198 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:33:23.198 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String), N(String), 00(String)
10:33:23.216 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:33:25.882 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:25.883 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:26.214 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:44.916 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:33:44.917 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:33:45.091 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:33:45.802 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:45.806 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44583(String), 04953(String), T6(String), N(String), 0042                     (String)
10:33:45.811 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:45.923 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:45.926 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44583(Long), N(String), HANG(String)
10:33:45.940 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.000 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.001 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44584(String), 04953(String), T6(String), N(String), 0043                     (String)
10:33:49.007 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.008 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.009 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44584(Long), N(String), HANG(String)
10:33:49.012 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.019 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.020 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44581(String), 04953(String), T6(String), N(String), 1311                     (String)
10:33:49.023 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.024 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44581(Long), N(String), HANG(String)
10:33:49.027 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.033 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.034 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44582(String), 04953(String), T6(String), N(String), 1312                     (String)
10:33:49.038 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.040 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44582(Long), N(String), HANG(String)
10:33:49.044 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.051 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.052 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44579(String), 04953(String), T6(String), N(String), 0036                     (String)
10:33:49.058 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.059 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44579(Long), N(String), HANG(String)
10:33:49.064 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.070 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.071 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44580(String), 04953(String), T6(String), N(String), 0034                     (String)
10:33:49.074 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.075 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.076 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44580(Long), N(String), HANG(String)
10:33:49.079 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.085 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.085 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44575(String), 04953(String), T6(String), N(String), 0032                     (String)
10:33:49.088 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44575(Long), N(String), HANG(String)
10:33:49.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.098 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:33:49.099 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:33:32(String), 9999999(String), KVSP(String), 44578(String), 04953(String), T6(String), N(String), 1309                     (String)
10:33:49.102 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:33:49.103 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:33:49.104 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44578(Long), N(String), HANG(String)
10:33:49.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:33:49.184 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:33:49.184 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:33:49.413 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:34:03.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:03.511 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:03.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:13.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:13.158 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:13.174 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:17.477 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:34:17.478 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String), N(String), 00(String)
10:34:17.481 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:34:18.161 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:34:18.162 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04953(String)
10:34:18.165 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:34:25.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:25.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:25.742 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:36.269 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:36.434 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:36.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:42.328 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:34:42.330 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:34:39(String), 9999999(String), KVSP(String), 44576(String), 04953(String), T6(String), N(String), 0033                     (String)
10:34:42.333 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:34:42.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:34:42.335 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44576(Long), N(String), HANG(String)
10:34:42.338 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:34:42.346 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:34:42.347 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:34:39(String), 9999999(String), KVSP(String), 44577(String), 04953(String), T6(String), N(String), 1310                     (String)
10:34:42.353 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:34:42.354 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:34:42.355 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04953(String), 44577(Long), N(String), HANG(String)
10:34:42.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:34:42.374 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:34:42.375 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:34:42.379 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:34:46.016 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:46.016 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:46.029 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:46.354 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:34:46.354 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:46.357 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:34:56.020 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:34:56.021 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:34:56.034 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:03.549 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:35:03.549 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:03.554 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:06.018 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:06.019 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:06.054 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:16.024 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:16.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:16.058 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:26.019 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:26.019 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:26.067 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
10:35:26.072 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.074 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44596(Long), N(String), UNPRINT(String)
10:35:26.079 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.090 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.091 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44593(Long), N(String), UNPRINT(String)
10:35:26.096 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.105 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.106 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44595(Long), N(String), UNPRINT(String)
10:35:26.110 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.119 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.120 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44592(Long), N(String), UNPRINT(String)
10:35:26.126 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.129 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44590(Long), N(String), UNPRINT(String)
10:35:26.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.138 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.139 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44594(Long), N(String), UNPRINT(String)
10:35:26.142 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.146 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.146 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44589(Long), N(String), UNPRINT(String)
10:35:26.149 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.153 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.153 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44587(Long), N(String), UNPRINT(String)
10:35:26.156 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.162 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.162 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44588(Long), N(String), UNPRINT(String)
10:35:26.165 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.168 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:26.169 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44591(Long), N(String), UNPRINT(String)
10:35:26.174 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:26.187 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:35:26.188 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:35:26.192 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:36.020 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:36.021 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:36.052 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 10
10:35:36.056 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.056 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44603(Long), N(String), UNPRINT(String)
10:35:36.061 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.067 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.067 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44606(Long), N(String), UNPRINT(String)
10:35:36.070 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.074 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.075 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44605(Long), N(String), UNPRINT(String)
10:35:36.078 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.083 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.084 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44602(Long), N(String), UNPRINT(String)
10:35:36.089 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.092 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.093 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44601(Long), N(String), UNPRINT(String)
10:35:36.096 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.099 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.099 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44604(Long), N(String), UNPRINT(String)
10:35:36.102 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.107 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.108 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44600(Long), N(String), UNPRINT(String)
10:35:36.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.114 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.115 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44597(Long), N(String), UNPRINT(String)
10:35:36.120 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.123 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.124 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44598(Long), N(String), UNPRINT(String)
10:35:36.127 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.131 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:35:36.132 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04955(String), 44599(Long), N(String), UNPRINT(String)
10:35:36.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:36.144 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:35:36.145 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:35:36.148 [pool-3-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:36.208 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:35:36.209 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:35:36.212 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:36.222 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:35:36.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String)
10:35:36.229 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:38.212 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:35:38.212 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:35:38.216 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:38.219 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:35:38.220 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), 00(String)
10:35:38.223 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:39.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44596(Long), N(String)
10:35:39.064 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.068 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44593(Long), N(String)
10:35:39.071 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.077 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.078 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44595(Long), N(String)
10:35:39.081 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.084 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44592(Long), N(String)
10:35:39.089 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.092 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44590(Long), N(String)
10:35:39.095 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.098 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.099 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44594(Long), N(String)
10:35:39.102 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.105 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.105 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44589(Long), N(String)
10:35:39.109 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.112 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.113 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44587(Long), N(String)
10:35:39.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44588(Long), N(String)
10:35:39.124 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:39.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44591(Long), N(String)
10:35:39.132 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.141 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:35:39.161 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:35:39.161 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), 2018-01-28 10:35:39.058(Timestamp), 2018-01-28 10:38:39.058(Timestamp)
10:35:39.161 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:35:39.164 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:39.166 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:40.309 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:35:40.309 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String), N(String), 00(String)
10:35:40.318 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:40.324 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:35:40.325 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String), 00(String)
10:35:40.329 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:41.013 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.014 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44603(Long), N(String)
10:35:41.017 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.022 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.023 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44606(Long), N(String)
10:35:41.026 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.029 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44605(Long), N(String)
10:35:41.035 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.038 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.039 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44602(Long), N(String)
10:35:41.043 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.046 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.047 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44601(Long), N(String)
10:35:41.050 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.053 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.054 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44604(Long), N(String)
10:35:41.057 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.060 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.061 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44600(Long), N(String)
10:35:41.064 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.069 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.070 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44597(Long), N(String)
10:35:41.073 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.076 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.077 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44598(Long), N(String)
10:35:41.085 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.100 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:35:41.101 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04955(String), 44599(Long), N(String)
10:35:41.104 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.109 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:35:41.111 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:35:41.111 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String), 2018-01-28 10:35:41.01(Timestamp), 2018-01-28 10:38:41.01(Timestamp)
10:35:41.112 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:35:41.114 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:35:41.120 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:35:46.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:46.026 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:46.040 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:35:56.021 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:35:56.022 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:35:56.105 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:06.023 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:06.023 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:06.038 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:13.490 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:36:13.490 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:13.494 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 2
10:36:14.361 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:36:14.362 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String)
10:36:14.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:15.973 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:36:15.974 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String), N(String), 00(String)
10:36:15.977 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:16.022 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:16.022 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:16.036 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:20.326 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.327 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44603(String), 04955(String), T7(String), N(String), 0042                     (String)
10:36:20.330 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.331 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44603(Long), N(String), HANG(String)
10:36:20.334 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.339 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.340 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44606(String), 04955(String), T7(String), N(String), 0047                     (String)
10:36:20.344 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.344 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44606(Long), N(String), HANG(String)
10:36:20.347 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.355 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.355 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44605(String), 04955(String), T7(String), N(String), 1313                     (String)
10:36:20.358 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.358 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.359 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44605(Long), N(String), HANG(String)
10:36:20.361 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.367 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.368 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44602(String), 04955(String), T7(String), N(String), 1311                     (String)
10:36:20.371 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.371 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44602(Long), N(String), HANG(String)
10:36:20.374 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.379 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.380 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44601(String), 04955(String), T7(String), N(String), 1312                     (String)
10:36:20.382 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.383 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.383 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44601(Long), N(String), HANG(String)
10:36:20.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.393 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.393 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44604(String), 04955(String), T7(String), N(String), 0040                     (String)
10:36:20.399 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.399 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.400 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44604(Long), N(String), HANG(String)
10:36:20.408 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.413 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.414 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44600(String), 04955(String), T7(String), N(String), 0034                     (String)
10:36:20.416 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.417 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.417 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44600(Long), N(String), HANG(String)
10:36:20.420 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.425 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:20.426 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:20(String), 9999999(String), KVSP(String), 44597(String), 04955(String), T7(String), N(String), 0032                     (String)
10:36:20.428 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:20.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:20.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44597(Long), N(String), HANG(String)
10:36:20.432 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:20.438 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:20.438 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:20.441 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:23.004 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:36:23.005 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String), N(String), 00(String)
10:36:23.008 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:24.351 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:36:24.352 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04955(String)
10:36:24.354 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:24.363 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:24.363 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:24(String), 9999999(String), KVSP(String), 44598(String), 04955(String), T7(String), N(String), 0033                     (String)
10:36:24.366 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:24.366 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:24.367 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44598(Long), N(String), HANG(String)
10:36:24.369 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:24.377 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:24.377 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:24(String), 9999999(String), KVSP(String), 44599(String), 04955(String), T7(String), N(String), 1310                     (String)
10:36:24.381 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:24.381 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:24.382 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04955(String), 44599(Long), N(String), HANG(String)
10:36:24.386 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:36:24.395 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:24.395 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:24.402 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:26.026 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:26.026 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:26.040 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:26.063 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:36:26.063 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:26.068 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:26.824 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:36:26.825 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:36:26.828 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:30.396 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:36:30.397 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:36:30.399 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:31.112 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.112 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44596(String), 04954(String), T6(String), N(String), 0041                     (String)
10:36:31.115 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.116 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44596(Long), N(String), HANG(String)
10:36:31.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.124 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.124 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44593(String), 04954(String), T6(String), N(String), 0042                     (String)
10:36:31.127 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44593(Long), N(String), HANG(String)
10:36:31.130 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.135 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.136 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44595(String), 04954(String), T6(String), N(String), 0035                     (String)
10:36:31.138 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.138 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.139 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44595(Long), N(String), HANG(String)
10:36:31.143 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.150 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.151 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44592(String), 04954(String), T6(String), N(String), 1311                     (String)
10:36:31.154 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.154 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.154 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44592(Long), N(String), HANG(String)
10:36:31.161 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.166 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.167 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44590(String), 04954(String), T6(String), N(String), 0036                     (String)
10:36:31.169 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.169 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.170 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44590(Long), N(String), HANG(String)
10:36:31.173 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.178 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.178 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44594(String), 04954(String), T6(String), N(String), 0039                     (String)
10:36:31.181 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.181 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44594(Long), N(String), HANG(String)
10:36:31.184 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.189 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.190 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44589(String), 04954(String), T6(String), N(String), 0034                     (String)
10:36:31.192 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.193 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44589(Long), N(String), HANG(String)
10:36:31.203 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.211 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:31.211 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:31(String), 9999999(String), KVSP(String), 44587(String), 04954(String), T6(String), N(String), 0032                     (String)
10:36:31.214 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.214 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:31.215 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44587(Long), N(String), HANG(String)
10:36:31.218 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:31.223 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:31.224 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:31.227 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:33.076 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:36:33.076 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:36:33.080 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:33.545 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:36:33.546 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:36:33.548 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:33.567 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:33.568 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:33(String), 9999999(String), KVSP(String), 44588(String), 04954(String), T6(String), N(String), 0033                     (String)
10:36:33.571 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:33.571 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:33.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44588(Long), N(String), HANG(String)
10:36:33.575 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:33.618 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:36:33.618 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:36:33(String), 9999999(String), KVSP(String), 44591(String), 04954(String), T6(String), N(String), 1310                     (String)
10:36:33.621 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:33.621 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:33.622 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44591(Long), N(String), HANG(String)
10:36:33.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:33.656 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:33.657 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:33.661 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:36.027 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:36.027 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:36.044 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:46.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:46.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:46.043 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:56.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:36:56.025 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:56.051 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
10:36:56.055 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.055 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44618(Long), N(String), UNPRINT(String)
10:36:56.058 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.070 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.071 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44617(Long), N(String), UNPRINT(String)
10:36:56.074 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.084 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.084 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44614(Long), N(String), UNPRINT(String)
10:36:56.087 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.098 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44613(Long), N(String), UNPRINT(String)
10:36:56.101 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.104 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.104 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44611(Long), N(String), UNPRINT(String)
10:36:56.107 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.111 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44612(Long), N(String), UNPRINT(String)
10:36:56.115 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.118 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.119 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44616(Long), N(String), UNPRINT(String)
10:36:56.122 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.126 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.126 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44610(Long), N(String), UNPRINT(String)
10:36:56.130 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:36:56.135 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04956(String), 44615(Long), N(String), UNPRINT(String)
10:36:56.139 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:56.150 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:56.151 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:56.155 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:56.159 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:36:56.162 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String)
10:36:56.167 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:57.676 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:36:57.676 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String), N(String), 00(String)
10:36:57.683 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:57.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:36:57.686 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String), 00(String)
10:36:57.689 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:36:58.363 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.364 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44618(Long), N(String)
10:36:58.367 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.372 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.373 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44617(Long), N(String)
10:36:58.376 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.379 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.380 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44614(Long), N(String)
10:36:58.384 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.389 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.390 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44613(Long), N(String)
10:36:58.393 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.400 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.400 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44611(Long), N(String)
10:36:58.403 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.406 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.407 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44612(Long), N(String)
10:36:58.410 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.414 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44616(Long), N(String)
10:36:58.417 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.421 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44610(Long), N(String)
10:36:58.424 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.428 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:36:58.428 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04956(String), 44615(Long), N(String)
10:36:58.431 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.439 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:36:58.441 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:36:58.441 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String), 2018-01-28 10:36:58.361(Timestamp), 2018-01-28 10:39:58.361(Timestamp)
10:36:58.442 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:36:58.447 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:36:58.450 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:59.123 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:36:59.124 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:36:59.127 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:36:59.864 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:36:59.865 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String)
10:36:59.868 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:37:06.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:06.033 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:06.049 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:16.037 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:16.037 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:16.050 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:18.740 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:37:18.740 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String), N(String), 00(String)
10:37:18.746 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:37:20.520 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.521 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44618(String), 04956(String), T7(String), N(String), 0042                     (String)
10:37:20.527 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.527 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.527 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44618(Long), N(String), HANG(String)
10:37:20.536 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.546 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.547 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44617(String), 04956(String), T7(String), N(String), 1311                     (String)
10:37:20.550 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.550 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.551 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44617(Long), N(String), HANG(String)
10:37:20.554 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.559 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.560 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44614(String), 04956(String), T7(String), N(String), 0036                     (String)
10:37:20.562 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.562 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.563 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44614(Long), N(String), HANG(String)
10:37:20.572 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.591 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.591 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44613(String), 04956(String), T7(String), N(String), 0030                     (String)
10:37:20.594 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.594 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.595 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44613(Long), N(String), HANG(String)
10:37:20.598 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.604 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.604 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44611(String), 04956(String), T7(String), N(String), 0034                     (String)
10:37:20.607 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.607 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.607 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44611(Long), N(String), HANG(String)
10:37:20.612 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.621 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.621 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44612(String), 04956(String), T7(String), N(String), 0032                     (String)
10:37:20.624 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.624 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.625 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44612(Long), N(String), HANG(String)
10:37:20.628 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.633 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.633 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44616(String), 04956(String), T7(String), N(String), 1309                     (String)
10:37:20.636 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.636 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.637 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44616(Long), N(String), HANG(String)
10:37:20.639 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.645 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:20.646 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:20(String), 9999999(String), KVSP(String), 44610(String), 04956(String), T7(String), N(String), 0033                     (String)
10:37:20.648 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:20.649 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:20.650 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44610(Long), N(String), HANG(String)
10:37:20.653 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:20.661 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:37:20.661 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:37:20.664 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:37:22.411 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:37:22.411 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String), N(String), 00(String)
10:37:22.414 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:37:23.304 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:37:23.305 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04956(String)
10:37:23.309 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:23.754 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:37:23.754 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:37:23(String), 9999999(String), KVSP(String), 44615(String), 04956(String), T7(String), N(String), 1310                     (String)
10:37:23.793 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:37:23.793 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:37:23.794 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04956(String), 44615(Long), N(String), HANG(String)
10:37:23.797 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:37:23.804 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:37:23.805 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:37:23.808 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:37:26.034 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:26.035 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:26.050 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:36.036 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:36.036 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:36.055 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:46.046 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:46.046 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:46.089 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:37:56.042 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:37:56.042 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:37:56.057 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:06.045 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:06.045 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:06.078 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:16.028 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:16.028 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:16.041 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:18.058 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:38:18.058 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:18.061 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:26.031 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:26.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:26.045 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:36.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:36.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:36.049 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:46.029 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:46.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:46.043 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:38:56.029 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:38:56.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:38:56.043 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:06.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:06.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:06.048 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:16.030 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:16.031 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:16.044 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:26.071 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:26.071 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:26.091 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:36.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:36.033 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:36.047 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:46.031 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:46.032 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:46.045 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:39:56.035 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:39:56.035 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:39:56.062 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:26.329 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:26.389 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:26.567 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:26.623 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:26.624 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:26.681 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:34.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:34.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:34.371 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:44.353 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:44.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:44.370 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:42:54.354 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:42:54.355 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:42:54.368 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:42.914 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:42.983 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:43.115 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:43.268 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:43.270 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:43.278 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:53:50.463 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:53:50.463 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:53:50.485 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:00.464 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:00.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:00.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:10.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:10.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:10.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:20.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:20.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:20.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:30.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:30.468 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:30.481 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:40.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:40.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:40.506 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 9
10:54:40.524 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.526 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44629(Long), N(String), UNPRINT(String)
10:54:40.531 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.540 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.541 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44623(Long), N(String), UNPRINT(String)
10:54:40.545 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.561 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.562 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44624(Long), N(String), UNPRINT(String)
10:54:40.566 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.570 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.571 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44625(Long), N(String), UNPRINT(String)
10:54:40.574 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44627(Long), N(String), UNPRINT(String)
10:54:40.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.588 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.589 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44621(Long), N(String), UNPRINT(String)
10:54:40.593 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.597 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.598 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44628(Long), N(String), UNPRINT(String)
10:54:40.602 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.606 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.607 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44622(Long), N(String), UNPRINT(String)
10:54:40.611 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.615 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:54:40.616 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04954(String), 44626(Long), N(String), UNPRINT(String)
10:54:40.619 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:40.631 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:54:40.635 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:54:40.641 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:54:41.048 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:54:41.053 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:54:41.058 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:54:50.466 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:54:50.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:54:50.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:58.103 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:54:58.104 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:54:58.110 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:58.114 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:54:58.115 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), 00(String)
10:54:58.119 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:54:58.872 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.873 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44629(Long), N(String)
10:54:58.880 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.884 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.885 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44623(Long), N(String)
10:54:58.888 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.891 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.892 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44624(Long), N(String)
10:54:58.896 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.902 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.903 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44625(Long), N(String)
10:54:58.906 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.910 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.911 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44627(Long), N(String)
10:54:58.915 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.919 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.920 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44621(Long), N(String)
10:54:58.925 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.930 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.932 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44628(Long), N(String)
10:54:58.935 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.939 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44622(Long), N(String)
10:54:58.942 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.946 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:54:58.947 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04954(String), 44626(Long), N(String)
10:54:58.951 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:54:58.961 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:54:58.960 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:54:58.961 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:54:58.962 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), 2018-01-28 10:54:58.866(Timestamp), 2018-01-28 10:57:58.866(Timestamp)
10:54:58.965 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:54:58.968 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:00.468 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:00.469 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:00.483 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:10.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:10.467 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:10.548 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:18.036 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:55:18.036 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:18.041 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:18.932 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:55:18.933 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:55:18.937 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:19.984 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:55:19.985 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:55:19.989 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:20.470 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:20.470 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:20.486 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:24.428 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.444 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44629(String), 04954(String), T6(String), N(String), 1312                     (String)
10:55:24.450 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.457 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44629(Long), N(String), HANG(String)
10:55:24.478 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.494 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.495 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44623(String), 04954(String), T6(String), N(String), 0036                     (String)
10:55:24.501 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.504 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.506 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44623(Long), N(String), HANG(String)
10:55:24.511 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.518 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.520 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44624(String), 04954(String), T6(String), N(String), 0030                     (String)
10:55:24.529 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.533 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.542 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44624(Long), N(String), HANG(String)
10:55:24.567 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.709 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.712 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44625(String), 04954(String), T6(String), N(String), 0034                     (String)
10:55:24.717 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.718 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.719 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44625(Long), N(String), HANG(String)
10:55:24.740 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.764 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.765 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44627(String), 04954(String), T6(String), N(String), 0031                     (String)
10:55:24.770 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.771 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.773 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44627(Long), N(String), HANG(String)
10:55:24.779 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.813 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.815 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44621(String), 04954(String), T6(String), N(String), 1309                     (String)
10:55:24.830 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.831 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.832 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44621(Long), N(String), HANG(String)
10:55:24.838 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.851 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.852 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44628(String), 04954(String), T6(String), N(String), 0032                     (String)
10:55:24.879 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.880 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.881 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44628(Long), N(String), HANG(String)
10:55:24.892 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:24.954 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:24.957 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:24(String), 9999999(String), KVSP(String), 44622(String), 04954(String), T6(String), N(String), 1310                     (String)
10:55:24.983 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:24.984 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:24.986 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44622(Long), N(String), HANG(String)
10:55:24.991 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:25.140 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:55:25.141 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:55:25.146 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:26.669 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:55:26.670 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String), N(String), 00(String)
10:55:26.674 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:27.436 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
10:55:27.437 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04954(String)
10:55:27.443 [JavaFX Application Thread] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:30.107 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
10:55:30.108 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 10:55:30(String), 9999999(String), KVSP(String), 44626(String), 04954(String), T6(String), N(String), 0033                     (String)
10:55:30.115 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:55:30.118 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:55:30.127 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04954(String), 44626(Long), N(String), HANG(String)
10:55:30.132 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 0
10:55:30.331 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:55:30.332 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:55:30.335 [pool-2-thread-3] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:55:30.483 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:30.484 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:30.500 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:35.519 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:55:35.526 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:35.530 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:40.481 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:40.482 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:40.516 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:55:50.543 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:55:50.575 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:55:50.593 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:00.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:00.493 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:00.508 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:10.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:10.492 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:10.509 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:20.495 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:20.496 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:20.539 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 8
10:56:20.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.546 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44640(Long), N(String), UNPRINT(String)
10:56:20.553 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.564 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.565 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44639(Long), N(String), UNPRINT(String)
10:56:20.569 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.578 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.579 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44637(Long), N(String), UNPRINT(String)
10:56:20.584 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.595 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.596 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44636(Long), N(String), UNPRINT(String)
10:56:20.599 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.602 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.603 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44638(Long), N(String), UNPRINT(String)
10:56:20.606 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.610 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.610 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44633(Long), N(String), UNPRINT(String)
10:56:20.614 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.617 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.618 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44634(Long), N(String), UNPRINT(String)
10:56:20.621 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.624 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:56:20.625 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44635(Long), N(String), UNPRINT(String)
10:56:20.628 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:56:20.634 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:56:20.635 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:56:20.640 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:56:20.653 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:56:20.653 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String)
10:56:20.657 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:56:30.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:30.494 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:30.507 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:40.531 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:40.531 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:40.553 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:56:50.501 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:56:50.503 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:56:50.520 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:00.601 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:00.602 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:00.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:10.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:10.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:10.611 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:20.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:20.597 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:20.615 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:57:30.598 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:57:30.599 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:57:30.612 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:11.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no, rd.sub_no, rd.type, rd.table_no, rd.goodsno, rd.order_idx, t.name1, t.print_info, rd.rt_op_date, rb.IN_DATE, rd.rt_op_time, rd.s_code, rd.seal_count, rd.amt, rd.print_state, tp.single_prt, tk.name1 as t_kic_msg, rb.pos_id, tp.name1 as print_name, rd.barcode, sc.name1 as staff, tb.zone, rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.code = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in ('UNPRINT', 'PREPRINT' , 'MSG', 'HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:11.777 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:12.013 [Timer-0] DEBUG m.p.d.m.P.getPosOrderListInit BaseJdbcLogger.java:159 debug - <==      Total: 8
10:58:12.072 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select BILL_NO, MIN(RT_OP_TIME) as min_time from rt_bill_detail GROUP BY BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and rd.print_state in('HANG') and t.print_info in ( '0A' , '0B' , '0C' ) and exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:12.073 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:12.175 [Timer-0] DEBUG m.p.d.m.P.getHangPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:12.192 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.193 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44640(Long), N(String), PREPRINT(String)
10:58:12.198 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.204 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.205 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44639(Long), N(String), PREPRINT(String)
10:58:12.212 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.216 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.217 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44637(Long), N(String), PREPRINT(String)
10:58:12.221 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.225 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.227 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44636(Long), N(String), PREPRINT(String)
10:58:12.231 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.235 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.236 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44638(Long), N(String), PREPRINT(String)
10:58:12.240 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.244 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.245 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44633(Long), N(String), PREPRINT(String)
10:58:12.248 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.256 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44634(Long), N(String), PREPRINT(String)
10:58:12.262 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.266 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
10:58:12.267 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44635(Long), N(String), PREPRINT(String)
10:58:12.270 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:12.281 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:58:12.286 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:58:12.291 [pool-3-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:58:12.519 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:58:12.521 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String)
10:58:12.527 [Timer-0] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:58:19.552 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:19.553 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:19.569 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:29.552 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:29.553 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:29.571 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:35.637 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
10:58:35.638 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String), N(String), 00(String)
10:58:35.642 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:35.646 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select bill_no from RT_ORDER_BILL_HIS where bill_no = ? and bill_t = 'N' and sub_no = ? and( settled = 'FALSE' or settled = 'TRUE') ; 
10:58:35.648 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String), 00(String)
10:58:35.654 [JavaFX Application Thread] DEBUG m.p.d.m.P.checkBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:36.423 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.425 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44640(Long), N(String)
10:58:36.429 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.433 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.433 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44639(Long), N(String)
10:58:36.437 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.443 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.444 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44637(Long), N(String)
10:58:36.448 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.452 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.453 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44636(Long), N(String)
10:58:36.456 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.460 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.461 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44638(Long), N(String)
10:58:36.464 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.468 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.470 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44633(Long), N(String)
10:58:36.473 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.477 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.478 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44634(Long), N(String)
10:58:36.482 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.486 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? 
10:58:36.487 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - ==> Parameters: HANG(String), 04957(String), 44635(Long), N(String)
10:58:36.491 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintStateWithoutOldPrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.501 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
10:58:36.501 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: insert into ORDER_HANG_LIST values(?,?,?) 
10:58:36.502 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
10:58:36.503 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String), 2018-01-28 10:58:36.417(Timestamp), 2018-01-28 11:01:36.417(Timestamp)
10:58:36.506 [pool-2-thread-1] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
10:58:36.510 [JavaFX Application Thread] DEBUG m.p.d.m.O.addOrderHangList BaseJdbcLogger.java:159 debug - <==    Updates: 1
10:58:36.954 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==>  Preparing: select top 32 ohl.REF_NUM, CASE when rob.table_no is not null THEN rob.table_no ELSE robs.TABLE_NO END as table_no from ORDER_HANG_LIST as ohl left join RT_ORDER_BILL rob on rob.bill_no = ohl.ref_num left join rt_order_bill_his robs on robs.bill_no = ohl.ref_num where ohl.REF_NUM not in ( select top 0 oh.REF_NUM from ORDER_HANG_LIST as oh order by oh.HANG_TIME )order by ohl.HANG_TIME 
10:58:36.955 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:36.959 [JavaFX Application Thread] DEBUG m.p.d.m.O.getOrderHangList BaseJdbcLogger.java:159 debug - <==      Total: 1
10:58:37.710 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
10:58:37.711 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String)
10:58:37.715 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
10:58:39.560 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:39.560 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:39.574 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:49.556 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:49.557 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:49.573 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:58:59.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:58:59.867 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:58:59.960 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:09.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:09.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:09.653 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:19.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:19.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:19.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:29.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:29.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:29.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:39.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:39.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:39.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:49.628 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:49.629 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:49.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
10:59:59.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
10:59:59.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
10:59:59.653 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:09.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:09.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:09.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:19.630 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:19.631 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:19.650 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:29.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:29.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:29.651 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:39.632 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:39.633 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:39.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:49.634 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:49.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:49.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:00:59.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:00:59.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:00:59.659 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:09.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:09.635 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:09.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:19.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:19.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:19.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:29.636 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:29.637 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:29.705 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 8
11:01:29.709 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.711 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44640(Long), N(String), HANG(String)
11:01:29.714 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.719 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.720 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44639(Long), N(String), HANG(String)
11:01:29.723 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.728 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.730 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44637(Long), N(String), HANG(String)
11:01:29.735 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.739 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.740 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44636(Long), N(String), HANG(String)
11:01:29.746 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.752 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.754 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44638(Long), N(String), HANG(String)
11:01:29.759 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.766 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.778 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44633(Long), N(String), HANG(String)
11:01:29.783 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.790 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.791 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44634(Long), N(String), HANG(String)
11:01:29.795 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.802 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:29.803 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PREPRINT(String), 04957(String), 44635(Long), N(String), HANG(String)
11:01:29.807 [Timer-0] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.811 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==>  Preparing: delete from ORDER_HANG_LIST with(READPAST) where REF_NUM = ? 
11:01:29.812 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String)
11:01:29.815 [Timer-0] DEBUG m.p.d.m.O.deleteOrderHangListByRefNum BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:29.953 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:29.954 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:29.958 [pool-3-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:33.183 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==>  Preparing: select count(distinct RT_OP_TIME) from RT_BILL_DETAIL with(READPAST) where BILL_NO = ? 
11:01:33.184 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String)
11:01:33.191 [JavaFX Application Thread] DEBUG m.p.d.m.P.getOrderCountsByBillNo BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:34.428 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==>  Preparing: select LEAVE_DATE from rt_order_bill_his where bill_no = ? and bill_t = ? and sub_no = ?; 
11:01:34.430 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - ==> Parameters: 04957(String), N(String), 00(String)
11:01:34.435 [JavaFX Application Thread] DEBUG m.p.d.m.PosOrderDtoMapper.isBilled BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:36.146 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.147 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44640(String), 04957(String), T6(String), N(String), 0043                     (String)
11:01:36.152 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.152 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.153 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44640(Long), N(String), PREPRINT(String)
11:01:36.156 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.163 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.164 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44639(String), 04957(String), T6(String), N(String), 0047                     (String)
11:01:36.167 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.168 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.169 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44639(Long), N(String), PREPRINT(String)
11:01:36.172 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.178 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.178 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44637(String), 04957(String), T6(String), N(String), 1312                     (String)
11:01:36.181 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.182 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.183 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44637(Long), N(String), PREPRINT(String)
11:01:36.186 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.196 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.197 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44636(String), 04957(String), T6(String), N(String), 0036                     (String)
11:01:36.200 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.201 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.202 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44636(Long), N(String), PREPRINT(String)
11:01:36.206 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.213 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.214 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44638(String), 04957(String), T6(String), N(String), 0039                     (String)
11:01:36.218 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.219 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.220 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44638(Long), N(String), PREPRINT(String)
11:01:36.225 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.234 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.235 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44633(String), 04957(String), T6(String), N(String), 0032                     (String)
11:01:36.240 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.241 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.242 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44633(Long), N(String), PREPRINT(String)
11:01:36.247 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.256 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.257 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44634(String), 04957(String), T6(String), N(String), 0033                     (String)
11:01:36.260 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.261 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44634(Long), N(String), PREPRINT(String)
11:01:36.264 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.273 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==>  Preparing: INSERT INTO LOG (BARCODE,RT_OP_DATE,RT_OP_TIME,S_CODE,LOG_T,RT_T_IDX,BILL_NO,SUB_NO,TABLE1,[TYPE],REMARK1) VALUES ( ?,?,?,?,?,?,?,'00',?,?,?) 
11:01:36.274 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String), 2018-01-28(String), 11:01:36(String), 9999999(String), KVSP(String), 44635(String), 04957(String), T6(String), N(String), 1310                     (String)
11:01:36.277 [JavaFX Application Thread] DEBUG m.p.d.mapper.RtLogMapper.insertTLog BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==>  Preparing: update rt_bill_detail with(READPAST) set print_state= ? where bill_no = ? and order_idx= ? and type = ? and ( print_state = ? or print_state is null) 
11:01:36.278 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - ==> Parameters: PRINTED(String), 04957(String), 44635(Long), N(String), PREPRINT(String)
11:01:36.282 [JavaFX Application Thread] DEBUG m.p.d.m.P.updatePrintState BaseJdbcLogger.java:159 debug - <==    Updates: 1
11:01:36.291 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==>  Preparing: select LINE from BARCODE where BARCODE = ? 
11:01:36.292 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - ==> Parameters: 200101(String)
11:01:36.304 [pool-2-thread-2] DEBUG m.p.d.m.B.getLineByBarcode BaseJdbcLogger.java:159 debug - <==      Total: 1
11:01:39.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:39.650 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:39.664 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:49.639 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:49.640 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:49.656 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:01:59.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:01:59.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:01:59.678 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:09.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:09.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:09.662 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:19.638 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:19.638 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:19.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:29.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:29.653 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:29.666 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:39.639 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:39.640 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:39.653 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:49.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:49.668 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:49.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:02:59.641 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:02:59.641 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:02:59.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:09.642 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:09.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:09.657 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:19.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:19.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:19.664 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:29.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:29.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:29.660 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:39.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:39.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:39.659 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:49.642 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:49.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:49.687 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:03:59.643 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:03:59.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:03:59.658 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:09.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:09.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:09.662 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:19.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:19.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:19.661 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:29.644 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:29.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:29.661 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:39.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:39.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:39.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:49.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:49.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:49.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:04:59.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:04:59.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:04:59.661 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:09.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:09.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:09.667 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:19.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:19.645 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:19.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:29.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:29.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:29.660 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:39.656 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:39.657 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:39.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:49.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:49.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:49.665 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:05:59.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:05:59.649 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:05:59.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:09.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:09.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:09.660 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:19.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:19.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:19.676 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:29.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:29.646 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:29.660 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:39.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:39.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:39.671 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:49.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:49.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:49.681 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:06:59.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:06:59.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:06:59.663 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:09.647 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:09.648 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:09.662 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:19.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:19.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:19.670 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:29.650 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:29.651 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:29.665 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:39.651 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:39.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:39.665 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:49.658 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:49.659 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:49.675 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:07:59.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:07:59.652 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:07:59.665 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:09.654 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:09.655 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:09.670 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:19.656 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:19.656 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:19.672 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:29.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:29.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:29.709 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:39.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:39.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:39.719 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:49.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:49.730 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:49.746 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:08:59.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:08:59.721 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:08:59.739 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:09.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:09.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:09.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:19.692 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:19.693 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:19.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:29.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:29.697 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:29.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:39.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:39.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:39.710 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:49.702 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:49.703 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:49.724 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:09:59.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:09:59.696 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:09:59.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:09.694 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:09.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:09.708 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:19.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:19.695 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:19.711 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:29.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:29.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:29.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:39.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:39.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:39.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:49.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:49.698 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:49.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:10:59.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:10:59.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:10:59.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:09.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:09.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:09.714 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:19.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:19.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:19.715 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:29.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:29.699 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:29.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:39.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:39.700 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:39.713 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:49.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:49.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:49.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:11:59.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:11:59.701 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:11:59.716 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
11:12:09.755 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==>  Preparing: select rd.bill_no,rd.sub_no,rd.type,rd.table_no,rd.goodsno,rd.order_idx,rb.IN_DATE, t.name1,t.print_info,rd.rt_op_date,rd.rt_op_time,rd.s_code,rd.seal_count,rd.amt,rd.print_state,tp.single_prt, tk.name1 as t_kic_msg,rb.pos_id, tp.name1 as print_name, rd.barcode,sc.name1 as staff, tb.zone,rs.NAME1 as r_desc, isnull(ts.name1,'')+ isnull(' '+rs.name1,'')+ isnull(' '+tk.name1,'') as print_msg, bc.line as region_id, isnull(rp.person_num, 0 ) person_num, ts.name1 as att_name, (case when DATEDIFF(second, rm.min_time, rd.rt_op_time) = 0 then '首單' when DATEDIFF(second, rm.min_time, rd.rt_op_time) > 7200 then '尾單' else '加單' end) as order_type from rt_bill_detail rd with(READPAST) left join t_goods t on rd.goodsno = t.goodsno left join t_printer tp on t.print_info = tp.ptn_code left join t_kic_msg tk on tk.code = rd.t_kic_msg left join rt_order_bill rb on rb.bill_no = rd.bill_no and rd.type = rb.bill_t left join s_code sc on sc.code = rd.s_code left join [TABLE] tb on tb.table_no = rd.table_no left join r_desc rs on rs.CODE = rd.R_DESC left join BARCODE bc on bc.BARCODE = rd.BARCODE left join rt_order_ts ro on rd.order_idx = ro.order_idx left join order_ts ts on ts.CODE = ro.tss_code and ts.a_group = rd.goodsno left join (select rd.BILL_NO,sum(rd.SEAL_COUNT) as person_num from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT = '054' and rd.TYPE ='N' group by rd.BILL_NO) rp on rp.BILL_NO = rd.BILL_NO left join (select rd.BILL_NO, MIN(rd.RT_OP_TIME) as min_time from rt_bill_detail rd LEFT JOIN t_goods t on rd.goodsno = t.goodsno where t.CAT not in ('054','007') and rd.TYPE ='N' and t.print_info in ( '0A' , '0B' , '0C' ) GROUP BY rd.BILL_NO) rm on rm.BILL_NO = rd.BILL_NO where rd.type = 'N' and (rd.print_state in('UNPRINT', 'MSG','HANG') or rd.print_state is null) and t.print_info in ( '0A' , '0B' , '0C' ) and not exists ( select * from order_hang_list h where getdate() between h.HANG_TIME and h.RELEASE_TIME and h.ref_num =rd.bill_no ) order by cast(isnull(t.IN_DECIMAL,'0') as int), rd.rt_op_date,rd.order_idx 
11:12:09.756 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - ==> Parameters: 
11:12:09.772 [Timer-0] DEBUG m.p.d.m.P.getPosOrderList BaseJdbcLogger.java:159 debug - <==      Total: 0
